<!DOCTYPE html><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.3.0 for Hugo" />
  

  
  









  




  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Dr. Dominic Royé" />

  
  
  
    
  
  <meta name="description" content="The tidyverse universe of packages, a collection of packages specially focused on data science, marked a milestone in R programming. In this post I am going to summarize very briefly the most essential to start in this world. The tidyverse grammar follows a common structure in all functions. The most essential thing is that the first argument is the object and then come the rest of the arguments. In addition, a set of verbs is provided to facilitate the use of the functions. The tidyverse philosophy and grammar of functions structure is also reflected in other packages that make its use compatible with the collection of tidyverse." />

  
  <link rel="alternate" hreflang="en-us" href="https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/" />

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b48d89910a3f8560bb2d78fedea8d682.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-27463794-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-27463794-2', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/en/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu27cb63416a395b8c8d0d7112b85e26a9_17299_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu27cb63416a395b8c8d0d7112b85e26a9_17299_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@@dr_xeo" />
    <meta property="twitter:creator" content="@@dr_xeo" />
  
  <meta property="og:site_name" content="Dr. Dominic Royé" />
  <meta property="og:url" content="https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/" />
  <meta property="og:title" content="A very short introduction to Tidyverse | Dr. Dominic Royé" />
  <meta property="og:description" content="The tidyverse universe of packages, a collection of packages specially focused on data science, marked a milestone in R programming. In this post I am going to summarize very briefly the most essential to start in this world. The tidyverse grammar follows a common structure in all functions. The most essential thing is that the first argument is the object and then come the rest of the arguments. In addition, a set of verbs is provided to facilitate the use of the functions. The tidyverse philosophy and grammar of functions structure is also reflected in other packages that make its use compatible with the collection of tidyverse." /><meta property="og:image" content="https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/featured.png" />
    <meta property="twitter:image" content="https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/featured.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2020-06-06T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2020-06-06T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/"
  },
  "headline": "A very short introduction to Tidyverse",
  
  "image": [
    "https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/featured.png"
  ],
  
  "datePublished": "2020-06-06T00:00:00Z",
  "dateModified": "2020-06-06T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Dr. Dominic Royé"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "University of Santiago de Compostela",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dominicroye.github.io/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_192x192_fit_lanczos_3.png"
    }
  },
  "description": "The tidyverse universe of packages, a collection of packages specially focused on data science, marked a milestone in R programming. In this post I am going to summarize very briefly the most essential to start in this world. The tidyverse grammar follows a common structure in all functions. The most essential thing is that the first argument is the object and then come the rest of the arguments. In addition, a set of verbs is provided to facilitate the use of the functions. The tidyverse philosophy and grammar of functions structure is also reflected in other packages that make its use compatible with the collection of tidyverse."
}
</script>

  

  

  

  





  <title>A very short introduction to Tidyverse | Dr. Dominic Royé</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="cdcb21327c6f490be8096e3312c84d5b" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.2da3b1fa37e894630bf6de39b1b694b3.js"></script>

  




  <div class="page-header">
    







 



  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/en/"><img src="/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_0x70_resize_lanczos_3.png" alt="Dr. Dominic Royé"
            
            >
             <div style = "padding-top:0.5em;">Dr. Dominic Royé</div></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/en/"><img src="/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_0x70_resize_lanczos_3.png" alt="Dr. Dominic Royé"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          

          

          
          
          
          

          
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/en/#"><span>home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/en/#posts"><span>blog</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/en/#featured"><span>publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/en/#projects"><span>graphs</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/en/#about"><span>me</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/dr_xeo" data-toggle="tooltip" data-placement="bottom" title="Follow me on Twitter" target="_blank" rel="noopener" aria-label="Follow me on Twitter">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        

        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>A very short introduction to Tidyverse</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2020-06-06
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    24 min read
  </span>
  

  
  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/en/category/tidyverse/">tidyverse</a>, <a href="/en/category/r/">R</a>, <a href="/en/category/relementary/">R:elementary</a></span>
  

</div>

  





</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 552px;">
  <div style="position: relative">
    <img src="/en/2020/a-very-short-introduction-to-tidyverse/featured_hucb30efb4845712af1b21177307978519_146938_720x0_resize_lanczos_3.png" width="720" height="552" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#tidyverse"><span class="toc-section-number">1</span> Tidyverse</a></li>
<li><a href="#style-guide"><span class="toc-section-number">2</span> Style guide</a></li>
<li><a href="#pipe"><span class="toc-section-number">3</span> Pipe %&gt;%</a></li>
<li><a href="#tidyverse-packages"><span class="toc-section-number">4</span> Tidyverse packages</a>
<ul>
<li><a href="#read-and-write-data"><span class="toc-section-number">4.1</span> Read and write data</a></li>
<li><a href="#character-manipulations"><span class="toc-section-number">4.2</span> Character manipulations</a></li>
<li><a href="#management-of-dates-and-times"><span class="toc-section-number">4.3</span> Management of dates and times</a></li>
<li><a href="#table-and-vector-manipulation"><span class="toc-section-number">4.4</span> Table and vector manipulation</a>
<ul>
<li><a href="#select-and-rename"><span class="toc-section-number">4.4.1</span> Select and rename</a></li>
<li><a href="#filter-and-sort"><span class="toc-section-number">4.4.2</span> Filter and sort</a></li>
<li><a href="#group-and-summarize"><span class="toc-section-number">4.4.3</span> Group and summarize</a></li>
<li><a href="#join-tables"><span class="toc-section-number">4.4.4</span> Join tables</a></li>
<li><a href="#long-and-wide-tables"><span class="toc-section-number">4.4.5</span> Long and wide tables</a></li>
</ul></li>
<li><a href="#visualize-data"><span class="toc-section-number">4.5</span> Visualize data</a>
<ul>
<li><a href="#line-and-scatter-plot"><span class="toc-section-number">4.5.1</span> Line and scatter plot</a></li>
<li><a href="#boxplot"><span class="toc-section-number">4.5.2</span> Boxplot</a></li>
<li><a href="#heatmap"><span class="toc-section-number">4.5.3</span> Heatmap</a></li>
</ul></li>
<li><a href="#apply-functions-on-vectors-or-lists"><span class="toc-section-number">4.6</span> Apply functions on vectors or lists</a></li>
</ul></li>
</ul>
</div>

<div id="tidyverse" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Tidyverse</h1>
<p>The <code>tidyverse</code> universe of packages, a collection of packages specially focused on data science, marked a milestone in R programming. In this post I am going to summarize very briefly the most essential to start in this world. The tidyverse grammar follows a common structure in all functions. The most essential thing is that the first argument is the object and then come the rest of the arguments. In addition, a set of verbs is provided to facilitate the use of the functions. The <code>tidyverse</code> philosophy and grammar of functions are also reflected in other packages that make its use compatible with the collection. For example, the <code>sf</code> package (<a href="https://r-spatial.github.io/sf/articles/sf1.html">simple feature</a>) is a standardized way to encode spatial vector data and allows the use of multiple functions that we can find in the <code>dplyr</code> package.</p>
<p>The core of the <code>tidyverse</code> collection is made up of the following packages:</p>
<table>
<thead>
<tr class="header">
<th align="left">Package</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ggplot2</td>
<td align="left">Grammar for creating graphics</td>
</tr>
<tr class="even">
<td align="left">purrr</td>
<td align="left">R functional programming</td>
</tr>
<tr class="odd">
<td align="left">tibble</td>
<td align="left">Modern and effective table system</td>
</tr>
<tr class="even">
<td align="left">dplyr</td>
<td align="left">Grammar for data manipulation</td>
</tr>
<tr class="odd">
<td align="left">tidyr</td>
<td align="left">Set of functions to create tidy data</td>
</tr>
<tr class="even">
<td align="left">stringr</td>
<td align="left">Function set to work with characters</td>
</tr>
<tr class="odd">
<td align="left">readr</td>
<td align="left">An easy and fast way to import data</td>
</tr>
<tr class="even">
<td align="left">forcats</td>
<td align="left">Tools to easily work with factors</td>
</tr>
</tbody>
</table>
<p>In addition to the mentioned packages, <code>lubridate</code> is also used very frequently to work with dates and times, and also <code>readxl</code> which allows us to import files in Excel format. To know all the available packages we can use the function <code>tidyverse_packages()</code>.</p>
<pre><code>##  [1] &quot;broom&quot;         &quot;cli&quot;           &quot;crayon&quot;        &quot;dbplyr&quot;       
##  [5] &quot;dplyr&quot;         &quot;dtplyr&quot;        &quot;forcats&quot;       &quot;googledrive&quot;  
##  [9] &quot;googlesheets4&quot; &quot;ggplot2&quot;       &quot;haven&quot;         &quot;hms&quot;          
## [13] &quot;httr&quot;          &quot;jsonlite&quot;      &quot;lubridate&quot;     &quot;magrittr&quot;     
## [17] &quot;modelr&quot;        &quot;pillar&quot;        &quot;purrr&quot;         &quot;readr&quot;        
## [21] &quot;readxl&quot;        &quot;reprex&quot;        &quot;rlang&quot;         &quot;rstudioapi&quot;   
## [25] &quot;rvest&quot;         &quot;stringr&quot;       &quot;tibble&quot;        &quot;tidyr&quot;        
## [29] &quot;xml2&quot;          &quot;tidyverse&quot;</code></pre>
<p>It is very easy to get conflicts between functions, that is, that the same function name exists in several packages. To avoid this, we can write the name of the package in front of the function we want to use, separated by the colon symbol written twice (<code>package_name::function_name</code>).</p>
<p>Before I get started with the packages, I hope it will be a really short introduction, some comments on the style when programming in R.</p>
</div>
<div id="style-guide" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Style guide</h1>
<p>In R there is no universal style guide, that is, in the R syntax it is not necessary to follow specific rules for our scripts. But it is recommended to work in a homogeneous, uniform, legible and clear way when writing scripts. The <code>tidyverse</code> collection has its own guide (<a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a>).</p>
<p>The most important recommendations are:</p>
<ul>
<li>Avoid using more than 80 characters per line to allow reading the complete code.</li>
<li>Always use a space after a comma, never before.</li>
<li>The operators (==, +, -, &lt;-,%&gt;%, etc.) must have a space before and after.</li>
<li>There is no space between the name of a function and the first parenthesis, nor between the last argument and the final parenthesis of a function.</li>
<li>Avoid reusing names of functions and common variables (<code>c &lt;- 5</code> vs. <code>c()</code>)</li>
<li>Sort the script separating the parts with the comment form <code># Import data -----</code></li>
<li>Avoid accent marks or special symbols in names, files, routes, etc.</li>
<li>Object names must follow a constant structure: <code>day_one</code>, <code>day_1</code>.</li>
</ul>
<p>It is advisable to use a correct indentation for multiple arguments of a function or functions chained by the <code>pipe</code> operator (<code>%&gt;%</code>).</p>
</div>
<div id="pipe" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Pipe %&gt;%</h1>
<p>To facilitate working in data management, manipulation and visualization, the <code>magrittr</code> package introduces the famous <em>pipe</em> operator in the form <code>%&gt;%</code> with the aim of combining various functions without the need to assign the result to a new object. The <em>pipe</em> operator passes the output of a function applied to the first argument of the next function. This way of combining functions allows you to chain several steps simultaneously, to perform sequential tasks. In the very simple example below, we pass the vector <code>1:5</code> to the <code>mean()</code> function to calculate the average. You should know that there are a couple of other pipe operators in the same package.</p>
<pre class="r"><code>1:5 %&gt;% mean()</code></pre>
<pre><code>## [1] 3</code></pre>
</div>
<div id="tidyverse-packages" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Tidyverse packages</h1>
<div id="read-and-write-data" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Read and write data</h2>
<p>The <code>readr</code> package makes it easy to read or write multiple file formats using functions that start with <code>read_*</code> or <code>write_*</code>.
In comparison to R Base, <code>readr</code> functions are faster; they handle problematic column names, and dates are automatically converted. The imported tables are of class <code>tibble</code> (<em>tbl_df</em>), a modern version of <code>data.frame</code> from the <code>tibble</code> package. In the same sense, you can use the <code>read_excel()</code> function of the <code>readxl</code> package to import data from Excel sheets (more details also in this <a href="https://dominicroye.github.io/en/2019/import-excel-sheets-with-r/">blog post</a>). In the following example, we import the mobility data registered by Google (<a href="https://www.google.com/covid19/mobility/">link</a>) during the last months of the COVID-19 pandemic (<a href="/files/Global_Mobility_Report.csv">download</a>).</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">read_csv() o read_csv2()</td>
<td align="left">coma or semicolon (CSV)</td>
</tr>
<tr class="even">
<td align="left">read_delim()</td>
<td align="left">general separator</td>
</tr>
<tr class="odd">
<td align="left">read_table()</td>
<td align="left">whitespace-separated</td>
</tr>
</tbody>
</table>
<pre class="r"><code># load package
library(tidyverse)

google_mobility &lt;- read_csv(&quot;Global_Mobility_Report.csv&quot;)</code></pre>
<pre><code>## Rows: 516697 Columns: 13</code></pre>
<pre><code>## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr  (6): country_region_code, country_region, sub_region_1, sub_region_2, i...
## dbl  (6): retail_and_recreation_percent_change_from_baseline, grocery_and_ph...
## date (1): date</code></pre>
<pre><code>## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>google_mobility</code></pre>
<pre><code>## # A tibble: 516,697 x 13
##    country_region_code country_region  sub_region_1 sub_region_2 iso_3166_2_code
##    &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;          
##  1 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  2 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  3 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  4 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  5 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  6 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  7 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  8 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
##  9 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
## 10 AE                  United Arab Em~ &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;           
## # ... with 516,687 more rows, and 8 more variables: census_fips_code &lt;chr&gt;,
## #   date &lt;date&gt;, retail_and_recreation_percent_change_from_baseline &lt;dbl&gt;,
## #   grocery_and_pharmacy_percent_change_from_baseline &lt;dbl&gt;,
## #   parks_percent_change_from_baseline &lt;dbl&gt;,
## #   transit_stations_percent_change_from_baseline &lt;dbl&gt;,
## #   workplaces_percent_change_from_baseline &lt;dbl&gt;,
## #   residential_percent_change_from_baseline &lt;dbl&gt;</code></pre>
<p>Important is to take a look at the argument names, since they change in the <code>readr</code> functions. For example, the well-known <code>header = TRUE</code> argument of <code>read.csv()</code> is in this case <code>col_names = TRUE</code>. More details can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">Cheat-Sheet</a> of <code>readr</code>.</p>
</div>
<div id="character-manipulations" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Character manipulations</h2>
<p>For working with strings we use the <code>stringr</code> package, whose functions always start with <code>str_*</code> followed by a verb and the first argument.</p>
<p>Some of these functions are as follows:</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">str_replace()</td>
<td align="left">replace patterns</td>
</tr>
<tr class="even">
<td align="left">str_c()</td>
<td align="left">combine characters</td>
</tr>
<tr class="odd">
<td align="left">str_detect()</td>
<td align="left">detect patterns</td>
</tr>
<tr class="even">
<td align="left">str_extract()</td>
<td align="left">extract patterns</td>
</tr>
<tr class="odd">
<td align="left">str_sub()</td>
<td align="left">extract by position</td>
</tr>
<tr class="even">
<td align="left">str_length()</td>
<td align="left">length of string</td>
</tr>
</tbody>
</table>
<p>Regular expressions are often used for character patterns. For example, the regular expression <code>[aeiou]</code> matches any single character that is a vowel. The use of square brackets <code>[]</code> corresponds to character classes. For example, <code>[abc]</code> corresponds to each letter regardless of its position. <code>[a-z]</code>, <code>[A-Z]</code> or <code>[0-9]</code> each between a and z or 0 and 9. And finally, <code>[:punct:]</code> punctuation, etc. With curly braces “{}” we can indicate the number of the previous element, <code>{2}</code> would be twice, {1,2} between one and two, etc. Also with <code>$</code> or <code>^</code> we can indicate if the pattern starts at the beginning or ends at the end. More details and patterns can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/strings.pdf">Cheat-Sheet</a> of <code>stringr</code>.</p>
<pre class="r"><code># replace &#39;er&#39; at the end with empty space

str_replace(month.name, &quot;er$&quot;, &quot;&quot;)</code></pre>
<pre><code>##  [1] &quot;January&quot;  &quot;February&quot; &quot;March&quot;    &quot;April&quot;    &quot;May&quot;      &quot;June&quot;    
##  [7] &quot;July&quot;     &quot;August&quot;   &quot;Septemb&quot;  &quot;Octob&quot;    &quot;Novemb&quot;   &quot;Decemb&quot;</code></pre>
<pre class="r"><code>str_replace(month.name, &quot;^Ma&quot;, &quot;&quot;)</code></pre>
<pre><code>##  [1] &quot;January&quot;   &quot;February&quot;  &quot;rch&quot;       &quot;April&quot;     &quot;y&quot;         &quot;June&quot;     
##  [7] &quot;July&quot;      &quot;August&quot;    &quot;September&quot; &quot;October&quot;   &quot;November&quot;  &quot;December&quot;</code></pre>
<pre class="r"><code># combine characters

a &lt;- str_c(month.name, 1:12, sep = &quot;_&quot;)
a</code></pre>
<pre><code>##  [1] &quot;January_1&quot;   &quot;February_2&quot;  &quot;March_3&quot;     &quot;April_4&quot;     &quot;May_5&quot;      
##  [6] &quot;June_6&quot;      &quot;July_7&quot;      &quot;August_8&quot;    &quot;September_9&quot; &quot;October_10&quot; 
## [11] &quot;November_11&quot; &quot;December_12&quot;</code></pre>
<pre class="r"><code># collapse combination

str_c(month.name, collapse = &quot;, &quot;)</code></pre>
<pre><code>## [1] &quot;January, February, March, April, May, June, July, August, September, October, November, December&quot;</code></pre>
<pre class="r"><code># detect patterns

str_detect(a, &quot;_[1-5]{1}&quot;)</code></pre>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<pre class="r"><code># extract patterns

str_extract(a, &quot;_[1-9]{1,2}&quot;)</code></pre>
<pre><code>##  [1] &quot;_1&quot;  &quot;_2&quot;  &quot;_3&quot;  &quot;_4&quot;  &quot;_5&quot;  &quot;_6&quot;  &quot;_7&quot;  &quot;_8&quot;  &quot;_9&quot;  &quot;_1&quot;  &quot;_11&quot; &quot;_12&quot;</code></pre>
<pre class="r"><code># extract the characters between position 1 and 2

str_sub(month.name, 1, 2)</code></pre>
<pre><code>##  [1] &quot;Ja&quot; &quot;Fe&quot; &quot;Ma&quot; &quot;Ap&quot; &quot;Ma&quot; &quot;Ju&quot; &quot;Ju&quot; &quot;Au&quot; &quot;Se&quot; &quot;Oc&quot; &quot;No&quot; &quot;De&quot;</code></pre>
<pre class="r"><code># string length of each month

str_length(month.name)</code></pre>
<pre><code>##  [1] 7 8 5 5 3 4 4 6 9 7 8 8</code></pre>
<pre class="r"><code># the &#39;.&#39; represents the object passed by the pipe operator %&gt;%
str_length(month.name) %&gt;% 
   str_c(month.name, ., sep = &quot;.&quot;)</code></pre>
<pre><code>##  [1] &quot;January.7&quot;   &quot;February.8&quot;  &quot;March.5&quot;     &quot;April.5&quot;     &quot;May.3&quot;      
##  [6] &quot;June.4&quot;      &quot;July.4&quot;      &quot;August.6&quot;    &quot;September.9&quot; &quot;October.7&quot;  
## [11] &quot;November.8&quot;  &quot;December.8&quot;</code></pre>
<p>A very useful function is <code>str_glue()</code> to interpolate characters.</p>
<pre class="r"><code>name &lt;- c(&quot;Juan&quot;, &quot;Michael&quot;)
age &lt;- c(50, 80) 
date_today &lt;- Sys.Date()

str_glue(
  &quot;My name is {name}, &quot;,
  &quot;I&#39;am {age}, &quot;,
  &quot;and my birth year is {format(date_today-age*365, &#39;%Y&#39;)}.&quot;
)</code></pre>
<pre><code>## My name is Juan, I&#39;am 50, and my birth year is 1972.
## My name is Michael, I&#39;am 80, and my birth year is 1942.</code></pre>
</div>
<div id="management-of-dates-and-times" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Management of dates and times</h2>
<p>The <code>lubridate</code> package is very powerful in handling dates and times. It allows us to create R recognized objects with functions (like <code>ymd()</code> or <code>ymd_hms()</code>) and we can even make calculations.</p>
<p>We only must know the following abbreviations:</p>
<ul>
<li><code>ymd</code>: represents <code>y:year</code>, <code>m: month</code>, <code>d:day</code></li>
<li><code>hms</code>: represents <code>h:hour</code>, <code>m:minutes</code>, <code>s:seconds</code></li>
</ul>
<pre class="r"><code># load package
library(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre class="r"><code># date vector
dat &lt;- c(&quot;1999/12/31&quot;, &quot;2000/01/07&quot;, &quot;2005/05/20&quot;,&quot;2010/03/25&quot;)

# date-time vector
dat_time &lt;- c(&quot;1988-08-01 05:00&quot;, &quot;2000-02-01 22:00&quot;)

# convert to date class
dat &lt;- ymd(dat) 
dat</code></pre>
<pre><code>## [1] &quot;1999-12-31&quot; &quot;2000-01-07&quot; &quot;2005-05-20&quot; &quot;2010-03-25&quot;</code></pre>
<pre class="r"><code># other date formats
dmy(&quot;05-02-2000&quot;)</code></pre>
<pre><code>## [1] &quot;2000-02-05&quot;</code></pre>
<pre class="r"><code>ymd(&quot;20000506&quot;)</code></pre>
<pre><code>## [1] &quot;2000-05-06&quot;</code></pre>
<pre class="r"><code># convert to POSIXct
dat_time &lt;- ymd_hm(dat_time)
dat_time</code></pre>
<pre><code>## [1] &quot;1988-08-01 05:00:00 UTC&quot; &quot;2000-02-01 22:00:00 UTC&quot;</code></pre>
<pre class="r"><code># different date formats
dat_mix &lt;- c(&quot;1999/12/05&quot;, &quot;05-09-2008&quot;, &quot;2000/08/09&quot;, &quot;25-10-2019&quot;)

# mixted formats with known convention found in ?strptime
parse_date_time(dat_mix, order = c(&quot;%Y/%m/%d&quot;, &quot;%d-%m-%Y&quot;))</code></pre>
<pre><code>## [1] &quot;1999-12-05 UTC&quot; &quot;2008-09-05 UTC&quot; &quot;2000-08-09 UTC&quot; &quot;2019-10-25 UTC&quot;</code></pre>
<p>More useful functions:</p>
<pre class="r"><code># extract the year
year(dat)</code></pre>
<pre><code>## [1] 1999 2000 2005 2010</code></pre>
<pre class="r"><code># the month
month(dat)</code></pre>
<pre><code>## [1] 12  1  5  3</code></pre>
<pre class="r"><code>month(dat, label = TRUE) # as label</code></pre>
<pre><code>## [1] dic ene may mar
## 12 Levels: ene &lt; feb &lt; mar &lt; abr &lt; may &lt; jun &lt; jul &lt; ago &lt; sep &lt; ... &lt; dic</code></pre>
<pre class="r"><code># the day of the week
wday(dat)</code></pre>
<pre><code>## [1] 6 6 6 5</code></pre>
<pre class="r"><code>wday(dat, label = TRUE) # as label</code></pre>
<pre><code>## [1] vi\\. vi\\. vi\\. ju\\.
## Levels: do\\. &lt; lu\\. &lt; ma\\. &lt; mi\\. &lt; ju\\. &lt; vi\\. &lt; sá\\.</code></pre>
<pre class="r"><code># the hour
hour(dat_time)</code></pre>
<pre><code>## [1]  5 22</code></pre>
<pre class="r"><code># add 10 days
dat + days(10)</code></pre>
<pre><code>## [1] &quot;2000-01-10&quot; &quot;2000-01-17&quot; &quot;2005-05-30&quot; &quot;2010-04-04&quot;</code></pre>
<pre class="r"><code># add 1 month
dat + months(1)</code></pre>
<pre><code>## [1] &quot;2000-01-31&quot; &quot;2000-02-07&quot; &quot;2005-06-20&quot; &quot;2010-04-25&quot;</code></pre>
<p>Finally, the <code>make_date()</code> function is very useful to create dates from different date parts, such as the year, month, etc.</p>
<pre class="r"><code># create date from its elements, here with year and month
make_date(2000, 5)</code></pre>
<pre><code>## [1] &quot;2000-05-01&quot;</code></pre>
<pre class="r"><code># create date with time
make_datetime(2005, 5, 23, 5)</code></pre>
<pre><code>## [1] &quot;2005-05-23 05:00:00 UTC&quot;</code></pre>
<p>More details can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/lubridate.pdf">Cheat-Sheet</a> of <code>lubridate</code>.</p>
</div>
<div id="table-and-vector-manipulation" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Table and vector manipulation</h2>
<p>The <code>dplyr</code> and <code>tidyr</code> packages provide us with a data manipulation grammar, a set of useful verbs to solve common problems. The most important functions are:</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">mutate()</td>
<td align="left">add new variables or modify existing ones</td>
</tr>
<tr class="even">
<td align="left">select()</td>
<td align="left">select variables</td>
</tr>
<tr class="odd">
<td align="left">filter()</td>
<td align="left">filter</td>
</tr>
<tr class="even">
<td align="left">summarise()</td>
<td align="left">summarize/reduce</td>
</tr>
<tr class="odd">
<td align="left">arrange()</td>
<td align="left">sort</td>
</tr>
<tr class="even">
<td align="left">group_by()</td>
<td align="left">group</td>
</tr>
<tr class="odd">
<td align="left">rename()</td>
<td align="left">rename columns</td>
</tr>
</tbody>
</table>
<p>In case you haven’t done it before, we import the mobility data.</p>
<pre class="r"><code>google_mobility &lt;- read_csv(&quot;Global_Mobility_Report.csv&quot;)</code></pre>
<pre><code>## Rows: 516697 Columns: 13</code></pre>
<pre><code>## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr  (6): country_region_code, country_region, sub_region_1, sub_region_2, i...
## dbl  (6): retail_and_recreation_percent_change_from_baseline, grocery_and_ph...
## date (1): date</code></pre>
<pre><code>## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div id="select-and-rename" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Select and rename</h3>
<p>We can select or remove columns with the <code>select()</code> function, using the name or index of the column. To delete columns we make use of the negative sign. The <code>rename</code> function helps in renaming columns with either the same name or their index.</p>
<pre class="r"><code>residential_mobility &lt;- select(google_mobility, 
                               country_region_code:sub_region_1, 
                               date, 
                               residential_percent_change_from_baseline) %&gt;% 
                        rename(resi = 5)</code></pre>
</div>
<div id="filter-and-sort" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Filter and sort</h3>
<p>To filter data, we use <code>filter()</code> with logical operators (<code>|</code>, <code>==</code>, <code>&gt;</code>, etc) or functions that return a logical value (<code>str_detect()</code>, <code>is.na()</code> , etc.). The <code>arrange()</code> function sorts from least to greatest for one or multiple variables (with the negative sign <code>-</code> the order is reversed from greatest to least).</p>
<pre class="r"><code>filter(residential_mobility, 
       country_region_code == &quot;US&quot;)</code></pre>
<pre><code>## # A tibble: 304,648 x 5
##    country_region_code country_region sub_region_1 date        resi
##    &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;        &lt;date&gt;     &lt;dbl&gt;
##  1 US                  United States  &lt;NA&gt;         2020-02-15    -1
##  2 US                  United States  &lt;NA&gt;         2020-02-16    -1
##  3 US                  United States  &lt;NA&gt;         2020-02-17     5
##  4 US                  United States  &lt;NA&gt;         2020-02-18     1
##  5 US                  United States  &lt;NA&gt;         2020-02-19     0
##  6 US                  United States  &lt;NA&gt;         2020-02-20     1
##  7 US                  United States  &lt;NA&gt;         2020-02-21     0
##  8 US                  United States  &lt;NA&gt;         2020-02-22    -1
##  9 US                  United States  &lt;NA&gt;         2020-02-23    -1
## 10 US                  United States  &lt;NA&gt;         2020-02-24     0
## # ... with 304,638 more rows</code></pre>
<pre class="r"><code>filter(residential_mobility, 
       country_region_code == &quot;US&quot;, 
       sub_region_1 == &quot;New York&quot;)</code></pre>
<pre><code>## # A tibble: 7,068 x 5
##    country_region_code country_region sub_region_1 date        resi
##    &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;        &lt;date&gt;     &lt;dbl&gt;
##  1 US                  United States  New York     2020-02-15     0
##  2 US                  United States  New York     2020-02-16    -1
##  3 US                  United States  New York     2020-02-17     9
##  4 US                  United States  New York     2020-02-18     3
##  5 US                  United States  New York     2020-02-19     2
##  6 US                  United States  New York     2020-02-20     2
##  7 US                  United States  New York     2020-02-21     3
##  8 US                  United States  New York     2020-02-22    -1
##  9 US                  United States  New York     2020-02-23    -1
## 10 US                  United States  New York     2020-02-24     0
## # ... with 7,058 more rows</code></pre>
<pre class="r"><code>filter(residential_mobility, 
       resi &gt; 50) %&gt;% 
          arrange(-resi)</code></pre>
<pre><code>## # A tibble: 32 x 5
##    country_region_code country_region sub_region_1              date        resi
##    &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;                     &lt;date&gt;     &lt;dbl&gt;
##  1 KW                  Kuwait         Al Farwaniyah Governorate 2020-05-14    56
##  2 KW                  Kuwait         Al Farwaniyah Governorate 2020-05-21    55
##  3 SG                  Singapore      &lt;NA&gt;                      2020-05-01    55
##  4 KW                  Kuwait         Al Farwaniyah Governorate 2020-05-28    54
##  5 PE                  Peru           Metropolitan Municipalit~ 2020-04-10    54
##  6 EC                  Ecuador        Pichincha                 2020-03-27    53
##  7 KW                  Kuwait         Al Farwaniyah Governorate 2020-05-11    53
##  8 KW                  Kuwait         Al Farwaniyah Governorate 2020-05-13    53
##  9 KW                  Kuwait         Al Farwaniyah Governorate 2020-05-20    53
## 10 SG                  Singapore      &lt;NA&gt;                      2020-04-10    53
## # ... with 22 more rows</code></pre>
</div>
<div id="group-and-summarize" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Group and summarize</h3>
<p>Where do we find greater variability between regions in each country on April 1, 2020?</p>
<p>To answer this question, we first filter the data and then we group by the country column. When we use the <code>summarize()</code> function after grouping, it allows us to summarize by these groups. Moreover, combining <code>group_by()</code> with the <code>mutate()</code> function modifies columns in each group separately. In <code>summarize()</code> we calculate the maximum, minimum value and the difference between both extremes creating new columns.</p>
<pre class="r"><code>resi_variability &lt;- residential_mobility %&gt;% 
                        filter(date == ymd(&quot;2020-04-01&quot;),
                               !is.na(sub_region_1)) %&gt;% 
                          group_by(country_region) %&gt;% 
                           summarise(mx = max(resi, na.rm = TRUE), 
                                    min = min(resi, na.rm = TRUE),
                                    range = abs(mx)-abs(min))

arrange(resi_variability, -range)</code></pre>
<pre><code>## # A tibble: 94 x 4
##    country_region    mx   min range
##    &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Nigeria           43     6    37
##  2 United States     35     6    29
##  3 India             36    15    21
##  4 Malaysia          45    26    19
##  5 Philippines       40    21    19
##  6 Vietnam           28     9    19
##  7 Colombia          41    24    17
##  8 Ecuador           44    27    17
##  9 Argentina         35    19    16
## 10 Chile             30    14    16
## # ... with 84 more rows</code></pre>
</div>
<div id="join-tables" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Join tables</h3>
<p>How can we filter the data to get a subset of Europe?</p>
<p>To do this, we import a spatial dataset with the country code and a column of regions. Detailed explanations about the <code>sf</code> (<em>simple feature</em>) package, I’ll leave for another post.</p>
<pre class="r"><code>library(rnaturalearth) # package of spatial vectorial data

# world limits
wld &lt;- ne_countries(returnclass = &quot;sf&quot;)

# filter the countries with iso code and select the two columns of interest
wld &lt;- filter(wld, !is.na(iso_a2)) %&gt;% select(iso_a2, subregion)

# plot
plot(wld)</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Other <code>dplyr</code> functions allow us to join tables: <code>*_join ()</code>. Depending on which table (left or right) you want to join, the functions change: <code>left_join()</code>, <code>right_join()</code> or even <code>full_join()</code>. The <code>by</code> argument is not necessary as long as both tables have a column in common. However, in this case the variable names are different, so we use the following way: <code>c("country_region_code"="iso_a2")</code>. The <code>forcats</code> package of <code>tidyverse</code> has many useful functions for handling categorical variables (<code>factors</code>), variables that have a fixed and known set of possible values. All <code>forcats</code> functions have the prefix <code>fct_*</code>. For example, in this case we use <code>fct_reorder()</code> to reorder the country labels in order of the maximum based on the residential mobility records. Finally, we create a new column <code>"resi_real"</code> to change the reference value, the average or baseline, from 0 to 100.</p>
<pre class="r"><code>subset_europe &lt;- filter(residential_mobility, 
                        is.na(sub_region_1),
                        !is.na(resi)) %&gt;%
                 left_join(wld, by = c(&quot;country_region_code&quot;=&quot;iso_a2&quot;)) %&gt;% 
                 filter(subregion %in% c(&quot;Northern Europe&quot;,
                                         &quot;Southern Europe&quot;,
                                          &quot;Western Europe&quot;,
                                          &quot;Eastern Europe&quot;)) %&gt;%
                 mutate(resi_real = resi + 100,
                        region = fct_reorder(country_region, 
                                             resi, 
                                            .fun = &quot;max&quot;, 
                                            .desc = FALSE)) %&gt;% 
                select(-geometry, -sub_region_1)

str(subset_europe)</code></pre>
<pre><code>## tibble [3,988 x 7] (S3: tbl_df/tbl/data.frame)
##  $ country_region_code: chr [1:3988] &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; ...
##  $ country_region     : chr [1:3988] &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; ...
##  $ date               : Date[1:3988], format: &quot;2020-02-15&quot; &quot;2020-02-16&quot; ...
##  $ resi               : num [1:3988] -2 -2 0 0 1 0 1 -2 0 -1 ...
##  $ subregion          : chr [1:3988] &quot;Western Europe&quot; &quot;Western Europe&quot; &quot;Western Europe&quot; &quot;Western Europe&quot; ...
##  $ resi_real          : num [1:3988] 98 98 100 100 101 100 101 98 100 99 ...
##  $ region             : Factor w/ 35 levels &quot;Belarus&quot;,&quot;Ukraine&quot;,..: 18 18 18 18 18 18 18 18 18 18 ...</code></pre>
</div>
<div id="long-and-wide-tables" class="section level3" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Long and wide tables</h3>
<p>Before we go to create graphics with <code>ggplot2</code>, it is very common to modify the table between two main formats, long and wide. A table is tidy when 1) each variable is a column 2) each observation/case is a row and 3) each type of observational unit forms a table.</p>
<pre class="r"><code># subset
mobility_selection &lt;- select(subset_europe, country_region_code, date:resi)
mobility_selection</code></pre>
<pre><code>## # A tibble: 3,988 x 3
##    country_region_code date        resi
##    &lt;chr&gt;               &lt;date&gt;     &lt;dbl&gt;
##  1 AT                  2020-02-15    -2
##  2 AT                  2020-02-16    -2
##  3 AT                  2020-02-17     0
##  4 AT                  2020-02-18     0
##  5 AT                  2020-02-19     1
##  6 AT                  2020-02-20     0
##  7 AT                  2020-02-21     1
##  8 AT                  2020-02-22    -2
##  9 AT                  2020-02-23     0
## 10 AT                  2020-02-24    -1
## # ... with 3,978 more rows</code></pre>
<pre class="r"><code># wide table
mobi_wide &lt;- pivot_wider(mobility_selection, 
                         names_from = country_region_code,
                         values_from = resi)
mobi_wide</code></pre>
<pre><code>## # A tibble: 114 x 36
##    date          AT    BA    BE    BG    BY    CH    CZ    DE    DK    EE    ES
##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 2020-02-15    -2    -1    -1     0    -1    -1    -2    -1     0     0    -2
##  2 2020-02-16    -2    -1     1    -3     0    -1    -1     0     1     0    -2
##  3 2020-02-17     0    -1     0    -2     0     1     0     0     1     1    -1
##  4 2020-02-18     0    -1     0    -2     0     1     0     1     1     1     0
##  5 2020-02-19     1    -1     0    -1    -1     1     0     1     1     0    -1
##  6 2020-02-20     0    -1     0     0    -1     0     0     1     1     0    -1
##  7 2020-02-21     1    -2     0    -1    -1     1     0     2     1     1    -2
##  8 2020-02-22    -2    -1     0     0    -2    -2    -3     0     1     0    -2
##  9 2020-02-23     0    -1     0    -3    -1    -1     0     0     0    -2    -3
## 10 2020-02-24    -1    -1     4    -1     0     0     0     4     0    16     0
## # ... with 104 more rows, and 24 more variables: FI &lt;dbl&gt;, FR &lt;dbl&gt;, GB &lt;dbl&gt;,
## #   GR &lt;dbl&gt;, HR &lt;dbl&gt;, HU &lt;dbl&gt;, IE &lt;dbl&gt;, IT &lt;dbl&gt;, LT &lt;dbl&gt;, LU &lt;dbl&gt;,
## #   LV &lt;dbl&gt;, MD &lt;dbl&gt;, MK &lt;dbl&gt;, NL &lt;dbl&gt;, NO &lt;dbl&gt;, PL &lt;dbl&gt;, PT &lt;dbl&gt;,
## #   RO &lt;dbl&gt;, RS &lt;dbl&gt;, RU &lt;dbl&gt;, SE &lt;dbl&gt;, SI &lt;dbl&gt;, SK &lt;dbl&gt;, UA &lt;dbl&gt;</code></pre>
<pre class="r"><code># back to long table
pivot_longer(mobi_wide,
             2:36,
             names_to = &quot;country_code&quot;,
             values_to = &quot;resi&quot;)</code></pre>
<pre><code>## # A tibble: 3,990 x 3
##    date       country_code  resi
##    &lt;date&gt;     &lt;chr&gt;        &lt;dbl&gt;
##  1 2020-02-15 AT              -2
##  2 2020-02-15 BA              -1
##  3 2020-02-15 BE              -1
##  4 2020-02-15 BG               0
##  5 2020-02-15 BY              -1
##  6 2020-02-15 CH              -1
##  7 2020-02-15 CZ              -2
##  8 2020-02-15 DE              -1
##  9 2020-02-15 DK               0
## 10 2020-02-15 EE               0
## # ... with 3,980 more rows</code></pre>
<p>Another group of functions you should take a look at are: <code>separate()</code>, <code>case_when()</code>, <code>complete()</code>. More details can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">Cheat-Sheet</a> of <code>dplyr</code>.</p>
</div>
</div>
<div id="visualize-data" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Visualize data</h2>
<p><code>ggplot2</code> is a modern system for data visualization with a huge variety of options. Unlike the R Base graphic system, in <code>ggplot2</code> a different grammar is used. The grammar of graphics (gg) consists of the sum of several independent layers or objects that are combined using <code>+</code> to construct the final graph. <code>ggplot</code> differentiates between data, what is displayed and how it is displayed.</p>
<ul>
<li><p><em>data</em>: our dataset (<code>data.frame</code> or <code>tibble</code>)</p></li>
<li><p><em>aesthetics</em>: with the <code>aes()</code> function we indicate the variables that correspond to the x, y, z, … axes, or when it is intended to apply graphic parameters (color, size, shape) according to a variable. It is possible to include <code>aes()</code> in <code>ggplot()</code> or in the corresponding function to a geometry <code>geom_ *</code>.</p></li>
<li><p><em>geometries</em>: are <code>geom_ *</code> objects that indicate the geometry to be used, (eg: <code>geom_point()</code>, <code>geom_line()</code>, <code>geom_boxplot()</code>, etc.).</p></li>
<li><p><em>scales</em>: are objects of type <code>scales_ *</code> (eg, <code>scale_x_continous()</code>, <code>scale_colour_manual()</code>) to manipulate axes, define colors, etc.</p></li>
<li><p><em>statistics</em>: are <code>stat_ *</code> objects (eg, <code>stat_density()</code>) that allow to apply statistical transformations.</p></li>
</ul>
<p>More details can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf">Cheat-Sheet</a> of <code>ggplot2</code>. <code>ggplot</code> is constantly supplemented by extensions for geometries or other graphical options (see <a href="https://exts.ggplot2.tidyverse.org/ggiraph.html" class="uri">https://exts.ggplot2.tidyverse.org/ggiraph.html</a>), for graphical ideas have a look a the R Graph Gallery (<a href="https://www.r-graph-gallery.com/" class="uri">https://www.r-graph-gallery.com/</a>).</p>
<div id="line-and-scatter-plot" class="section level3" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Line and scatter plot</h3>
<p>We create a subset of our mobility data for residences and parks, filtering the records for Italian regions. In addition, we divide the mobility values in percentage by 100 to obtain the fraction, since <code>ggplot2</code> allows us to indicate the unit of percentage in the label argument (see last plot in this section).</p>
<pre class="r"><code># create subset
it &lt;- filter(google_mobility, 
             country_region == &quot;Italy&quot;, 
             is.na(sub_region_1)) %&gt;% 
      mutate(resi = residential_percent_change_from_baseline/100,   
             parks = parks_percent_change_from_baseline/100)


# line plot
ggplot(it, 
       aes(date, resi)) + 
  geom_line()</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-20-1.png" width="2100" /></p>
<pre class="r"><code># scatter plot
ggplot(it, 
       aes(parks, resi)) + 
  geom_point() +
  geom_smooth(method = &quot;lm&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-20-2.png" width="2100" /></p>
<p>To modify the axes, we use the different <code>scale_*</code> functions that we must adapt to the scales of measurement (date, discrete, continuous, etc.). The <code>labs()</code> function helps us define the axis, legend and plot titles. Finally, we add the style of the graph with <code>theme_light()</code> (others are <code>theme_bw()</code>, <code>theme_minimal()</code>, etc.). We could also make changes to all graphic elements through <code>theme()</code>.</p>
<pre class="r"><code># time serie plot
ggplot(it, 
       aes(date, resi)) + 
  geom_line(colour = &quot;#560A86&quot;, size = 0.8) +
  scale_x_date(date_breaks = &quot;10 days&quot;, 
               date_labels = &quot;%d %b&quot;) +
  scale_y_continuous(breaks = seq(-0.1, 1, 0.1), 
                     labels = scales::percent) +
  labs(x = &quot;&quot;, 
       y = &quot;Residential mobility&quot;,
       title = &quot;Mobility during COVID-19&quot;) +
  theme_light()</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-21-1.png" width="2100" /></p>
<pre class="r"><code># scatter plot
ggplot(it, 
       aes(parks, resi)) + 
  geom_point(alpha = .4, size = 2) +
  geom_smooth(method = &quot;lm&quot;) +
  scale_x_continuous(breaks = seq(-1, 1.4, 0.2), 
                     labels = scales::percent) +
  scale_y_continuous(breaks = seq(-1, 1, 0.1), 
                     labels = scales::percent) +
  labs(x = &quot;Park mobility&quot;, 
       y = &quot;Residential mobility&quot;,
       title = &quot;Mobility during COVID-19&quot;) +
  theme_light()</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-21-2.png" width="2100" /></p>
</div>
<div id="boxplot" class="section level3" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Boxplot</h3>
<p>We can visualize different aspects of the mobility with other geometries. Here we will create boxplots for each European country representing the variability of mobility between and within countries during the COVID-19 pandemic.</p>
<pre class="r"><code># subset
subset_europe_reg &lt;- filter(residential_mobility, 
                           !is.na(sub_region_1),
                           !is.na(resi)) %&gt;%
                     left_join(wld, by = c(&quot;country_region_code&quot;=&quot;iso_a2&quot;)) %&gt;% 
                     filter(subregion %in% c(&quot;Northern Europe&quot;,
                                         &quot;Southern Europe&quot;,
                                          &quot;Western Europe&quot;,
                                          &quot;Eastern Europe&quot;)) %&gt;% 
                     mutate(resi = resi/100, 
                            country_region = fct_reorder(country_region, resi))

# boxplot
ggplot(subset_europe_reg, 
       aes(country_region, resi, fill = subregion)) + 
  geom_boxplot() +
  scale_y_continuous(breaks = seq(-0.1, 1, 0.1), labels = scales::percent) +
  scale_fill_brewer(palette = &quot;Set1&quot;) +
  coord_flip() +
   labs(x = &quot;&quot;, 
       y = &quot;Residential mobility&quot;,
       title = &quot;Mobility during COVID-19&quot;, 
       fill = &quot;&quot;) +
  theme_minimal()</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-22-1.png" width="2100" /></p>
</div>
<div id="heatmap" class="section level3" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Heatmap</h3>
<p>To visualize the mobility trend of all European countries it is recommended to use a heatmap instead of a bundle of lines. Before building the graph, we will create a vector of Sundays for the x-axis labels in the observation period.</p>
<pre class="r"><code># sequence of dates
df &lt;- data.frame(d = seq(ymd(&quot;2020-02-15&quot;), ymd(&quot;2020-06-07&quot;), &quot;day&quot;))

# filter on Sundays 
sundays &lt;- df %&gt;% 
            mutate(wd = wday(d, week_start = 1)) %&gt;% 
             filter(wd == 7) %&gt;% 
              pull(d)</code></pre>
<p>To difference between European regions, we will use a color fill for the boxplots. We can set the color type with <code>scale_fill_*</code>, in this case, from the viridis scheme. In addition, the <code>guides()</code> function can modify the color bar of the legend. Finally, here we see the use of <code>theme()</code> with additional changes to <code>theme_minimal()</code>.</p>
<pre class="r"><code># headmap
ggplot(subset_europe, 
       aes(date, region, fill = resi_real)) +
  geom_tile() +
  scale_x_date(breaks = sundays,
               date_labels = &quot;%d %b&quot;) +
  scale_fill_viridis_c(option = &quot;A&quot;, 
                       breaks = c(91, 146),
                       labels = c(&quot;Less&quot;, &quot;More&quot;), 
                       direction = -1) +
  theme_minimal() +
  theme(legend.position = &quot;top&quot;, 
        title = element_text(size = 14),
        panel.grid.major.x = element_line(colour = &quot;white&quot;, linetype = &quot;dashed&quot;),
        panel.grid.minor.x = element_blank(),
        panel.grid.major.y = element_blank(),
        panel.ontop = TRUE,
        plot.margin = margin(r = 1, unit = &quot;cm&quot;)) +
  labs(y = &quot;&quot;, 
       x = &quot;&quot;, 
       fill = &quot;&quot;, 
       title = &quot;Mobility trends for places of residence&quot;,
       caption = &quot;Data: google.com/covid19/mobility/&quot;) +
  guides(fill = guide_colorbar(barwidth = 10, 
                               barheight = .5,
                               label.position = &quot;top&quot;, 
                               ticks = FALSE)) +
  coord_cartesian(expand = FALSE)</code></pre>
<p><img src="/post/en/2020-06-06-a-very-short-introduction-to-tidyverse/index.en_files/figure-html/unnamed-chunk-25-1.png" width="3675" /></p>
</div>
</div>
<div id="apply-functions-on-vectors-or-lists" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Apply functions on vectors or lists</h2>
<p>The <code>purrr</code> package contains a set of advanced functional programming functions for working with functions and vectors. The known <code>lapply()</code> family of R Base corresponds to the <code>map()</code> functions in this package. One of the biggest advantages is being able to reduce the use of loops (<code>for</code>, etc.).</p>
<pre class="r"><code># list of two vectors
vec_list &lt;- list(x = 1:10, y = 50:70)

# calculate the average for each one
map(vec_list, mean)</code></pre>
<pre><code>## $x
## [1] 5.5
## 
## $y
## [1] 60</code></pre>
<pre class="r"><code># change the output type map_* (dbl, chr, lgl, etc.)
map_dbl(vec_list, mean)</code></pre>
<pre><code>##    x    y 
##  5.5 60.0</code></pre>
<p>Finally, a more complex example. We calculate the correlation coefficient between residential and park mobility in all European countries. To get a tidy summary of a model or test we use the <code>tidy()</code> function of the <code>broom</code> package.</p>
<pre class="r"><code>library(broom) # tidy outputs

# custom function
cor_test &lt;- function(x, formula) { 
  
df &lt;- cor.test(as.formula(formula), data = x) %&gt;% tidy()

return(df)
  
}

# prepare the data
europe_reg &lt;- filter(google_mobility, 
                           !is.na(sub_region_1),
                           !is.na(residential_percent_change_from_baseline)) %&gt;%
                     left_join(wld, by = c(&quot;country_region_code&quot;=&quot;iso_a2&quot;)) %&gt;% 
                     filter(subregion %in% c(&quot;Northern Europe&quot;,
                                         &quot;Southern Europe&quot;,
                                          &quot;Western Europe&quot;,
                                          &quot;Eastern Europe&quot;))

# apply the function to each country creating a list
cor_mobility &lt;- europe_reg %&gt;%
                 split(.$country_region_code) %&gt;% 
                   map(cor_test, formula = &quot;~ residential_percent_change_from_baseline + parks_percent_change_from_baseline&quot;)  

cor_mobility[1:5]</code></pre>
<pre><code>## $AT
## # A tibble: 1 x 8
##   estimate statistic  p.value parameter conf.low conf.high method    alternative
##      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      
## 1   -0.360     -12.3 2.68e-32      1009   -0.413    -0.305 Pearson&#39;~ two.sided  
## 
## $BE
## # A tibble: 1 x 8
##   estimate statistic  p.value parameter conf.low conf.high method    alternative
##      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      
## 1   -0.312     -6.06  3.67e-9       340   -0.405    -0.213 Pearson&#39;~ two.sided  
## 
## $BG
## # A tibble: 1 x 8
##   estimate statistic   p.value parameter conf.low conf.high method   alternative
##      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      
## 1   -0.677     -37.8 1.47e-227      1694   -0.702    -0.650 Pearson~ two.sided  
## 
## $CH
## # A tibble: 1 x 8
##   estimate statistic p.value parameter conf.low conf.high method     alternative
##      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      
## 1  -0.0786     -2.91 0.00370      1360   -0.131   -0.0256 Pearson&#39;s~ two.sided  
## 
## $CZ
## # A tibble: 1 x 8
##   estimate statistic  p.value parameter conf.low conf.high method    alternative
##      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      
## 1  -0.0837     -3.35 0.000824      1593   -0.132   -0.0347 Pearson&#39;~ two.sided</code></pre>
<p>As we’ve seen before, there are subfunctions of <code>map_*</code> to get an object of another class instead of a list, here for a bind <code>data.frame</code>.</p>
<pre class="r"><code>cor_mobility &lt;- europe_reg %&gt;%
                  split(.$country_region_code) %&gt;% 
                     map_df(cor_test, 
                            formula = &quot;~ residential_percent_change_from_baseline + parks_percent_change_from_baseline&quot;, 
                            .id = &quot;country_code&quot;)

arrange(cor_mobility, estimate)</code></pre>
<pre><code>## # A tibble: 27 x 9
##    country_code estimate statistic   p.value parameter conf.low conf.high method
##    &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt; 
##  1 IT             -0.831    -71.0  0              2250   -0.844    -0.818 Pears~
##  2 ES             -0.825    -65.4  0              2005   -0.839    -0.811 Pears~
##  3 PT             -0.729    -46.9  2.12e-321      1938   -0.749    -0.707 Pears~
##  4 FR             -0.698    -37.4  3.29e-216      1474   -0.723    -0.671 Pears~
##  5 GR             -0.692    -27.0  1.03e-114       796   -0.726    -0.654 Pears~
##  6 BG             -0.677    -37.8  1.47e-227      1694   -0.702    -0.650 Pears~
##  7 RO             -0.640    -56.0  0              4517   -0.657    -0.623 Pears~
##  8 SI             -0.627    -11.4  1.98e- 23       200   -0.704    -0.535 Pears~
##  9 HR             -0.579    -21.9  9.32e- 87       954   -0.620    -0.536 Pears~
## 10 LV             -0.544     -6.87 3.84e- 10       112   -0.662    -0.401 Pears~
## # ... with 17 more rows, and 1 more variable: alternative &lt;chr&gt;</code></pre>
<p>Other practical examples here in this <a href="https://dominicroye.github.io/en/2019/import-excel-sheets-with-r/">post</a> or this <a href="https://dominicroye.github.io/en/2019/tidy-correlation-tests-in-r/">other</a>. More details can be found in the <a href="https://github.com/rstudio/cheatsheets/raw/master/purrr.pdf">Cheat-Sheet</a> of <code>purrr</code>.</p>
</div>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/en/tag/introduction/">introduction</a>
  
  <a class="badge badge-light" href="/en/tag/visualization/">visualization</a>
  
  <a class="badge badge-light" href="/en/tag/manipulation/">manipulation</a>
  
  <a class="badge badge-light" href="/en/tag/data/">data</a>
  
  <a class="badge badge-light" href="/en/tag/covid-19/">COVID-19</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/&amp;text=A%20very%20short%20introduction%20to%20Tidyverse" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/&amp;t=A%20very%20short%20introduction%20to%20Tidyverse" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=A%20very%20short%20introduction%20to%20Tidyverse&amp;body=https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/&amp;title=A%20very%20short%20introduction%20to%20Tidyverse" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=A%20very%20short%20introduction%20to%20Tidyverse%20https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://dominicroye.github.io/en/2020/a-very-short-introduction-to-tidyverse/&amp;title=A%20very%20short%20introduction%20to%20Tidyverse" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://dominicroye.github.io/"><img class="avatar mr-3 avatar-circle" src="/en/author/dr.-dominic-roye/avatar_hu930bec32484cd86675af8880de95caa2_508993_270x270_fill_q75_lanczos_center.jpg" alt="Dr. Dominic Royé"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://dominicroye.github.io/">Dr. Dominic Royé</a></h5>
      <h6 class="card-subtitle">Senior postdoctoral researcher</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/dr_xeo" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/en/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.es/citations?user=EoYa8jUAAAAJ&amp;hl=es" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/dominicroye" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/dominicroye/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://www.researchgate.net/profile/Dominic_Roye" target="_blank" rel="noopener">
        <i class="ai ai-researchgate"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>
















  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/en/2018/how-to-create-warming-stripes-in-r/">How to create &#39;Warming Stripes&#39; in R</a></li>
      
      <li><a href="/en/2018/the-pie-chart/">the pie chart</a></li>
      
      <li><a href="/en/2021/climate-circles/">Climate circles</a></li>
      
      <li><a href="/en/2020/geographic-distance/">Geographic distance</a></li>
      
      <li><a href="/en/2019/visualize-urban-growth/">Visualize urban growth</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  

  
  <p class="powered-by">
    © 2018-2022 Dominic Royé. All rights reserved
  </p>
  

  
  






  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    <script src="/js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js"></script>

    
    
    
      
      
        <script src="https://cdn.jsdelivr.net/gh/desandro/imagesloaded@v4.1.4/imagesloaded.pkgd.min.js" integrity="sha512-S5PZ9GxJZO16tT9r3WJp/Safn31eu8uWrzglMahDT4dsmgqWonRY9grk3j+3tfuPr9WJNsfooOR7Gi7HL5W2jw==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/metafizzy/isotope@v3.0.6/dist/isotope.pkgd.min.js" integrity="sha512-Zq2BOxyhvnRFXu0+WE6ojpZLOU2jdnqbrM1hmVdGzyeCa1DgM3X5Q4A/Is9xA1IkbUeDd7755dNNI/PzSf2Pew==" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/r.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    
      <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    <script src="/en/js/wowchemy.min.50d3bf3df0c53b31631bb48a62b35f92.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
