<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dominic Royé on Dominic Royé</title>
    <link>/en/</link>
    <description>Recent content in Dominic Royé on Dominic Royé</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>&amp;copy; 2018-2019 Dominic Royé. All rights reserved.</copyright>
    <lastBuildDate>Sun, 15 Oct 2017 00:00:00 +0100</lastBuildDate>
    <atom:link href="/en/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Os tempos e o clima de Galicia</title>
      <link>/en/publication/os_tempos_2019/</link>
      <pubDate>Thu, 13 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>/en/publication/os_tempos_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Tidy correlation tests in R</title>
      <link>/en/2019/tidy-correlation-tests-in-r/</link>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>/en/2019/tidy-correlation-tests-in-r/</guid>
      <description>


&lt;p&gt;When we try to estimate the correlation coefficient between multiple variables, the task is more complicated in order to obtain a simple and tidy result. A simple solution is to use the &lt;code&gt;tidy()&lt;/code&gt; function from the &lt;em&gt;{broom}&lt;/em&gt; package. In this post we are going to estimate the correlation coefficients between the annual precipitation of several Spanish cities and climate teleconnections indices: &lt;a href=&#34;/files/teleconnections_indices.zip&#34;&gt;download&lt;/a&gt;. The data of the teleconnections are preprocessed, but can be downloaded directly from &lt;a href=&#34;https://crudata.uea.ac.uk/cru/data/pci.htm&#34;&gt;crudata.uea.ac.uk&lt;/a&gt;. The daily precipitation data comes from &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&#34;packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Packages&lt;/h2&gt;
&lt;p&gt;In this post we will use the following packages:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Package&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;tidyverse&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Collection of packages (visualization, manipulation): ggplot2, dplyr, purrr, etc.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;broom&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Convert results of statistical functions (lm, t.test, cor.test, etc.) into tidy tables&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;fs&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Provides a cross-platform, uniform interface to file system operations&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;lubridate&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Easy manipulation of dates and times&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install the packages if necessary
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;broom&amp;quot;)) install.packages(&amp;quot;broom&amp;quot;)
if(!require(&amp;quot;fs&amp;quot;)) install.packages(&amp;quot;fs&amp;quot;)
if(!require(&amp;quot;lubridate&amp;quot;)) install.packages(&amp;quot;lubridate&amp;quot;)

#load packages
library(tidyverse)
library(broom)
library(fs)
library(lubridate)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;import-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Import data&lt;/h2&gt;
&lt;p&gt;First we have to import the daily precipitation of the selected weather stations.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Create a vector with all precipitation files using the function &lt;code&gt;dir_ls()&lt;/code&gt; of the &lt;em&gt;{fs}&lt;/em&gt; package.&lt;/li&gt;
&lt;li&gt;Import the data using the &lt;code&gt;map_df()&lt;/code&gt; function of the &lt;em&gt;{purrr}&lt;/em&gt; package that applies another function to a vector or list, and joins them together in a single &lt;em&gt;data.frame&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;Select the columns that interest us, b) Convert the date string into a date object using the &lt;code&gt;ymd()&lt;/code&gt; function of the &lt;em&gt;{lubridate}&lt;/em&gt; package, c) Create a new column &lt;em&gt;yr&lt;/em&gt; with the years, d) Divide the precipitation values by 10 and reclassify absent values -9999 by NA, e) Finally, reclassify the ID of each weather station creating a factor with new labels.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;More details about the use of the &lt;code&gt;dir_ls()&lt;/code&gt; and &lt;code&gt;map_df()&lt;/code&gt; functions can be found in this previous &lt;a href=&#34;https://dominicroye.github.io/en/2019/import-excel-sheets-%20with-r%20/&#34;&gt;post&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#precipitation files
files &amp;lt;- dir_ls(regexp = &amp;quot;txt&amp;quot;)
files&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## RR_STAID001393.txt RR_STAID001394.txt RR_STAID002969.txt 
## RR_STAID003946.txt RR_STAID003969.txt&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#import all files and join them together
pr &amp;lt;- files %&amp;gt;% map_df(read_csv, skip = 20)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 133,343 x 5
##    STAID SOUID     DATE    RR  Q_RR
##    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1  1393 20611 19470301     0     0
##  2  1393 20611 19470302     5     0
##  3  1393 20611 19470303     0     0
##  4  1393 20611 19470304    33     0
##  5  1393 20611 19470305    15     0
##  6  1393 20611 19470306     0     0
##  7  1393 20611 19470307    85     0
##  8  1393 20611 19470308     3     0
##  9  1393 20611 19470309     0     0
## 10  1393 20611 19470310     0     0
## # ... with 133,333 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#create levels for the factor 
id &amp;lt;- unique(pr$STAID)

#the corresponding labels
lab &amp;lt;- c(&amp;quot;Bilbao&amp;quot;, &amp;quot;Santiago&amp;quot;, &amp;quot;Barcelona&amp;quot;, &amp;quot;Madrid&amp;quot;, &amp;quot;Valencia&amp;quot;)

#first changes
pr &amp;lt;- select(pr, STAID, DATE, RR) %&amp;gt;% 
        mutate(DATE = ymd(DATE), 
               RR = ifelse(RR == -9999, NA, RR/10), 
               STAID = factor(STAID, id, lab), 
               yr = year(DATE)) 
pr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 133,343 x 4
##    STAID  DATE          RR    yr
##    &amp;lt;fct&amp;gt;  &amp;lt;date&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Bilbao 1947-03-01   0    1947
##  2 Bilbao 1947-03-02   0.5  1947
##  3 Bilbao 1947-03-03   0    1947
##  4 Bilbao 1947-03-04   3.3  1947
##  5 Bilbao 1947-03-05   1.5  1947
##  6 Bilbao 1947-03-06   0    1947
##  7 Bilbao 1947-03-07   8.5  1947
##  8 Bilbao 1947-03-08   0.3  1947
##  9 Bilbao 1947-03-09   0    1947
## 10 Bilbao 1947-03-10   0    1947
## # ... with 133,333 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We still need to filter and calculate the annual amount of precipitation. Actually, it is not correct to sum up precipitation without taking into account that there are missing values, but it should be enough for this practice. Then, we change the table format with the &lt;code&gt;spread()&lt;/code&gt; function, passing from a long to a wide table, that is, we want to obtain one column per weather station.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pr_yr &amp;lt;- filter(pr, DATE &amp;gt;= &amp;quot;1950-01-01&amp;quot;, DATE &amp;lt; &amp;quot;2018-01-01&amp;quot;) %&amp;gt;%
           group_by(STAID, yr)%&amp;gt;%
             summarise(pr = sum(RR, na.rm = TRUE))
pr_yr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 324 x 3
## # Groups:   STAID [5]
##    STAID     yr    pr
##    &amp;lt;fct&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Bilbao  1950 1342 
##  2 Bilbao  1951 1306.
##  3 Bilbao  1952 1355.
##  4 Bilbao  1953 1372.
##  5 Bilbao  1954 1428.
##  6 Bilbao  1955 1062.
##  7 Bilbao  1956 1254.
##  8 Bilbao  1957  968.
##  9 Bilbao  1958 1272.
## 10 Bilbao  1959 1450.
## # ... with 314 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pr_yr &amp;lt;- spread(pr_yr, STAID, pr)
pr_yr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 68 x 6
##       yr Bilbao Santiago Barcelona Madrid Valencia
##    &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
##  1  1950  1342     1800.      345     NA        NA
##  2  1951  1306.    2344.     1072.   798.       NA
##  3  1952  1355.    1973.      415.   524.       NA
##  4  1953  1372.     973.      683.   365.       NA
##  5  1954  1428.    1348.      581.   246.       NA
##  6  1955  1062.    1769.      530.   473.       NA
##  7  1956  1254.    1533.      695.   480.       NA
##  8  1957   968.    1599.      635.   424.       NA
##  9  1958  1272.    2658.      479.   482.       NA
## 10  1959  1450.    2847.     1006    665.       NA
## # ... with 58 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The next step is to import the climate teleconnection indices.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#teleconnections
telecon &amp;lt;- read_csv(&amp;quot;teleconnections_indices.csv&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Parsed with column specification:
## cols(
##   yr = col_double(),
##   NAO = col_double(),
##   WeMO = col_double(),
##   EA = col_double(),
##   `POL-EUAS` = col_double(),
##   `EATL/WRUS` = col_double(),
##   MO = col_double(),
##   SCAND = col_double(),
##   AO = col_double()
## )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;telecon&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 68 x 9
##       yr   NAO   WeMO     EA `POL-EUAS` `EATL/WRUS`    MO    SCAND       AO
##    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;      &amp;lt;dbl&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
##  1  1950  0.49  0.555 -0.332     0.0217     -0.0567 0.335  0.301   -1.99e-1
##  2  1951 -0.07  0.379 -0.372     0.402      -0.419  0.149 -0.00667 -3.65e-1
##  3  1952 -0.37  0.693 -0.688    -0.0117     -0.711  0.282  0.0642  -6.75e-1
##  4  1953  0.4  -0.213 -0.727    -0.0567     -0.0508 0.216  0.0233  -1.64e-2
##  5  1954  0.51  1.20  -0.912     0.142      -0.318  0.386  0.458   -5.83e-4
##  6  1955 -0.64  0.138 -0.824    -0.0267      0.154  0.134  0.0392  -3.62e-1
##  7  1956  0.17  0.617 -1.29     -0.197       0.0617 0.256  0.302   -1.63e-1
##  8  1957 -0.02  0.321 -0.952    -0.638      -0.167  0.322 -0.134   -3.42e-1
##  9  1958  0.12  0.941 -0.243     0.138       0.661  0.296  0.279   -8.68e-1
## 10  1959  0.49 -0.055 -0.23     -0.0142      0.631  0.316  0.725   -7.62e-2
## # ... with 58 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally we need to join both tables by year.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_all &amp;lt;- left_join(pr_yr, telecon, by = &amp;quot;yr&amp;quot;)
data_all&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 68 x 14
##       yr Bilbao Santiago Barcelona Madrid Valencia   NAO   WeMO     EA
##    &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
##  1  1950  1342     1800.      345     NA        NA  0.49  0.555 -0.332
##  2  1951  1306.    2344.     1072.   798.       NA -0.07  0.379 -0.372
##  3  1952  1355.    1973.      415.   524.       NA -0.37  0.693 -0.688
##  4  1953  1372.     973.      683.   365.       NA  0.4  -0.213 -0.727
##  5  1954  1428.    1348.      581.   246.       NA  0.51  1.20  -0.912
##  6  1955  1062.    1769.      530.   473.       NA -0.64  0.138 -0.824
##  7  1956  1254.    1533.      695.   480.       NA  0.17  0.617 -1.29 
##  8  1957   968.    1599.      635.   424.       NA -0.02  0.321 -0.952
##  9  1958  1272.    2658.      479.   482.       NA  0.12  0.941 -0.243
## 10  1959  1450.    2847.     1006    665.       NA  0.49 -0.055 -0.23 
## # ... with 58 more rows, and 5 more variables: `POL-EUAS` &amp;lt;dbl&amp;gt;,
## #   `EATL/WRUS` &amp;lt;dbl&amp;gt;, MO &amp;lt;dbl&amp;gt;, SCAND &amp;lt;dbl&amp;gt;, AO &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;correlation-test&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Correlation test&lt;/h2&gt;
&lt;p&gt;A correlation test between paired samples can be done with the &lt;code&gt;cor.test()&lt;/code&gt; function of R Base. In this case between the annual precipitation of Bilbao and the NAO index.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cor_nao_bil &amp;lt;- cor.test(data_all$Bilbao, data_all$NAO,
                        method = &amp;quot;spearman&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in cor.test.default(data_all$Bilbao, data_all$NAO, method =
## &amp;quot;spearman&amp;quot;): Cannot compute exact p-value with ties&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cor_nao_bil&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##  Spearman&amp;#39;s rank correlation rho
## 
## data:  data_all$Bilbao and data_all$NAO
## S = 44372, p-value = 0.2126
## alternative hypothesis: true rho is not equal to 0
## sample estimates:
##       rho 
## 0.1531149&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(cor_nao_bil)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 8
##  $ statistic  : Named num 44372
##   ..- attr(*, &amp;quot;names&amp;quot;)= chr &amp;quot;S&amp;quot;
##  $ parameter  : NULL
##  $ p.value    : num 0.213
##  $ estimate   : Named num 0.153
##   ..- attr(*, &amp;quot;names&amp;quot;)= chr &amp;quot;rho&amp;quot;
##  $ null.value : Named num 0
##   ..- attr(*, &amp;quot;names&amp;quot;)= chr &amp;quot;rho&amp;quot;
##  $ alternative: chr &amp;quot;two.sided&amp;quot;
##  $ method     : chr &amp;quot;Spearman&amp;#39;s rank correlation rho&amp;quot;
##  $ data.name  : chr &amp;quot;data_all$Bilbao and data_all$NAO&amp;quot;
##  - attr(*, &amp;quot;class&amp;quot;)= chr &amp;quot;htest&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We see that the result is in an unmanageable and untidy format. It is a console summary of the correlation with all the statistical parameters necessary to get a conclusion about the relationship. The orginal structure is a list of vectors. However, the &lt;code&gt;tidy()&lt;/code&gt; function of the &lt;em&gt;{broom}&lt;/em&gt; package allows us to convert the result into a table format.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tidy(cor_nao_bil)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 5
##   estimate statistic p.value method                          alternative
##      &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;                           &amp;lt;chr&amp;gt;      
## 1    0.153    44372.   0.213 Spearman&amp;#39;s rank correlation rho two.sided&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;apply-the-correlation-test-to-multiple-variables&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Apply the correlation test to multiple variables&lt;/h2&gt;
&lt;p&gt;The objective is to apply the correlation test to all weather stations and climate teleconnection indices.&lt;/p&gt;
&lt;p&gt;First, we must pass the table to the long format, that is, create a column/variable for the city and for the value of the corresponding precipitation. Then we repeat the same for the teleconnections indices.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data &amp;lt;- gather(data_all, city, pr, Bilbao:Valencia)%&amp;gt;%
                     gather(telecon, index, NAO:AO)
data&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2,720 x 5
##       yr city      pr telecon index
##    &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;dbl&amp;gt;
##  1  1950 Bilbao 1342  NAO      0.49
##  2  1951 Bilbao 1306. NAO     -0.07
##  3  1952 Bilbao 1355. NAO     -0.37
##  4  1953 Bilbao 1372. NAO      0.4 
##  5  1954 Bilbao 1428. NAO      0.51
##  6  1955 Bilbao 1062. NAO     -0.64
##  7  1956 Bilbao 1254. NAO      0.17
##  8  1957 Bilbao  968. NAO     -0.02
##  9  1958 Bilbao 1272. NAO      0.12
## 10  1959 Bilbao 1450. NAO      0.49
## # ... with 2,710 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To apply the test to all cities, we need the corresponding groupings. Therefore, we use the &lt;code&gt;group_by()&lt;/code&gt; function for indicating the two groups: &lt;em&gt;city&lt;/em&gt; and &lt;em&gt;telecon&lt;/em&gt;. In addition, we apply the &lt;code&gt;nest()&lt;/code&gt; function of the &lt;em&gt;{tidyr}&lt;/em&gt; package (&lt;em&gt;{tidyverse}&lt;/em&gt; collection) with the aim of creating lists of tables nested per row. In other words, in each row of each city and teleconnection index we will have a new table that contains the year, the precipitation value and the value of each teleconection, correspondingly.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_nest &amp;lt;- group_by(data, city, telecon) %&amp;gt;% nest()
data_nest&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 3
##    city      telecon data             
##    &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;   &amp;lt;list&amp;gt;           
##  1 Bilbao    NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  2 Santiago  NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  3 Barcelona NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  4 Madrid    NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  5 Valencia  NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  6 Bilbao    WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
##  7 Santiago  WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
##  8 Barcelona WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
##  9 Madrid    WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
## 10 Valencia  WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
## # ... with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(slice(data_nest, 1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    1 obs. of  3 variables:
##  $ city   : chr &amp;quot;Bilbao&amp;quot;
##  $ telecon: chr &amp;quot;NAO&amp;quot;
##  $ data   :List of 1
##   ..$ :Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 68 obs. of  3 variables:
##   .. ..$ yr   : num  1950 1951 1952 1953 1954 ...
##   .. ..$ pr   : num  1342 1306 1355 1372 1428 ...
##   .. ..$ index: num  0.49 -0.07 -0.37 0.4 0.51 -0.64 0.17 -0.02 0.12 0.49 ...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The next step is to create a function, in which we define the correlation test and pass it to the clean format using the &lt;code&gt;tidy()&lt;/code&gt; function, which we apply to each groupings.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cor_fun &amp;lt;- function(df) cor.test(df$pr, df$index, method = &amp;quot;spearman&amp;quot;) %&amp;gt;% tidy()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we only have to apply our function to the column that contains the tables for each combination between city and teleconnection. To do this, we use the &lt;code&gt;map()&lt;/code&gt; function that applies another function to a vector or list. What we do is create a new column that contains the result, a statistical summary table, for each combination.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_nest &amp;lt;- mutate(data_nest, model = map(data, cor_fun))
data_nest&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 4
##    city      telecon data              model           
##    &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;   &amp;lt;list&amp;gt;            &amp;lt;list&amp;gt;          
##  1 Bilbao    NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  2 Santiago  NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  3 Barcelona NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  4 Madrid    NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  5 Valencia  NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  6 Bilbao    WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  7 Santiago  WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  8 Barcelona WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  9 Madrid    WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
## 10 Valencia  WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
## # ... with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(slice(data_nest, 1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    1 obs. of  4 variables:
##  $ city   : chr &amp;quot;Bilbao&amp;quot;
##  $ telecon: chr &amp;quot;NAO&amp;quot;
##  $ data   :List of 1
##   ..$ :Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 68 obs. of  3 variables:
##   .. ..$ yr   : num  1950 1951 1952 1953 1954 ...
##   .. ..$ pr   : num  1342 1306 1355 1372 1428 ...
##   .. ..$ index: num  0.49 -0.07 -0.37 0.4 0.51 -0.64 0.17 -0.02 0.12 0.49 ...
##  $ model  :List of 1
##   ..$ :Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 1 obs. of  5 variables:
##   .. ..$ estimate   : num 0.153
##   .. ..$ statistic  : num 44372
##   .. ..$ p.value    : num 0.213
##   .. ..$ method     : chr &amp;quot;Spearman&amp;#39;s rank correlation rho&amp;quot;
##   .. ..$ alternative: chr &amp;quot;two.sided&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;How can we undo the list of tables in each row of our table?&lt;/p&gt;
&lt;p&gt;First we eliminate the column with the data and then simply we can apply the &lt;code&gt;unnest()&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;corr_pr &amp;lt;- select(data_nest, -data) %&amp;gt;% unnest()
corr_pr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 7
##    city    telecon estimate statistic  p.value method           alternative
##    &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;            &amp;lt;chr&amp;gt;      
##  1 Bilbao  NAO       0.153     44372. 0.213    Spearman&amp;#39;s rank~ two.sided  
##  2 Santia~ NAO      -0.181     61902. 0.139    Spearman&amp;#39;s rank~ two.sided  
##  3 Barcel~ NAO      -0.0203    53460. 0.869    Spearman&amp;#39;s rank~ two.sided  
##  4 Madrid  NAO      -0.291     64692. 0.0169   Spearman&amp;#39;s rank~ two.sided  
##  5 Valenc~ NAO      -0.113     27600. 0.422    Spearman&amp;#39;s rank~ two.sided  
##  6 Bilbao  WeMO      0.404     31242. 0.000706 Spearman&amp;#39;s rank~ two.sided  
##  7 Santia~ WeMO      0.332     35014. 0.00594  Spearman&amp;#39;s rank~ two.sided  
##  8 Barcel~ WeMO      0.0292    50862  0.813    Spearman&amp;#39;s rank~ two.sided  
##  9 Madrid  WeMO      0.109     44660  0.380    Spearman&amp;#39;s rank~ two.sided  
## 10 Valenc~ WeMO     -0.252     31056. 0.0688   Spearman&amp;#39;s rank~ two.sided  
## # ... with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The result is a table in which we can see the correlations and their statistical significance for each city and teleconnection index.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;heatmap-of-the-results&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Heatmap of the results&lt;/h2&gt;
&lt;p&gt;Finally, we make a heatmap of the obtained result. But, previously we create a column that indicates whether the correlation is significant with p-value less than 0.05.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;corr_pr &amp;lt;- mutate(corr_pr, sig = ifelse(p.value &amp;lt;0.05, &amp;quot;Sig.&amp;quot;, &amp;quot;Non Sig.&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot()+
  geom_tile(data = corr_pr,
            aes(city, telecon, fill = estimate),
            size = 1,
            colour = &amp;quot;white&amp;quot;)+
  geom_tile(data = filter(corr_pr, sig == &amp;quot;Sig.&amp;quot;),
            aes(city, telecon),
            size = 1,
            colour = &amp;quot;black&amp;quot;,
            fill = &amp;quot;transparent&amp;quot;)+
  geom_text(data = corr_pr,
            aes(city, telecon, label = round(estimate, 2),
            fontface = ifelse(sig == &amp;quot;Sig.&amp;quot;, &amp;quot;bold&amp;quot;, &amp;quot;plain&amp;quot;)))+
  scale_fill_gradient2(breaks = seq(-1, 1, 0.2))+
  labs(x = &amp;quot;&amp;quot;, y = &amp;quot;&amp;quot;, fill = &amp;quot;&amp;quot;, p.value = &amp;quot;&amp;quot;)+
  theme_minimal()+
  theme(panel.grid.major = element_blank(),
        panel.border = element_blank(),
        panel.background = element_blank(),
        axis.ticks = element_blank())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-04-17-tidy-correlation-tests-in-r/index.en_files/figure-html/unnamed-chunk-15-1.png&#34; width=&#34;2100&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>synoptReg: An R package for computing a synoptic climate classification and a spatial regionalization of environmental data</title>
      <link>/en/publication/synoptreg_2019/</link>
      <pubDate>Mon, 15 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>/en/publication/synoptreg_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>A time series analysis of the relationship between Apparent Temperature, Air Pollutants and Ischemic Stroke in Madrid, Spain</title>
      <link>/en/publication/ictus_madrid_2019/</link>
      <pubDate>Mon, 01 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>/en/publication/ictus_madrid_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Import Excel sheets with R</title>
      <link>/en/2019/import-excel-sheets-with-r/</link>
      <pubDate>Sun, 10 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>/en/2019/import-excel-sheets-with-r/</guid>
      <description>


&lt;p&gt;We usually work with different data sources, and sometimes we can find tables distributed over several Excel sheets. In this post we are going to import the average daily temperature of Madrid and Berlin which is found in two Excel files with sheets for each year between 2000 and 2005: &lt;a href=&#34;/files/Data_Excel.zip&#34;&gt;download&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&#34;packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Packages&lt;/h2&gt;
&lt;p&gt;In this post we will use the following packages:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Packages&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;tidyverse&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Collection of packages (visualization, manipulation): ggplot2, dplyr, purrr, etc.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;fs&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Provides a cross-platform, uniform interface to file system operations&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;readxl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Import Excel files&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install the packages if necessary
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;fs&amp;quot;)) install.packages(&amp;quot;fs&amp;quot;)
if(!require(&amp;quot;readxl&amp;quot;)) install.packages(&amp;quot;readxl&amp;quot;)


#load packages
library(tidyverse)
library(fs)
library(readxl)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;By default, the &lt;code&gt;read_excel()&lt;/code&gt; function imports the first sheet. To import a different sheet it is necessary to indicate the number or name with the argument &lt;em&gt;sheet&lt;/em&gt; (second argument).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#import first sheet
read_excel(&amp;quot;madrid_temp.xlsx&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 366 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   5.4  2000
##  2 2000-01-02 00:00:00   5    2000
##  3 2000-01-03 00:00:00   3.5  2000
##  4 2000-01-04 00:00:00   4.3  2000
##  5 2000-01-05 00:00:00   0.6  2000
##  6 2000-01-06 00:00:00   3.8  2000
##  7 2000-01-07 00:00:00   6.2  2000
##  8 2000-01-08 00:00:00   5.4  2000
##  9 2000-01-09 00:00:00   5.5  2000
## 10 2000-01-10 00:00:00   4.8  2000
## # ... with 356 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#import third sheet
read_excel(&amp;quot;madrid_temp.xlsx&amp;quot;, 3)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 365 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2002-01-01 00:00:00   8.7  2002
##  2 2002-01-02 00:00:00   7.4  2002
##  3 2002-01-03 00:00:00   8.5  2002
##  4 2002-01-04 00:00:00   9.2  2002
##  5 2002-01-05 00:00:00   9.3  2002
##  6 2002-01-06 00:00:00   7.3  2002
##  7 2002-01-07 00:00:00   5.4  2002
##  8 2002-01-08 00:00:00   5.6  2002
##  9 2002-01-09 00:00:00   6.8  2002
## 10 2002-01-10 00:00:00   6.1  2002
## # ... with 355 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;excel_sheets()&lt;/code&gt; function can extract the names of the sheets.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

path %&amp;gt;%
  excel_sheets()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2000&amp;quot; &amp;quot;2001&amp;quot; &amp;quot;2002&amp;quot; &amp;quot;2003&amp;quot; &amp;quot;2004&amp;quot; &amp;quot;2005&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The results are the sheet names and we find the years from 2000 to 2005. The most important function to read multiple sheets is &lt;code&gt;map()&lt;/code&gt; of the &lt;em&gt;{purrr}&lt;/em&gt; package, which is part of the &lt;em&gt;{tidyverse]&lt;/em&gt; collection. &lt;code&gt;map()&lt;/code&gt; allows you to apply a function to each element of a vector or list.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

mad &amp;lt;- path %&amp;gt;%
        excel_sheets() %&amp;gt;%
        set_names() %&amp;gt;%
       map(read_excel,
           path = path)
        
str(mad)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 6
##  $ 2000:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    366 obs. of  3 variables:
##   ..$ date: POSIXct[1:366], format: &amp;quot;2000-01-01&amp;quot; ...
##   ..$ ta  : num [1:366] 5.4 5 3.5 4.3 0.6 3.8 6.2 5.4 5.5 4.8 ...
##   ..$ yr  : num [1:366] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...
##  $ 2001:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2001-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 8.2 8.8 7.5 9.2 10 9 5.5 4.6 3 7.9 ...
##   ..$ yr  : num [1:365] 2001 2001 2001 2001 2001 ...
##  $ 2002:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2002-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 8.7 7.4 8.5 9.2 9.3 7.3 5.4 5.6 6.8 6.1 ...
##   ..$ yr  : num [1:365] 2002 2002 2002 2002 2002 ...
##  $ 2003:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2003-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 9.4 10.8 9.7 9.2 6.3 6.6 3.8 6.4 4.3 3.4 ...
##   ..$ yr  : num [1:365] 2003 2003 2003 2003 2003 ...
##  $ 2004:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    366 obs. of  3 variables:
##   ..$ date: POSIXct[1:366], format: &amp;quot;2004-01-01&amp;quot; ...
##   ..$ ta  : num [1:366] 6.6 5.9 7.8 8.1 6.4 5.7 5.2 6.9 11.8 12.2 ...
##   ..$ yr  : num [1:366] 2004 2004 2004 2004 2004 ...
##  $ 2005:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2005-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 7.1 7.8 6.4 5.6 4.4 6.8 7.4 6 5.2 4.2 ...
##   ..$ yr  : num [1:365] 2005 2005 2005 2005 2005 ...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The result is a named list with the name of each sheet that contains the data.frame. Since it is the same table in all sheets, we could use the function &lt;code&gt;bind_rows()&lt;/code&gt;, however, there is a variant of &lt;code&gt;map()&lt;/code&gt; that directly joins all the tables by row: &lt;code&gt;map_df()&lt;/code&gt;. If it were necessary to join by column, &lt;code&gt;map_dfc()&lt;/code&gt; could be used.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

mad &amp;lt;- path %&amp;gt;%
        excel_sheets() %&amp;gt;%
        set_names() %&amp;gt;%
       map_df(read_excel,
           path = path)

mad&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2,192 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   5.4  2000
##  2 2000-01-02 00:00:00   5    2000
##  3 2000-01-03 00:00:00   3.5  2000
##  4 2000-01-04 00:00:00   4.3  2000
##  5 2000-01-05 00:00:00   0.6  2000
##  6 2000-01-06 00:00:00   3.8  2000
##  7 2000-01-07 00:00:00   6.2  2000
##  8 2000-01-08 00:00:00   5.4  2000
##  9 2000-01-09 00:00:00   5.5  2000
## 10 2000-01-10 00:00:00   4.8  2000
## # ... with 2,182 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In our case we have a column in each sheet (year, but also the date) that differentiates each table. If it were not the case, we should use the name of the sheets as a new column when joining all of them. In &lt;code&gt;bind_rows()&lt;/code&gt; it can be done with the &lt;em&gt;.id&lt;/em&gt; argument by assigning a name for the column. The same works for &lt;code&gt;map_df()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

mad &amp;lt;- path %&amp;gt;%
        excel_sheets() %&amp;gt;%
        set_names() %&amp;gt;%
       map_df(read_excel,
           path = path,
           .id = &amp;quot;yr2&amp;quot;)

str(mad)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    2192 obs. of  4 variables:
##  $ yr2 : chr  &amp;quot;2000&amp;quot; &amp;quot;2000&amp;quot; &amp;quot;2000&amp;quot; &amp;quot;2000&amp;quot; ...
##  $ date: POSIXct, format: &amp;quot;2000-01-01&amp;quot; &amp;quot;2000-01-02&amp;quot; ...
##  $ ta  : num  5.4 5 3.5 4.3 0.6 3.8 6.2 5.4 5.5 4.8 ...
##  $ yr  : num  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But how do we import multiple Excel files?&lt;/p&gt;
&lt;p&gt;To do this, first we must know the &lt;code&gt;dir_ls()&lt;/code&gt; function from the &lt;a href=&#34;https://github.com/r-lib/fs&#34;&gt;&lt;em&gt;{fs}&lt;/em&gt;&lt;/a&gt; package. Indeed, there is the &lt;code&gt;dir()&lt;/code&gt; function of &lt;em&gt;R Base&lt;/em&gt;, but the advantages of the recent package are several, especially the compatibility with the &lt;em&gt;{tidyverse}&lt;/em&gt; collection.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dir_ls()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## berlin_temp.xlsx featured.png     index.en.html    index.en.Rmd     
## madrid_temp.xlsx&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#we can filter the files that we want
dir_ls(regexp = &amp;quot;xlsx&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## berlin_temp.xlsx madrid_temp.xlsx&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We import the two Excel files.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#without joining
dir_ls(regexp = &amp;quot;xlsx&amp;quot;) %&amp;gt;%
  map(read_excel)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $berlin_temp.xlsx
## # A tibble: 366 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   1.2  2000
##  2 2000-01-02 00:00:00   3.6  2000
##  3 2000-01-03 00:00:00   5.7  2000
##  4 2000-01-04 00:00:00   5.1  2000
##  5 2000-01-05 00:00:00   2.2  2000
##  6 2000-01-06 00:00:00   1.8  2000
##  7 2000-01-07 00:00:00   4.2  2000
##  8 2000-01-08 00:00:00   4.2  2000
##  9 2000-01-09 00:00:00   4.2  2000
## 10 2000-01-10 00:00:00   1.7  2000
## # ... with 356 more rows
## 
## $madrid_temp.xlsx
## # A tibble: 366 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   5.4  2000
##  2 2000-01-02 00:00:00   5    2000
##  3 2000-01-03 00:00:00   3.5  2000
##  4 2000-01-04 00:00:00   4.3  2000
##  5 2000-01-05 00:00:00   0.6  2000
##  6 2000-01-06 00:00:00   3.8  2000
##  7 2000-01-07 00:00:00   6.2  2000
##  8 2000-01-08 00:00:00   5.4  2000
##  9 2000-01-09 00:00:00   5.5  2000
## 10 2000-01-10 00:00:00   4.8  2000
## # ... with 356 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#joining with a new id column
dir_ls(regexp = &amp;quot;xlsx&amp;quot;) %&amp;gt;%
  map_df(read_excel, .id = &amp;quot;city&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 732 x 4
##    city             date                   ta    yr
##    &amp;lt;chr&amp;gt;            &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 berlin_temp.xlsx 2000-01-01 00:00:00   1.2  2000
##  2 berlin_temp.xlsx 2000-01-02 00:00:00   3.6  2000
##  3 berlin_temp.xlsx 2000-01-03 00:00:00   5.7  2000
##  4 berlin_temp.xlsx 2000-01-04 00:00:00   5.1  2000
##  5 berlin_temp.xlsx 2000-01-05 00:00:00   2.2  2000
##  6 berlin_temp.xlsx 2000-01-06 00:00:00   1.8  2000
##  7 berlin_temp.xlsx 2000-01-07 00:00:00   4.2  2000
##  8 berlin_temp.xlsx 2000-01-08 00:00:00   4.2  2000
##  9 berlin_temp.xlsx 2000-01-09 00:00:00   4.2  2000
## 10 berlin_temp.xlsx 2000-01-10 00:00:00   1.7  2000
## # ... with 722 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;However, in this case we only import the first sheet of each Excel file. To solve this problem, we must create our own function. In this function we do what we previously did individually.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_multiple_excel &amp;lt;- function(path) {
  path %&amp;gt;%
    excel_sheets() %&amp;gt;% 
    set_names() %&amp;gt;% 
  map_df(read_excel, path = path)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We apply our created function to import multiple sheets of several Excel files.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#separately
data &amp;lt;- dir_ls(regexp = &amp;quot;xlsx&amp;quot;) %&amp;gt;% 
           map(read_multiple_excel)

str(data)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 2
##  $ berlin_temp.xlsx:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    2192 obs. of  3 variables:
##   ..$ date: POSIXct[1:2192], format: &amp;quot;2000-01-01&amp;quot; ...
##   ..$ ta  : num [1:2192] 1.2 3.6 5.7 5.1 2.2 1.8 4.2 4.2 4.2 1.7 ...
##   ..$ yr  : num [1:2192] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...
##  $ madrid_temp.xlsx:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    2192 obs. of  3 variables:
##   ..$ date: POSIXct[1:2192], format: &amp;quot;2000-01-01&amp;quot; ...
##   ..$ ta  : num [1:2192] 5.4 5 3.5 4.3 0.6 3.8 6.2 5.4 5.5 4.8 ...
##   ..$ yr  : num [1:2192] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#joining all data.frames
data_df &amp;lt;- dir_ls(regexp = &amp;quot;xlsx&amp;quot;) %&amp;gt;% 
           map_df(read_multiple_excel,
                  .id = &amp;quot;city&amp;quot;)

str(data_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    4384 obs. of  4 variables:
##  $ city: chr  &amp;quot;berlin_temp.xlsx&amp;quot; &amp;quot;berlin_temp.xlsx&amp;quot; &amp;quot;berlin_temp.xlsx&amp;quot; &amp;quot;berlin_temp.xlsx&amp;quot; ...
##  $ date: POSIXct, format: &amp;quot;2000-01-01&amp;quot; &amp;quot;2000-01-02&amp;quot; ...
##  $ ta  : num  1.2 3.6 5.7 5.1 2.2 1.8 4.2 4.2 4.2 1.7 ...
##  $ yr  : num  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Calculating the distance to the sea in R</title>
      <link>/en/2019/calculating-the-distance-to-the-sea-in-r/</link>
      <pubDate>Tue, 08 Jan 2019 00:00:00 +0000</pubDate>
      
      <guid>/en/2019/calculating-the-distance-to-the-sea-in-r/</guid>
      <description>


&lt;p&gt;The distance to the sea is a fundamental variable in geography, especially relevant when it comes to modeling. For example, in interpolations of air temperature, the distance to the sea is usually used as a predictor variable, since there is a casual relationship between the two that explains the spatial variation. How can we estimate the (shortest) distance to the coast in R?&lt;/p&gt;
&lt;div id=&#34;packages&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Packages&lt;/h2&gt;
&lt;p&gt;In this post we will use the following libraries:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Library&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;tidyverse&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Collection of packages (visualization, manipulation): ggplot2, dplyr, etc.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;sf&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Simple Feature: import, export and manipulate vector data&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;raster&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Import, export and manipulate raster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;rnaturalearth&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Set of vector maps ‘natural earth’&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;RColorBrewer&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Color palettes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install the libraries if necessary
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;sf&amp;quot;)) install.packages(&amp;quot;sf&amp;quot;)
if(!require(&amp;quot;raster&amp;quot;)) install.packages(&amp;quot;raster&amp;quot;)
if(!require(&amp;quot;rnaturalearth&amp;quot;)) install.packages(&amp;quot;rnaturalearth&amp;quot;)

#packages
library(rnaturalearth)
library(sf)
library(raster)
library(tidyverse)
library(RColorBrewer)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;the-coast-of-iceland-as-an-example&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The coast of Iceland as an example&lt;/h2&gt;
&lt;p&gt;Our example in this post will be Iceland, and, as it is an island territory it will facilitate the tutorial showing the process in a simple manner. The &lt;em&gt;rnaturalearth&lt;/em&gt; package allows you to import the boundaries of countries (with different administrative levels) from around the world. The data comes from the platform &lt;a href=&#34;http://www.naturalearthdata.com/&#34;&gt;naturalearthdata.com&lt;/a&gt;. I recommend exploring the package, more info &lt;a href=&#34;https://github.com/ropensci/rnaturalearth&#34;&gt;here&lt;/a&gt;. The &lt;code&gt;ne_countries( )&lt;/code&gt; function imports the country boundaries. In this case we indicate with the argument &lt;em&gt;scale&lt;/em&gt; the resolution (10, 50 or 110m), with &lt;em&gt;country&lt;/em&gt; we indicate the specific country of interest and with &lt;em&gt;returnclass&lt;/em&gt; we determine which class we want (&lt;em&gt;sf&lt;/em&gt; or &lt;em&gt;sp&lt;/em&gt;), in our case &lt;em&gt;sf&lt;/em&gt; (simple feature).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;world &amp;lt;- ne_countries(scale = 50) #world map with 50m resolution

plot(world) #sp class by default&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#import the limits of Iceland
iceland &amp;lt;- ne_countries(scale = 10, country = &amp;quot;Iceland&amp;quot;, returnclass = &amp;quot;sf&amp;quot;)

#info of our spatial vector object
iceland&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Simple feature collection with 1 feature and 94 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -24.53991 ymin: 63.39671 xmax: -13.50292 ymax: 66.56415
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##          featurecla scalerank labelrank sovereignt sov_a3 adm0_dif level
## 188 Admin-0 country         0         3    Iceland    ISL        0     2
##                  type   admin adm0_a3 geou_dif geounit gu_a3 su_dif
## 188 Sovereign country Iceland     ISL        0 Iceland   ISL      0
##     subunit su_a3 brk_diff    name name_long brk_a3 brk_name brk_group
## 188 Iceland   ISL        0 Iceland   Iceland    ISL  Iceland      &amp;lt;NA&amp;gt;
##      abbrev postal           formal_en formal_fr name_ciawf note_adm0
## 188 Iceland     IS Republic of Iceland      &amp;lt;NA&amp;gt;    Iceland      &amp;lt;NA&amp;gt;
##     note_brk name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13
## 188     &amp;lt;NA&amp;gt;   Iceland     &amp;lt;NA&amp;gt;         1         4         4          9
##     pop_est pop_rank gdp_md_est pop_year lastcensus gdp_year
## 188  339747       10      16150     2017         NA     2016
##                        economy           income_grp wikipedia fips_10_
## 188 2. Developed region: nonG7 1. High income: OECD        NA       IC
##     iso_a2 iso_a3 iso_a3_eh iso_n3 un_a3 wb_a2 wb_a3   woe_id woe_id_eh
## 188     IS    ISL       ISL    352   352    IS   ISL 23424845  23424845
##                       woe_note adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb
## 188 Exact WOE match as country        ISL        ISL         NA         NA
##     continent region_un       subregion             region_wb name_len
## 188    Europe    Europe Northern Europe Europe &amp;amp; Central Asia        7
##     long_len abbrev_len tiny homepart min_zoom min_label max_label
## 188        7          7   NA        1        0         2         7
##          ne_id wikidataid name_ar name_bn name_de name_en  name_es name_fr
## 188 1159320917       Q189    &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt;  Island Iceland Islandia Islande
##     name_el name_hi name_hu  name_id name_it name_ja name_ko name_nl
## 188    &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt;  Izland Islandia Islanda    &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt; IJsland
##      name_pl  name_pt name_ru name_sv name_tr name_vi name_zh
## 188 Islandia Islândia    &amp;lt;NA&amp;gt;  Island Izlanda Iceland    &amp;lt;NA&amp;gt;
##                           geometry
## 188 MULTIPOLYGON (((-14.56363 6...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#here Iceland
plot(iceland)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-3-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;By default, the &lt;code&gt;plot( )&lt;/code&gt; function with the class &lt;em&gt;sf&lt;/em&gt; creates as many facets of the map as there are variables in it. To limit this behavior we can use either a variable name &lt;code&gt;plot(iceland[&amp;quot;admin&amp;quot;])&lt;/code&gt; or the limit argument &lt;code&gt;plot(iceland, max.plot = 1)&lt;/code&gt;. With the argument &lt;em&gt;max.plot = 1&lt;/em&gt; the function uses the first available variable of the map.&lt;/p&gt;
&lt;p&gt;In addition, we see in the information of the object &lt;em&gt;sf&lt;/em&gt; that the projection is WGS84 with decimal degrees (EPSG code: 4326). For the calculation of distances it is more convenient to use meters instead of degrees. Because of this, the first thing we do is to transform the map of Iceland to UTM Zone 27 (EPSG code: 3055). More information about EPSG and projections &lt;a href=&#34;http://spatialreference.org/ref/epsg/wgs-84/&#34;&gt;here&lt;/a&gt;. For that purpose, we use the &lt;code&gt;st_transform( )&lt;/code&gt; function. We simply indicate the map and the EPSG code.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#transform to UTM
iceland &amp;lt;- st_transform(iceland, 3055)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;create-a-fishnet-of-points&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Create a fishnet of points&lt;/h2&gt;
&lt;p&gt;We still need the points where we want to know the distance. In our case it will be a regular fishnet of points in Iceland with a resolution of 5km. We do this with the function &lt;code&gt;st_make_grid( )&lt;/code&gt;, indicating the resolution in the unit of the coordinate system (meters in our case) with the argument &lt;em&gt;cellsize&lt;/em&gt;, and what geometry we would like to create &lt;em&gt;what&lt;/em&gt; (polygons, centers or corners).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#create the fishnet
grid &amp;lt;- st_make_grid(iceland, cellsize = 5000, what = &amp;quot;centers&amp;quot;)

#our fishnet with the extension of Iceland
plot(grid)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#only extract the points in the limits of Iceland
grid &amp;lt;- st_intersection(grid, iceland)   

#our fishnet now
plot(grid)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;calculating-the-distance&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Calculating the distance&lt;/h2&gt;
&lt;p&gt;To estimate the distance we use the &lt;code&gt;st_distance( )&lt;/code&gt; function that returns a vector of distances for all our points in the fishnet. But first it is necessary to transform the map of Iceland from a polygon shape (MULTIPOLYGON) to a line (MULTILINESTRING). More details with &lt;code&gt;?st_cast&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#transform Iceland from polygon shape to line
iceland &amp;lt;- st_cast(iceland, &amp;quot;MULTILINESTRING&amp;quot;)

#calculation of the distance between the coast and our points
dist &amp;lt;- st_distance(iceland, grid)

#distance with unit in meters
head(dist)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Units: [m]
## [1]  790.7906 1151.4360 1270.7603 3128.9057 2428.5677 4197.7472&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;plotting-the-calculated-distance&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Plotting the calculated distance&lt;/h2&gt;
&lt;p&gt;Once obtained the distance for our points, we can combine them with the coordinates and plot them in &lt;em&gt;ggplot2&lt;/em&gt;. For this, we create a &lt;em&gt;data.frame&lt;/em&gt;. The object &lt;em&gt;dist&lt;/em&gt; is a matrix of one column, so we have to convert it to a vector with the function &lt;code&gt;as.vector( )&lt;/code&gt;. In addition, we divide by 1000 to convert the distance in meters to km. The &lt;code&gt;st_coordinates( )&lt;/code&gt; function extracts the coordinates of our points. For the final visualization we use a vector of colors with the RdGy palette (more &lt;a href=&#34;http://colorbrewer2.org&#34;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#create a data.frame with the distance and the coordinates of the points
df &amp;lt;- data.frame(dist = as.vector(dist)/1000,
                    st_coordinates(grid))

#structure
str(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;#39;data.frame&amp;#39;:    4104 obs. of  3 variables:
##  $ dist: num  0.791 1.151 1.271 3.129 2.429 ...
##  $ X   : num  608796 613796 583796 588796 593796 ...
##  $ Y   : num  7033371 7033371 7038371 7038371 7038371 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#colors 
col_dist &amp;lt;- brewer.pal(11, &amp;quot;RdGy&amp;quot;)


ggplot(df, aes(X, Y, fill = dist))+ #variables
         geom_tile()+ #geometry
           scale_fill_gradientn(colours = rev(col_dist))+ #colors for plotting the distance
             labs(fill = &amp;quot;Distance (km)&amp;quot;)+ #legend name
             theme_void()+ #map theme
              theme(legend.position = &amp;quot;bottom&amp;quot;) #legend position&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;export-the-distance-as-a-raster&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Export the distance as a raster&lt;/h2&gt;
&lt;p&gt;To be able to export the estimated distance to the sea of Iceland, we need to use the &lt;code&gt;rasterize( )&lt;/code&gt; function of the library &lt;em&gt;raster&lt;/em&gt;.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;First, it is necessary to create an empty raster. In this raster we have to indicate the resolution, in our case it is of 5000m, the projection and the extension of the raster.&lt;/li&gt;
&lt;/ol&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;&lt;p&gt;We can extract the projection from the information of the map of Iceland.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The extension can be extracted from our &lt;em&gt;grid&lt;/em&gt; points with the function &lt;code&gt;extent( )&lt;/code&gt;. However, this last function needs the class &lt;em&gt;sp&lt;/em&gt;, so we pass the object &lt;em&gt;grid&lt;/em&gt; in &lt;em&gt;sf&lt;/em&gt; format, only for this time, to the class &lt;em&gt;sp&lt;/em&gt; using the function &lt;code&gt;as( )&lt;/code&gt; and the argument “Spatial”.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;In addition to the above, the &lt;em&gt;data.frame&lt;/em&gt; &lt;strong&gt;df&lt;/strong&gt;, that we created earlier, has to be converted into the &lt;em&gt;sf&lt;/em&gt; class. Therefore, we apply the function &lt;code&gt;st_as_sf( )&lt;/code&gt; with the argument &lt;em&gt;coords&lt;/em&gt; indicating the names of the coordinates. Additionally, we also define the coordinate system that we know.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#get the extension
ext &amp;lt;- extent(as(grid, &amp;quot;Spatial&amp;quot;))

#extent object
ext&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class      : Extent 
## xmin       : 338795.6 
## xmax       : 848795.6 
## ymin       : 7033371 
## ymax       : 7383371&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#raster destination
r &amp;lt;- raster(resolution = 5000, ext = ext, crs = &amp;quot;+proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs&amp;quot;)

#convert the points to a spatial object class sf
dist_sf &amp;lt;- st_as_sf(df, coords = c(&amp;quot;X&amp;quot;, &amp;quot;Y&amp;quot;)) %&amp;gt;%
                      st_set_crs(3055)

#create the distance raster
dist_raster &amp;lt;- rasterize(dist_sf, r, &amp;quot;dist&amp;quot;, fun = mean)

#raster
dist_raster&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class      : RasterLayer 
## dimensions : 70, 102, 7140  (nrow, ncol, ncell)
## resolution : 5000, 5000  (x, y)
## extent     : 338795.6, 848795.6, 7033371, 7383371  (xmin, xmax, ymin, ymax)
## crs        : +proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs 
## source     : memory
## names      : layer 
## values     : 0.006124901, 115.1712  (min, max)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#plot the raster
plot(dist_raster)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#export the raster
writeRaster(dist_raster, file = &amp;quot;dist_islandia.tif&amp;quot;, format = &amp;quot;GTiff&amp;quot;, overwrite = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;rasterize( )&lt;/code&gt; function is designed to create rasters from an irregular grid. In case we have a regular grid, like this one, we can use an easier alternative way. The &lt;code&gt;rasterFromXYZ( )&lt;/code&gt; function converts a &lt;em&gt;data.frame&lt;/em&gt; with longitude, latitude and the variable &lt;em&gt;Z&lt;/em&gt; into a raster object. It is important that the order should be longitude, latitude, variables.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;r &amp;lt;- rasterFromXYZ(df[, c(2:3, 1)], crs = &amp;quot;+proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs&amp;quot;)

plot(r)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2019-01-08-calculating-the-distance-to-the-sea-in-r/index.en_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;With the calculation of distance we can create art, as seen in the header of this post, which includes a world map only with the distance to the sea of all continents. A different perspective to our world (&lt;a href=&#34;https://www.geografiainfinita.com/2017/06/una-radiografia-del-mundo-a-traves-de-la-distancia-al-mar/&#34;&gt;here more (spanish)&lt;/a&gt;) .&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Alcohol outlet density and alcohol consumption in Galician youth</title>
      <link>/en/publication/alcohol_galicia2018/</link>
      <pubDate>Fri, 21 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/publication/alcohol_galicia2018/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Climate and Weather</title>
      <link>/en/graphs/climate/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/graphs/climate/</guid>
      <description>&lt;p&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//player.vimeo.com/video/310077447&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
 &lt;/div&gt;

Probability of a frost day (minimum temperature less than 0ºC) through the year in Europe. Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;E-OBS 18e&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//player.vimeo.com/video/310070253&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
 &lt;/div&gt;

Probability of a frost day (minimum temperature less than 0ºC/32ºF) through the year in the Contiguous United States. Data: &lt;a href=&#34;https://developers.google.com/earth-engine/datasets/catalog/OREGONSTATE_PRISM_AN81m&#34; target=&#34;_blank&#34;&gt;PRISM&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/p&gt;



&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Concentration of daily precipitation in the contiguous United States 1981-2017&#34; href=&#34;/img/album/CI_prism.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/CI_prism.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Concentration of daily precipitation in the contiguous United States 1981-2017. Data: &lt;a href=&#34;http://www.prism.oregonstate.edu/&#34; target=&#34;_blank&#34;&gt;PRISM&lt;/a&gt;. More details &lt;a href=&#34;https://github.com/dominicroye/Concentration_Index_USA&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average of Heating and Cooling Degree Days (1950-2018) in Spain.&#34; href=&#34;/img/album/gradosdia.png&#34;&gt;
    &lt;img src=&#34;/img/album/gradosdia.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average of Heating and Cooling Degree Days (1950-2018) in Spain. As reference value I used 15.5ºC and 22ºC of average daily temperature, respectively. Data: &lt;a href=&#34;http://surfobs.climate.copernicus.eu/dataaccess/access_eobs.php#datafiles&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Bilbao.&#34; href=&#34;/img/album/anomalias_Bilbao.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Bilbao.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Bilbao. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Zaragoza.&#34; href=&#34;/img/album/anomalias_Zaragoza.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Zaragoza.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Zaragoza. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Santander.&#34; href=&#34;/img/album/anomalias_Santander.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Santander.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Santander. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Málaga.&#34; href=&#34;/img/album/anomalias_Malaga.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Malaga.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Málaga. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Sevilla.&#34; href=&#34;/img/album/anomalias_Sevilla.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Sevilla.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Sevilla. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Santiago.&#34; href=&#34;/img/album/anomalias_Santiago.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Santiago.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Santiago. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Valencia.&#34; href=&#34;/img/album/anomalias_Valencia.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Valencia.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Valencia. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in Vigo.&#34; href=&#34;/img/album/anomalias_Vigo.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Vigo.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in Vigo. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of temperature and precipitation in A Coruña.&#34; href=&#34;/img/album/anomalias_A%20Coru%c3%b1a.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_A%20Coru%c3%b1a.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of temperature and precipitation in A Coruña. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Madrid.&#34; href=&#34;/img/album/Madrid_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Madrid_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Madrid. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Santander.&#34; href=&#34;/img/album/Santander_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Santander_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Santander. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Barcelona.&#34; href=&#34;/img/album/Barcelona_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Barcelona_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Barcelona. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Santiago.&#34; href=&#34;/img/album/Santiago_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Santiago_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Santiago. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Bilbao.&#34; href=&#34;/img/album/Bilbao_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Bilbao_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Bilbao. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Sevilla.&#34; href=&#34;/img/album/Sevilla_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Sevilla_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Sevilla. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in A Coruña.&#34; href=&#34;/img/album/A%20Coru%c3%b1a_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/A%20Coru%c3%b1a_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in A Coruña. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Winter anomalies of daily mean temperature in Málaga.&#34; href=&#34;/img/album/Malaga_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Malaga_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Winter anomalies of daily mean temperature in Málaga. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average first day of summer in Europe.&#34; href=&#34;/img/album/first_summer.png&#34;&gt;
    &lt;img src=&#34;/img/album/first_summer.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average first day of summer in Europe (maximum temperature &amp;gt;25ºC). Data: &lt;a href=&#34;http://surfobs.climate.copernicus.eu/dataaccess/access_eobs.php#datafiles&#34; target=&#34;_blank&#34;&gt;E-OSB 18e&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of the average first day of summer in Europe.&#34; href=&#34;/img/album/density_firstsummer.png&#34;&gt;
    &lt;img src=&#34;/img/album/density_firstsummer.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of the average first day of summer in Europe (maximum temperature &amp;gt;25ºC). Data: &lt;a href=&#34;http://surfobs.climate.copernicus.eu/dataaccess/access_eobs.php#datafiles&#34; target=&#34;_blank&#34;&gt;E-OSB 18e&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Warming stripes for several Spanish cities.&#34; href=&#34;/img/album/tiras_spain.png&#34;&gt;
    &lt;img src=&#34;/img/album/tiras_spain.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Warming stripes for several Spanish cities. These graphs represent and communicate climate change in a very illustrative and effective way. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/how-to-create-warming-stripes-in-r/&#34; target=&#34;_blank&#34;&gt;post&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual anomalies of precipitation (%) in peninsular Spain 1950-2012.&#34; href=&#34;/img/album/anomalia_spread.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalia_spread.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;62 years of annual anomalies of precipitation (%) in peninsular Spain in a single graphic. Data: &lt;a href=&#34;https://digital.csic.es/handle/10261/141218&#34; target=&#34;_blank&#34;&gt;SPREAD&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer anomaly of temperature and precipitation in Barcelona 1914-2018.&#34; href=&#34;/img/album/anomalias_barcelona.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_barcelona.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer anomaly of temperature and precipitation in Barcelona 1914-2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer anomaly of temperature and precipitation in Madrid 1920-2018.&#34; href=&#34;/img/album/anomalias_Madrid.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Madrid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer anomaly of temperature and precipitation in Madrid 1920-2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer anomaly of temperature and precipitation in Santiago de Compostela 1950-2018.&#34; href=&#34;/img/album/anomalias_scq.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_scq.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer anomaly of temperature and precipitation in Santiago de Compostela 1950-2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Monthly precipitation anomaly registered in Santiago de Compostela in 2017.&#34; href=&#34;/img/album/pr_anomalia2017_scq.png&#34;&gt;
    &lt;img src=&#34;/img/album/pr_anomalia2017_scq.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Monthly precipitation anomaly registered in Santiago de Compostela in 2017. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Monthly precipitation anomaly registered in Barcelona in 2018.&#34; href=&#34;/img/album/pr_anomalia2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/pr_anomalia2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Monthly precipitation anomaly registered in Barcelona in 2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;https://opendata.aemet.es&#34; target=&#34;_blank&#34;&gt;opendata.aemet.es&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Cloud fraction anomaly for Europe (Summer 2018).&#34; href=&#34;/img/album/anomaly_summer_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomaly_summer_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Cloud fraction anomaly for Europe (Summer 2018). Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of first frost days in Barcelona 1950-2016.&#34; href=&#34;/img/album/primeras_heladasBCN.png&#34;&gt;
    &lt;img src=&#34;/img/album/primeras_heladasBCN.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of first frost days in Barcelona 1950-2016. 12.1 days later each decade. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last frost days in Madrid 1920-2016.&#34; href=&#34;/img/album/%c3%baltimas_heladasMadrid.png&#34;&gt;
    &lt;img src=&#34;/img/album/%c3%baltimas_heladasMadrid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last frost days in Madrid 1920-2016. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of first tropical nights in Barcelona 1950-2016.&#34; href=&#34;/img/album/primeras_nochestropicBCN.png&#34;&gt;
    &lt;img src=&#34;/img/album/primeras_nochestropicBCN.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of first tropical nights in Barcelona 1950-2016. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last tropical night in Barcelona 1950-2016.&#34; href=&#34;/img/album/ultimas_nochestropicBCN.png&#34;&gt;
    &lt;img src=&#34;/img/album/ultimas_nochestropicBCN.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last tropical nights in Barcelona 1950-2016. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of first tropical night in Madrid 1920-2016.&#34; href=&#34;/img/album/primeras_nochestropicMad.png&#34;&gt;
    &lt;img src=&#34;/img/album/primeras_nochestropicMad.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of first tropical night (minimum temperature &amp;gt; 20ºC) in Madrid 1920-2016. -2.3 days earlier each decade.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last tropical night in Madrid 1920-2016.&#34; href=&#34;/img/album/ultimas_nochestropicMadrid.png&#34;&gt;
    &lt;img src=&#34;/img/album/ultimas_nochestropicMadrid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last tropical night (minimum temperature &amp;gt; 20ºC) in Madrid 1920-2016. 1.9 days later each decade.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of frist days with more than 30ºC in several Spanish cities.&#34; href=&#34;/img/album/primerosdias_30TX.png&#34;&gt;
    &lt;img src=&#34;/img/album/primerosdias_30TX.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of frist days with more than 30ºC in several Spanish cities.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last days with more than 30ºC in several Spanish cities.&#34; href=&#34;/img/album/ultimosdias_30TX.png&#34;&gt;
    &lt;img src=&#34;/img/album/ultimosdias_30TX.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last days with more than 30ºC in several Spanish cities.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average of consecutive days without rainfall 1950-2012.&#34; href=&#34;/img/album/rachas_secas.png&#34;&gt;
    &lt;img src=&#34;/img/album/rachas_secas.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average of consecutive days without rainfall 1950-2012. Data: &lt;a href=&#34;https://digital.csic.es/handle/10261/141218&#34; target=&#34;_blank&#34;&gt;SPREAD&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average of consecutive days without rainfall by seasons 1950-2012 in the Iberian Peninsula.&#34; href=&#34;/img/album/rachas_estaciones.png&#34;&gt;
    &lt;img src=&#34;/img/album/rachas_estaciones.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average of consecutive days without rainfall by seasons 1950-2012 in the Iberian Peninsula. Data: &lt;a href=&#34;https://digital.csic.es/handle/10261/141218&#34; target=&#34;_blank&#34;&gt;SPREAD&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual precipitation per inhabitant in Europe.&#34; href=&#34;/img/album/ratiopr2015.png&#34;&gt;
    &lt;img src=&#34;/img/album/ratiopr2015.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual precipitation per inhabitant in Europe based on gridded population (1km resolution) and precipitation (0.25º) data. Data:  &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;http://sedac.ciesin.columbia.edu/data/collection/gpw-v4&#34; target=&#34;_blank&#34;&gt;SEDAC&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2018 and normal 2001-2018 in Europe.&#34; href=&#34;/img/album/Europe_summer_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/Europe_summer_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2018 and normal 2001-2018 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Land Surface Temperature anomaly for summer 2018 in Europe.&#34; href=&#34;/img/album/Europe_summer_anomaly_LST_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/Europe_summer_anomaly_LST_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Land Surface Temperature anomaly for summer 2018 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average Land Surface Temperature for summer 2018 and normal 2001-2018 in Europe.&#34; href=&#34;/img/album/Europe_summer_LST_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/Europe_summer_LST_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average Land Surface Temperature for summer 2018 and normal 2001-2018 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of temperature anomalies in autumn according to different decades in Barcelona.&#34; href=&#34;/img/album/distribution_graph_bcn.png&#34;&gt;
    &lt;img src=&#34;/img/album/distribution_graph_bcn.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of temperature anomalies in autumn according to different decades in Barcelona. You can clearly see how the autumn is getting warmer due to global warming. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of temperature anomalies in autumn according to different decades in Santiago de Compostela.&#34; href=&#34;/img/album/distribution_temp.png&#34;&gt;
    &lt;img src=&#34;/img/album/distribution_temp.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of temperature anomalies in autumn according to different decades in Santiago de Compostela. You can clearly see how the autumn is getting warmer due to global warming. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several Spanish cities.&#34; href=&#34;/img/album/clima_circulos.png&#34;&gt;
    &lt;img src=&#34;/img/album/clima_circulos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several Spanish cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several European cities.&#34; href=&#34;/img/album/clima_circulos_eu.png&#34;&gt;
    &lt;img src=&#34;/img/album/clima_circulos_eu.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several European cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Graphic definition of climate and weather.&#34; href=&#34;/img/album/clima_def.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/clima_def.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Graphic definition of climate and weather. The difference between weather and climate is particularly a scale of time. Single atmospheric conditions over a short period of time is weather, and climate is the statistical description of all these single condicions over a relatively long period of time.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several Chilean cities.&#34; href=&#34;/img/album/climate_chile.png&#34;&gt;
    &lt;img src=&#34;/img/album/climate_chile.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several Chilean cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;http://explorador.cr2.cl/&#34; target=&#34;_blank&#34;&gt;explorador.cr2.cl&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer month, mild winters, lot of sun and little wind, the climatic preferences for the Galician population.&#34; href=&#34;/img/album/galicia_percepcion.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/galicia_percepcion.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer months, mild winters, lot of sun and little wind, the climatic preferences for the Galician population. Map is based on survey results. More: &lt;a href=&#34;https://t.co/tfwrANxqHz&#34; target=&#34;_blank&#34;&gt;article (galician)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Where is the lightning activity concentrated in a few days in Galicia?&#34; href=&#34;/img/album/concentration_index_rayos.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/concentration_index_rayos.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Where is the lightning activity concentrated in a few days in Galicia? Values toward 1 indicate that a few days contribute much of all the lightning; instead, values toward 0 are places where more regularity is observed. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/lightning_galicia_2018/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;How is the lightning activity distributed in Galicia?&#34; href=&#34;/img/album/rayos_estaciones.png&#34;&gt;
    &lt;img src=&#34;/img/album/rayos_estaciones.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;How is the lightning activity distributed annual and by seasons in Galicia? Data: &lt;a href=&#34;http://www.meteogalicia.gal/observacion/raios/raios.action?request_locale=gl&#34; target=&#34;_blank&#34;&gt;meteogalicia&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/lightning_galicia_2018/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;How is the lightning activity distributed by month and hour in Galicia?&#34; href=&#34;/img/album/rayos_meshora.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/rayos_meshora.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;How is the lightning activity distributed by month and hour in Galicia? Data: &lt;a href=&#34;http://www.meteogalicia.gal/observacion/raios/raios.action?request_locale=gl&#34; target=&#34;_blank&#34;&gt;meteogalicia&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/lightning_galicia_2018/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation in descending order in Europe.&#34; href=&#34;/img/album/regimenes_pluvi.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/regimenes_pluvi.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation (1950-2017) in descending order in Europe. (P, spring; S, summer; A, autumn; W, winter). Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation in descending order in the contiguous United States.&#34; href=&#34;/img/album/pluvi_regimes_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/pluvi_regimes_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation (1956-2006) in descending order in the contiguous United States. (P, spring; S, summer; A, autumn; W, winter). More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/usa_ci_2017/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;, &lt;a href=&#34;https://github.com/dominicroye/Concentration_Index_USA&#34; target=&#34;_blank&#34;&gt;dataset&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Concentration of Daily Precipitation in the contiguous United States.&#34; href=&#34;/img/album/concentration_index_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/concentration_index_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Concentration of Daily Precipitation (1956-2006) in the contiguous United States. (P, spring; S, summer; A, autumn; W, winter). The frequency distribution of daily precipitation amounts almost anywhere conforms to a negative exponential distribution, reflecting the fact that there are many small daily totals and few large ones. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/usa_ci_2017/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;, &lt;a href=&#34;https://github.com/dominicroye/Concentration_Index_USA&#34; target=&#34;_blank&#34;&gt;dataset&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2001-2018 in the contiguous United States.&#34; href=&#34;/img/album/summer_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/summer_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2001-2018 in the contiguous United States. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for winter 2001-2018 in the contiguous United States.&#34; href=&#34;/img/album/winter_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/winter_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for winter 2001-2018 in the contiguous United States. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in Europe.&#34; href=&#34;/img/album/summerday_estaciones.png&#34;&gt;
    &lt;img src=&#34;/img/album/summerday_estaciones.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in Europe. Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in Europe.&#34; href=&#34;/img/album/summerdays_eu.gif&#34;&gt;
    &lt;img src=&#34;/img/album/summerdays_eu.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in Europe. Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in the pensinular Spain.&#34; href=&#34;/img/album/summerdays.gif&#34;&gt;
    &lt;img src=&#34;/img/album/summerdays.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in the pensinular Spain. Data: STEAD from &lt;a href=&#34;https://twitter.com/climayagua&#34; target=&#34;_blank&#34;&gt;Research Group climayagua&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in the pensinular Spain.&#34; href=&#34;/img/album/summerprob_spain.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/summerprob_spain.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in the pensinular Spain. Data: STEAD from &lt;a href=&#34;https://twitter.com/climayagua&#34; target=&#34;_blank&#34;&gt;Research Group climayagua&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC/77ºF) through the year in the Contiguous United States.&#34; href=&#34;/img/album/summerdays_usa.gif&#34;&gt;
    &lt;img src=&#34;/img/album/summerdays_usa.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC/77ºF) through the year in the Contiguous United States. Data: &lt;a href=&#34;http://www.engr.scu.edu/~emaurer/data.shtml&#34; target=&#34;_blank&#34;&gt;Maurer et al (2002)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual sunhours for Germany in 2017.&#34; href=&#34;/img/album/sunhours_germany2017.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/sunhours_germany2017.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual sunhours for Germany in 2017. Map is a result of a interpolation process based on sunhour registers and cloudiness from MODIS. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform for MODIS: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Warming stripes for Lisboa.&#34; href=&#34;/img/album/tiras_lisboa.png&#34;&gt;
    &lt;img src=&#34;/img/album/tiras_lisboa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Warming stripes for Lisboa. These graphs represent and communicate climate change in a very illustrative and effective way. Data: &lt;a href=&#34;https://data.giss.nasa.gov/gistemp/stdata/&#34; target=&#34;_blank&#34;&gt;GISTEMP&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/how-to-create-warming-stripes-in-r/&#34; target=&#34;_blank&#34;&gt;post&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Where do we observe the trajectories of extratropical cyclones in Europe?&#34; href=&#34;/img/album/trayectios_ciclones.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/trayectios_ciclones.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Where do we observe the trajectories of extratropical cyclones in Europe? Here the frequency for the months October to March between 1979-2010. Data: &lt;a href=&#34;http://catalogue.ceda.ac.uk/uuid/421688bf376b41b884246b34bd274356&#34; target=&#34;_blank&#34;&gt;extra-tropical cyclone tracks&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Warming stripes for Madrid.&#34; href=&#34;/img/album/warming_stripes_madrid.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/warming_stripes_madrid.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Warming stripes for Madrid. These graphs represent and communicate climate change in a very illustrative and effective way. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/how-to-create-warming-stripes-in-r/&#34; target=&#34;_blank&#34;&gt;post&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2001-2018 in Germany.&#34; href=&#34;/img/album/germany1.png&#34;&gt;
    &lt;img src=&#34;/img/album/germany1.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2001-2018 in Germany. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for winter 2001-2018 in Germany.&#34; href=&#34;/img/album/germany2.png&#34;&gt;
    &lt;img src=&#34;/img/album/germany2.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for winter 2001-2018 in Germany. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual sunhours for Galicia (Spain) in 2017.&#34; href=&#34;/img/album/horasdesol2017.png&#34;&gt;
    &lt;img src=&#34;/img/album/horasdesol2017.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual sunhours for Galicia (Spain) in 2017. Map is a result of a interpolation process based on sunhour registers and cloudiness from MODIS. Data: &lt;a href=&#34;http://www.meteogalicia.gal&#34; target=&#34;_blank&#34;&gt;Meteogalicia&lt;/a&gt;, &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform for MODIS: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual sunhours for Spain in 2017.&#34; href=&#34;/img/album/horassol_espa%c3%b1a2017.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/horassol_espa%c3%b1a2017.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual sunhours for Spain in 2017. Map is a result of a interpolation process based on sunhour registers and cloudiness from MODIS. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform for MODIS: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Potential insolation (sun hours) in Barcelona&amp;#39;s city center.&#34; href=&#34;/img/album/insolation_bcn.png&#34;&gt;
    &lt;img src=&#34;/img/album/insolation_bcn.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Potential insolation (sun hours) in Barcelona&amp;rsquo;s city center for July 21 and December 22. The calculation is based on the Sky View Factor. Estimation made using &lt;a href=&#34;http://www.saga-gis.org/&#34; target=&#34;_blank&#34;&gt;SAGA-GIS&lt;/a&gt;. Data: &lt;a href=&#34;http://pnoa.ign.es/presentacion&#34; target=&#34;_blank&#34;&gt;LiDAR-IGN&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average Diurnal Land Surface Temperature for July 2017 in Europe.&#34; href=&#34;/img/album/LSTday.png&#34;&gt;
    &lt;img src=&#34;/img/album/LSTday.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average Diurnal Land Surface Temperature for July 2017 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average Night Land Surface Temperature for July 2017 in Europe.&#34; href=&#34;/img/album/LSTnight.png&#34;&gt;
    &lt;img src=&#34;/img/album/LSTnight.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average Night Land Surface Temperature for July 2017 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average number of snow days on the ground in the Iberian Peninsula (2002-2017)&#34; href=&#34;/img/album/nieve_peninsula.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/nieve_peninsula.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of snow days on the ground in the Iberian Peninsula (2002-2017). The daily images with a binary code (condition: Snow_Cover_Daily_Tile == 200, and Fractional_Snow_Cover &amp;gt; 90) have been reclassified and than summed up and divided by the number of years. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD10A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several American cities.&#34; href=&#34;/img/album/nortamerica_climate.png&#34;&gt;
    &lt;img src=&#34;/img/album/nortamerica_climate.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several American cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;https://www.ncdc.noaa.gov/cdo-web/&#34; target=&#34;_blank&#34;&gt;NCDC-CDO/NOAA&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2018 and normal 2001-2017 in the Iberian Peninsular.&#34; href=&#34;/img/album/nubosidad_verano2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/nubosidad_verano2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2018 and normal 2001-2017 in the Iberian Peninsular. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for march 2018 and march 2001-2018 in the Iberian Peninsular.&#34; href=&#34;/img/album/PI_marzo2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/PI_marzo2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for march 2018 and march 2001-2018 in the Iberian Peninsular. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Accumulated precipitation of 2017 compared to other years in Valladolid.&#34; href=&#34;/img/album/valladolid.png&#34;&gt;
    &lt;img src=&#34;/img/album/valladolid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Accumulated precipitation of 2017 compared to other years in Valladolid. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Accumulated precipitation of 2017 compared to other years in Vigo.&#34; href=&#34;/img/album/vigo.png&#34;&gt;
    &lt;img src=&#34;/img/album/vigo.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Accumulated precipitation of 2017 compared to other years in Vigo. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Environment</title>
      <link>/en/graphs/environment/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/graphs/environment/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light?&#34; href=&#34;/img/album/coef_var_nightlights.png&#34;&gt;
    &lt;img src=&#34;/img/album/coef_var_nightlights.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light? The map shows the Coefficient of Variation (standard deviation/mean) of each municipalities. Data: &lt;a href=&#34;https://ngdc.noaa.gov/eog/download.html&#34; target=&#34;_blank&#34;&gt;VIIRS Nighttime Lights NOAA (2015)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Which coast has more light pollution in Peninsular Spain?&#34; href=&#34;/img/album/lights_costas.png&#34;&gt;
    &lt;img src=&#34;/img/album/lights_costas.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Which coast has more light pollution in Peninsular Spain? The coast margins include a buffer of 5km. Data: &lt;a href=&#34;https://ngdc.noaa.gov/eog/download.html&#34; target=&#34;_blank&#34;&gt;VIIRS Nighttime Lights NOAA (2016)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light?&#34; href=&#34;/img/album/ranking.png&#34;&gt;
    &lt;img src=&#34;/img/album/ranking.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light? The map shows the Coefficient of Variation (standard deviation/mean) of each municipalities. Data: &lt;a href=&#34;https://ngdc.noaa.gov/eog/download.html&#34; target=&#34;_blank&#34;&gt;VIIRS Nighttime Lights NOAA (2015)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the Iberian Peninsula.&#34; href=&#34;/img/album/no2_pi_autum.png&#34;&gt;
    &lt;img src=&#34;/img/album/no2_pi_autum.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the Iberian Peninsula. Clearly stand out Barcelona and Madrid. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/COPERNICUS%2FS5P%2FOFFL%2FL3_NO2&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in Germany.&#34; href=&#34;/img/album/no2_pi_autum_germany.png&#34;&gt;
    &lt;img src=&#34;/img/album/no2_pi_autum_germany.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in Germany. Clearly stands out the Rhine-Ruhr metropolitan region. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/COPERNICUS%2FS5P%2FOFFL%2FL3_NO2&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the contiguous United States.&#34; href=&#34;/img/album/no2_pi_autum_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/no2_pi_autum_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the contiguous United States. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/COPERNICUS%2FS5P%2FOFFL%2FL3_NO2&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Air pollution in the Iberian Peninsula. Annual average of PM2.5 for 2016 seen by MODIS/MISR/SeaWiFS. Clearly visible are Madrid and Barcelona.&#34; href=&#34;/img/album/PM25_peninsula.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/PM25_peninsula.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Air pollution in the Iberian Peninsula. Annual average of PM2.5 for 2016 seen by MODIS/MISR/SeaWiFS. Clearly visible are Madrid and Barcelona. Data: &lt;a href=&#34;http://sedac.ciesin.columbia.edu/data/sets/browse&#34; target=&#34;_blank&#34;&gt;SEDAC&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Our human footprint in the Iberian Peninsula, or rather, the pressure we exert on the terrestrial ecosystem.&#34; href=&#34;/img/album/huella_humana.png&#34;&gt;
    &lt;img src=&#34;/img/album/huella_humana.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Our human footprint in the Iberian Peninsula, or rather, the pressure we exert on the terrestrial ecosystem. Data: &lt;a href=&#34;https://www.nature.com/articles/sdata201667&#34; target=&#34;_blank&#34;&gt;Global terrestrial Human Footprint &lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Geography</title>
      <link>/en/graphs/geography/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/graphs/geography/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Consumer Price Index: Rental of housing (annual change)&#34; href=&#34;/img/album/IPC_alquiler.png&#34;&gt;
    &lt;img src=&#34;/img/album/IPC_alquiler.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Consumer Price Index: Rental of housing (annual change) 2002-2019 for Spanish provinces. Data: &lt;a href=&#34;https://www.ine.es/dyngs/INEbase/es/categoria.htm?c=Estadistica_P&amp;amp;cid=1254735976607&#34; target=&#34;_blank&#34;&gt;INE&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Travel time to high-density urban centers via surface transport in Spain.&#34; href=&#34;/img/album/acces_mapa_esp.png&#34;&gt;
    &lt;img src=&#34;/img/album/acces_mapa_esp.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Travel time to high-density urban centers via surface transport in Spain. Data: &lt;a href=&#34;https://resourcewatch.org/data/explore/cit01701-Travel-Time-to-Major-Cities&#34; target=&#34;_blank&#34;&gt;resourcewatch.org&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Ranking of travel time to high-density urban centers via surface transport by Spanish Provinces.&#34; href=&#34;/img/album/acces_rank.png&#34;&gt;
    &lt;img src=&#34;/img/album/acces_rank.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Ranking of travel time to high-density urban centers via surface transport by Spanish Provinces. Data: &lt;a href=&#34;https://resourcewatch.org/data/explore/cit01701-Travel-Time-to-Major-Cities&#34; target=&#34;_blank&#34;&gt;resourcewatch.org&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Elevation map of the meandering river Ebro.&#34; href=&#34;/img/album/Ebro_rio.png&#34;&gt;
    &lt;img src=&#34;/img/album/Ebro_rio.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Inspired by the great work of &lt;a href=&#34;https://twitter.com/geo_coe?lang=es&#34; target=&#34;_blank&#34;&gt;@geo_coe&lt;/a&gt; I have created an elevation map for the meandering river Ebro, middle section between Logroño and Zaragoza in Spain. Data: &lt;a href=&#34;http://centrodedescargas.cnig.es/CentroDescargas/index.jsp&#34; target=&#34;_blank&#34;&gt;DEM05 (Modelo Digital del Terreno - MDT05)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Elevation map of the meandering river Alagón (Tagus).&#34; href=&#34;/img/album/alagon_rio.png&#34;&gt;
    &lt;img src=&#34;/img/album/alagon_rio.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Inspired by the great work of &lt;a href=&#34;https://twitter.com/geo_coe?lang=es&#34; target=&#34;_blank&#34;&gt;@geo_coe&lt;/a&gt; I have created an elevation map for the meandering river Alagón, right tributary to the Tagus in Spain. Data: &lt;a href=&#34;http://centrodedescargas.cnig.es/CentroDescargas/index.jsp&#34; target=&#34;_blank&#34;&gt;DEM05 (Modelo Digital del Terreno - MDT05)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Urban growth of Santiag de Compostela from before 1800 until today.&#34; href=&#34;/img/album/scq_buildings.gif&#34;&gt;
    &lt;img src=&#34;/img/album/scq_buildings.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Urban growth of Santiag de Compostela from before 1800 until today. Data: &lt;a href=&#34;https://plugins.qgis.org/plugins/Spanish_Inspire_Catastral_Downloader/&#34; target=&#34;_blank&#34;&gt;Catastro INSPIRE QGIS-Plugin&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the ten busiest airports by passenger traffic in Europe.&#34; href=&#34;/img/album/10airports_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/10airports_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of the ten busiest airports by passenger traffic in Europe based on 24 hour data for each airport. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Sky View Factor of Barcelona.&#34; href=&#34;/img/album/SVF.png&#34;&gt;
    &lt;img src=&#34;/img/album/SVF.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;The Sky View Factor is very useful urban spatial indicator for radiation and thermal environmental assessment. SVF describes how visible is the sky (0: the entire sky is blocked from view; 1: free view on the whole sky). Estimation made using &lt;a href=&#34;http://www.saga-gis.org/&#34; target=&#34;_blank&#34;&gt;SAGA-GIS&lt;/a&gt;. Data: &lt;a href=&#34;http://pnoa.ign.es/presentacion&#34; target=&#34;_blank&#34;&gt;LiDAR-IGN&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight density of the ten busiest airports by passenger traffic in Europe.&#34; href=&#34;/img/album/10airports_vuelos_density.png&#34;&gt;
    &lt;img src=&#34;/img/album/10airports_vuelos_density.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;European flight density based on 24 hour data for each of the ten busiest airports by passenger. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More:  &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the Frankfurt airport.&#34; href=&#34;/img/album/fra_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/fra_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of Frankfurt airport based on 24 hour data. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the busiest airports in the Iberian Peninsula.&#34; href=&#34;/img/album/pi_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/pi_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of the busiest airports in the Iberian Peninsula based on 24 hour data. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the Paris Charles de Gaulle airport.&#34; href=&#34;/img/album/paris_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/paris_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of Paris Charles de Gaulle airport based on 24 hour data. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#39;https://t.co/k6sO2SYjW1&#39;&gt;link&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Urban growth of Madrid from before 1800 until today.&#34; href=&#34;/img/album/mad_buildings.gif&#34;&gt;
    &lt;img src=&#34;/img/album/mad_buildings.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Urban growth of Madrid from before 1800 until today. Data: &lt;a href=&#34;https://plugins.qgis.org/plugins/Spanish_Inspire_Catastral_Downloader/&#34; target=&#34;_blank&#34;&gt;Catastro INSPIRE QGIS-Plugin&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Hours of fishing activity in 2016 in the Iberian Peninsula.&#34; href=&#34;/img/album/pesca2016.png&#34;&gt;
    &lt;img src=&#34;/img/album/pesca2016.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Total hours of fishing activity per km2 for the year 2016 in the Iberian Peninsula. Data: &lt;a href=&#34;https://globalfishingwatch.org/&#34; target=&#34;_blank&#34;&gt;https://globalfishingwatch.org/&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Hours of fishing activity in 2016 in the Mediterranean.&#34; href=&#34;/img/album/pesca2016_med.png&#34;&gt;
    &lt;img src=&#34;/img/album/pesca2016_med.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Total hours of fishing activity per km2 for the year 2016 in the Mediterranean. Data: &lt;a href=&#34;https://globalfishingwatch.org/&#34; target=&#34;_blank&#34;&gt;https://globalfishingwatch.org/&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of gas stations in Europe.&#34; href=&#34;/img/album/europe_fuel.png&#34;&gt;
    &lt;img src=&#34;/img/album/europe_fuel.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of gas stations (Point Of Interest) in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of drinking water in Europe.&#34; href=&#34;/img/album/europe.png&#34;&gt;
    &lt;img src=&#34;/img/album/europe.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of drinking water (Point Of Interest) in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://www.geografiainfinita.com/2017/07/fuentes-de-agua-potable-en-el-mundo/&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;,&lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of gas and charging stations in Europe.&#34; href=&#34;/img/album/eu_fuel.png&#34;&gt;
    &lt;img src=&#34;/img/album/eu_fuel.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of gas and charging stations (Point Of Interest) in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of drinking water in the World.&#34; href=&#34;/img/album/world_drinking.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/world_drinking.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of drinking water (Point Of Interest) in the World, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://www.geografiainfinita.com/2017/07/fuentes-de-agua-potable-en-el-mundo/&#34; target=&#34;_blank&#34;&gt;article (Spanish)&lt;/a&gt;,&lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distance to the sea in the World.&#34; href=&#34;/img/album/global.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/global.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Another perspective on the world. Distance to the sea (the more black, the further away is the sea). Euclidean distance estimation made with R. More: &lt;a href=&#34;https://www.geografiainfinita.com/2017/06/una-radiografia-del-mundo-a-traves-de-la-distancia-al-mar/&#34; target=&#34;_blank&#34;&gt;article (Spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of bars per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/bars.png&#34;&gt;
    &lt;img src=&#34;/img/album/bars.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of bars per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://www.geografiainfinita.com/2018/03/la-distribucion-de-los-restaurantes-en-europa/&#34; target=&#34;_blank&#34;&gt;article (Spanish)&lt;/a&gt;,&lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of Cafes per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/cafes_maps.png&#34;&gt;
    &lt;img src=&#34;/img/album/cafes_maps.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of Cafes per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of building heights at 10 meter resolution in European capitals.&#34; href=&#34;/img/album/CP_buildingheight.png&#34;&gt;
    &lt;img src=&#34;/img/album/CP_buildingheight.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of building heights at 10 meter resolution in European capitals. Data: &lt;a href=&#34;https://land.copernicus.eu/local/urban-atlas/building-height-2012&#34; target=&#34;_blank&#34;&gt;COPERNICUS&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Differences of building heights at 10 meter resolution in European capitals.&#34; href=&#34;/img/album/city_buildingheights.png&#34;&gt;
    &lt;img src=&#34;/img/album/city_buildingheights.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Differences of building heights at 10 meter resolution in European capitals. Data: &lt;a href=&#34;https://land.copernicus.eu/local/urban-atlas/building-height-2012&#34; target=&#34;_blank&#34;&gt;COPERNICUS&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Urban growth of Barcelona from before 1800 until today.&#34; href=&#34;/img/album/bcn_buildings.gif&#34;&gt;
    &lt;img src=&#34;/img/album/bcn_buildings.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Urban growth of Barcelona from before 1800 until today. Data: &lt;a href=&#34;https://plugins.qgis.org/plugins/Spanish_Inspire_Catastral_Downloader/&#34; target=&#34;_blank&#34;&gt;Catastro INSPIRE QGIS-Plugin&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of published articles in ElPaís by year for the term &amp;#39;wildfire&amp;#39;.&#34; href=&#34;/img/album/ElPais_incendios.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/ElPais_incendios.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of published articles in ElPaís by year for the term &amp;lsquo;wildfire&amp;rsquo;. Data: &lt;a href=&#34;https://elpais.com/tag/incendios/a&#34; target=&#34;_blank&#34;&gt;elpais&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of fastfood restaurants in the contiguous United States.&#34; href=&#34;/img/album/fastfood_usatiff.png&#34;&gt;
    &lt;img src=&#34;/img/album/fastfood_usatiff.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of fastfood restaurants in the contiguous United States, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of fastfood restaurants per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/fastfood_map.png&#34;&gt;
    &lt;img src=&#34;/img/album/fastfood_map.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of fastfood restaurants per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of pharmacies per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/pharma_regions.png&#34;&gt;
    &lt;img src=&#34;/img/album/pharma_regions.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of pharmacies per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Open Data Indactor Scores. Spain leads access to Open Data in the EU&#34; href=&#34;/img/album/opendata.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/opendata.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Spain leads access to Open Data in the EU. Data: &lt;a href=&#34;https://www.europeandataportal.eu/en/dashboard#2017&#34; target=&#34;_blank&#34;&gt;europendataportal&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of pubs per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/pubs.png&#34;&gt;
    &lt;img src=&#34;/img/album/pubs.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of pubs per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of fastfood restaurants in Europe.&#34; href=&#34;/img/album/fastfood_eutiff.png&#34;&gt;
    &lt;img src=&#34;/img/album/fastfood_eutiff.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of fastfood restaurants in Europe., extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of restaurants per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/restaurants.png&#34;&gt;
    &lt;img src=&#34;/img/album/restaurants.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of restaurants per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of Kebab restaurants per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/kebab.png&#34;&gt;
    &lt;img src=&#34;/img/album/kebab.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of Kebab restaurants per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Health</title>
      <link>/en/graphs/health/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/graphs/health/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Evolution of adult obesity in Europe between 1975 and 2016.&#34; href=&#34;/img/album/obesity_europe.png&#34;&gt;
    &lt;img src=&#34;/img/album/obesity_europe.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Evolution of adult obesity in Europe between 1975 and 2016. Data: &lt;a href=&#34;https://ourworldindata.org/obesity&#34; target=&#34;_blank&#34;&gt;ourwoldindata&lt;/a&gt;, &lt;a href=&#34;https://github.com/dominicroye/obesity&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;National Overdose Death in the US by different drugs since 1999, showing a horrifying trend.&#34; href=&#34;/img/album/USA_overdose.png&#34;&gt;
    &lt;img src=&#34;/img/album/USA_overdose.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;National Overdose Death in the US by different drugs since 1999, showing a horrifying trend. Data: &lt;a href=&#34;https://ourworldindata.org/&#34; target=&#34;_blank&#34;&gt;ourwoldindata&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Population</title>
      <link>/en/graphs/population/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/graphs/population/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population point clouds of Ourense since 1975.&#34; href=&#34;/img/album/Ourense_pob.gif&#34;&gt;
    &lt;img src=&#34;/img/album/Ourense_pob.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population point clouds of Ourense since 1975. Data: &lt;a href=&#34;http://ige.eu&#34; target=&#34;_blank&#34;&gt;IGE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population pyramid of Galicia since 1975.&#34; href=&#34;/img/album/pop_pyr.gif&#34;&gt;
    &lt;img src=&#34;/img/album/pop_pyr.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population pyramid of Galicia since 1975. Data: &lt;a href=&#34;http://ige.eu&#34; target=&#34;_blank&#34;&gt;IGE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population pyramid of Galician provinces since 1975.&#34; href=&#34;/img/album/pop_pyr_galprov.gif&#34;&gt;
    &lt;img src=&#34;/img/album/pop_pyr_galprov.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population pyramid of Galician provinces since 1975. Data: &lt;a href=&#34;http://ige.eu&#34; target=&#34;_blank&#34;&gt;IGE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population pyramid of Spanish autonomous community since 1998.&#34; href=&#34;/img/album/pop_pyr_ccaa.gif&#34;&gt;
    &lt;img src=&#34;/img/album/pop_pyr_ccaa.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population pyramid of Spanish autonomous community since 1998. Data: &lt;a href=&#34;https://www.ine.es/&#34; target=&#34;_blank&#34;&gt;INE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Migration flows between Spanish autonomous communities in 2008.&#34; href=&#34;/img/album/flux_spain2008.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/flux_spain2008.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Migration flows between Spanish autonomous communities in 2008. Data: &lt;a href=&#34;https://www.ine.es/&#34; target=&#34;_blank&#34;&gt;INE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>How to create &#39;Warming Stripes&#39; in R</title>
      <link>/en/2018/how-to-create-warming-stripes-in-r/</link>
      <pubDate>Wed, 05 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/2018/how-to-create-warming-stripes-in-r/</guid>
      <description>


&lt;p&gt;This year, the so-called &lt;em&gt;warming stripes&lt;/em&gt;, which were created by the scientist &lt;a href=&#34;https://twitter.com/ed_hawkins?lang=es&#34;&gt;Ed Hawkins&lt;/a&gt; of the University of Reading, became very famous all over the world. These graphs represent and communicate climate change in a very illustrative and effective way.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Visualising global temperature change since records began in 1850. Versions for USA, central England &amp;amp; Toronto available too: &lt;a href=&#34;https://t.co/H5Hv9YgZ7v&#34;&gt;https://t.co/H5Hv9YgZ7v&lt;/a&gt; &lt;a href=&#34;https://t.co/YMzdySrr3A&#34;&gt;pic.twitter.com/YMzdySrr3A&lt;/a&gt;&lt;/p&gt;&amp;mdash; Ed Hawkins #ShowYourStripes (@ed_hawkins) &lt;a href=&#34;https://twitter.com/ed_hawkins/status/999242147135188993?ref_src=twsrc%5Etfw&#34;&gt;May 23, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;From his idea, I created strips for examples of Spain, like the next one in Madrid.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;es&#34; dir=&#34;ltr&#34;&gt;&lt;a href=&#34;https://twitter.com/hashtag/Temperatura?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Temperatura&lt;/a&gt; anual en &lt;a href=&#34;https://twitter.com/hashtag/MadridRetiro?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#MadridRetiro&lt;/a&gt; desde 1920 a 2017.  &lt;a href=&#34;https://twitter.com/hashtag/CambioClimatico?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#CambioClimatico&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dataviz&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/ggplot2?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#ggplot2&lt;/a&gt; (idea de &lt;a href=&#34;https://twitter.com/ed_hawkins?ref_src=twsrc%5Etfw&#34;&gt;@ed_hawkins&lt;/a&gt; 🙏) &lt;a href=&#34;https://twitter.com/Divulgameteo?ref_src=twsrc%5Etfw&#34;&gt;@Divulgameteo&lt;/a&gt; &lt;a href=&#34;https://twitter.com/edupenabad?ref_src=twsrc%5Etfw&#34;&gt;@edupenabad&lt;/a&gt; &lt;a href=&#34;https://twitter.com/climayagua?ref_src=twsrc%5Etfw&#34;&gt;@climayagua&lt;/a&gt; &lt;a href=&#34;https://twitter.com/ClimaGroupUB?ref_src=twsrc%5Etfw&#34;&gt;@ClimaGroupUB&lt;/a&gt; &lt;a href=&#34;https://twitter.com/4gotas_com?ref_src=twsrc%5Etfw&#34;&gt;@4gotas_com&lt;/a&gt; &lt;a href=&#34;https://t.co/wmLb5uczpT&#34;&gt;pic.twitter.com/wmLb5uczpT&lt;/a&gt;&lt;/p&gt;&amp;mdash; Dominic Royé (@dr_xeo) &lt;a href=&#34;https://twitter.com/dr_xeo/status/1002954473927561217?ref_src=twsrc%5Etfw&#34;&gt;June 2, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;In this post I will show how you can create these strips in R with the library &lt;em&gt;ggplot2&lt;/em&gt;. Although I must say that there are many ways in R that can lead us to the same result or to a similar one, even within &lt;em&gt;ggplot2&lt;/em&gt;.&lt;/p&gt;
&lt;div id=&#34;data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Data&lt;/h2&gt;
&lt;p&gt;In this case we will use the annual temperatures of Lisbon &lt;a href=&#34;https://data.giss.nasa.gov/gistemp/stdata/&#34;&gt;GISS Surface Temperature Analysis&lt;/a&gt;, homogenized time series, comprising the period from 1880 to 2018. Monthly temperatures or other time series could also be used. The file can be downloaded &lt;a href=&#34;/files/temp_lisboa.csv&#34;&gt;here&lt;/a&gt;. First, we should, as long as we have not done it, install the collection of &lt;em&gt;tidyverse&lt;/em&gt; libraries that also include &lt;em&gt;ggplot2&lt;/em&gt;. In addition, we will need the library &lt;em&gt;lubridate&lt;/em&gt; for the treatment of dates. Then, we import the data of Lisbon in csv format.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install the lubridate and tidyverse libraries
if(!require(&amp;quot;lubridate&amp;quot;)) install.packages(&amp;quot;lubridate&amp;quot;)
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)

#packages
library(tidyverse)
library(lubridate)
library(RColorBrewer)

#import the annual temperatures
temp_lisboa &amp;lt;- read_csv(&amp;quot;temp_lisboa.csv&amp;quot;)

str(temp_lisboa)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;spec_tbl_df&amp;#39;, &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 139 obs. of  18 variables:
##  $ YEAR  : num  1880 1881 1882 1883 1884 ...
##  $ JAN   : num  9.17 11.37 10.07 10.86 11.16 ...
##  $ FEB   : num  12 11.8 11.9 11.5 10.6 ...
##  $ MAR   : num  13.6 14.1 13.5 10.5 12.4 ...
##  $ APR   : num  13.1 14.4 14 13.8 12.2 ...
##  $ MAY   : num  15.7 17.3 15.6 14.6 16.4 ...
##  $ JUN   : num  17 19.2 17.9 17.2 19.1 ...
##  $ JUL   : num  19.1 21.8 20.3 19.5 21.4 ...
##  $ AUG   : num  20.6 23.5 21 21.6 22.4 ...
##  $ SEP   : num  20.7 20 18 18.8 19.5 ...
##  $ OCT   : num  17.9 16.3 16.4 15.8 16.4 ...
##  $ NOV   : num  12.5 14.7 13.7 13.5 12.5 ...
##  $ DEC   : num  11.07 9.97 10.66 9.46 10.25 ...
##  $ D-J-F : num  10.7 11.4 10.6 11 10.4 ...
##  $ M-A-M : num  14.1 15.2 14.3 12.9 13.6 ...
##  $ J-J-A : num  18.9 21.5 19.7 19.4 20.9 ...
##  $ S-O-N : num  17 17 16 16 16.1 ...
##  $ metANN: num  15.2 16.3 15.2 14.8 15.3 ...
##  - attr(*, &amp;quot;spec&amp;quot;)=
##   .. cols(
##   ..   YEAR = col_double(),
##   ..   JAN = col_double(),
##   ..   FEB = col_double(),
##   ..   MAR = col_double(),
##   ..   APR = col_double(),
##   ..   MAY = col_double(),
##   ..   JUN = col_double(),
##   ..   JUL = col_double(),
##   ..   AUG = col_double(),
##   ..   SEP = col_double(),
##   ..   OCT = col_double(),
##   ..   NOV = col_double(),
##   ..   DEC = col_double(),
##   ..   `D-J-F` = col_double(),
##   ..   `M-A-M` = col_double(),
##   ..   `J-J-A` = col_double(),
##   ..   `S-O-N` = col_double(),
##   ..   metANN = col_double()
##   .. )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We see in the columns that we have monthly and seasonal values, and the annual temperature value. But before proceeding to visualize the annual temperature, we must replace the missing values &lt;em&gt;999.9&lt;/em&gt; with &lt;code&gt;NA&lt;/code&gt;, using the &lt;code&gt;ifelse( )&lt;/code&gt; function that evaluates a condition and perform the given argument corresponding to true and false.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#select only the annual temperature and year column
temp_lisboa_yr &amp;lt;- select(temp_lisboa, YEAR, metANN)

#rename the temperature column
temp_lisboa_yr &amp;lt;- rename(temp_lisboa_yr, ta = metANN)

#missing values 999.9
summary(temp_lisboa_yr) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##       YEAR            ta        
##  Min.   :1880   Min.   : 14.53  
##  1st Qu.:1914   1st Qu.: 15.65  
##  Median :1949   Median : 16.11  
##  Mean   :1949   Mean   : 37.38  
##  3rd Qu.:1984   3rd Qu.: 16.70  
##  Max.   :2018   Max.   :999.90&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;temp_lisboa_yr &amp;lt;- mutate(temp_lisboa_yr, ta = ifelse(ta == 999.9, NA, ta))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When we use the year as a variable, we do not usually convert it into a date object, however it is advisable. This allows us to use the date functions of the library &lt;em&gt;lubridate&lt;/em&gt; and the support functions inside of &lt;em&gt;ggplot2&lt;/em&gt;. The &lt;code&gt;str_c( )&lt;/code&gt; function of the library &lt;em&gt;stringr&lt;/em&gt;, part of the collection of &lt;em&gt;tidyverse&lt;/em&gt;, is similar to &lt;code&gt;paste( )&lt;/code&gt; of R Base that allows us to combine characters by specifying a separator (sep = “-”). The &lt;code&gt;ymd( )&lt;/code&gt; (year month day) function of the &lt;em&gt;lubridate&lt;/em&gt; library converts a date character into a &lt;em&gt;Date&lt;/em&gt; object. It is possible to combine several functions using the &lt;em&gt;pipe operator&lt;/em&gt; &lt;code&gt;%&amp;gt;%&lt;/code&gt; that helps to chain without assigning the result to a new object. Its use is very extended especially with the library &lt;em&gt;tidyverse&lt;/em&gt;. If you want to know more about its use, &lt;a href=&#34;https://www.datacamp.com/community/tutorials/pipe-r-tutorial&#34;&gt;here&lt;/a&gt; you have a tutorial.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;temp_lisboa_yr &amp;lt;- mutate(temp_lisboa_yr, date = str_c(YEAR, &amp;quot;01-01&amp;quot;, sep = &amp;quot;-&amp;quot;) %&amp;gt;% ymd())&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;creating-the-strips&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Creating the strips&lt;/h2&gt;
&lt;p&gt;First, we create the style of the graph, specifying all the arguments of the theme we want to adjust. We start with the default style of &lt;code&gt;theme_minimal( )&lt;/code&gt;. In addition, we assign the colors from &lt;em&gt;RColorBrewer&lt;/em&gt; to an object &lt;em&gt;col_srip&lt;/em&gt;. More information about the colors used &lt;a href=&#34;http://colorbrewer2.org&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_strip &amp;lt;- theme_minimal()+
                 theme(axis.text.y = element_blank(),
                       axis.line.y = element_blank(),
                       axis.title = element_blank(),
                       panel.grid.major = element_blank(),
                       legend.title = element_blank(),
                       axis.text.x = element_text(vjust = 3),
                       panel.grid.minor = element_blank(),
                        plot.title = element_text(size = 14, face = &amp;quot;bold&amp;quot;)
                       )


col_strip &amp;lt;- brewer.pal(11, &amp;quot;RdBu&amp;quot;)

brewer.pal.info&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##          maxcolors category colorblind
## BrBG            11      div       TRUE
## PiYG            11      div       TRUE
## PRGn            11      div       TRUE
## PuOr            11      div       TRUE
## RdBu            11      div       TRUE
## RdGy            11      div      FALSE
## RdYlBu          11      div       TRUE
## RdYlGn          11      div      FALSE
## Spectral        11      div      FALSE
## Accent           8     qual      FALSE
## Dark2            8     qual       TRUE
## Paired          12     qual       TRUE
## Pastel1          9     qual      FALSE
## Pastel2          8     qual      FALSE
## Set1             9     qual      FALSE
## Set2             8     qual       TRUE
## Set3            12     qual      FALSE
## Blues            9      seq       TRUE
## BuGn             9      seq       TRUE
## BuPu             9      seq       TRUE
## GnBu             9      seq       TRUE
## Greens           9      seq       TRUE
## Greys            9      seq       TRUE
## Oranges          9      seq       TRUE
## OrRd             9      seq       TRUE
## PuBu             9      seq       TRUE
## PuBuGn           9      seq       TRUE
## PuRd             9      seq       TRUE
## Purples          9      seq       TRUE
## RdPu             9      seq       TRUE
## Reds             9      seq       TRUE
## YlGn             9      seq       TRUE
## YlGnBu           9      seq       TRUE
## YlOrBr           9      seq       TRUE
## YlOrRd           9      seq       TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For the final graphic we use the geometry &lt;code&gt;geom_tile( )&lt;/code&gt;. Since the data does not have a specific value for the Y axis, we need a &lt;em&gt;dummy&lt;/em&gt; value, here I used 1. Also, I adjust the width of the color bar in the legend.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;     ggplot(temp_lisboa_yr,
             aes(x = date, y = 1, fill = ta))+
        geom_tile()+
           scale_x_date(date_breaks = &amp;quot;6 years&amp;quot;,
                     date_labels = &amp;quot;%Y&amp;quot;,
                     expand = c(0, 0))+
           scale_y_continuous(expand = c(0, 0))+
           scale_fill_gradientn(colors = rev(col_strip))+
             guides(fill = guide_colorbar(barwidth = 1))+
            labs(title = &amp;quot;LISBOA 1880-2018&amp;quot;,
                caption = &amp;quot;Datos: GISS Surface Temperature Analysis&amp;quot;)+
              theme_strip&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2018-12-05-how-to-create-warming-stripes-in-r/index.en_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;1152&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In case we want to get only the strips, we can use &lt;code&gt;theme_void( )&lt;/code&gt; and the argument &lt;em&gt;show.legend = FALSE&lt;/em&gt; in &lt;code&gt;geom_tile( )&lt;/code&gt; to remove all style elements. We can also change the color for the &lt;code&gt;NA&lt;/code&gt; values, including the argument &lt;em&gt;na.value = “gray70”&lt;/em&gt; in the &lt;code&gt;scale_fill_gradientn( )&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;     ggplot(temp_lisboa_yr,
             aes(x = date, y = 1, fill = ta))+
        geom_tile(show.legend = FALSE)+
           scale_x_date(date_breaks = &amp;quot;6 years&amp;quot;,
                     date_labels = &amp;quot;%Y&amp;quot;,
                     expand = c(0, 0))+
           scale_y_discrete(expand = c(0, 0))+
           scale_fill_gradientn(colors = rev(col_strip))+
             theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2018-12-05-how-to-create-warming-stripes-in-r/index.en_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;1152&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Accessing OpenStreetMap data with R</title>
      <link>/en/2018/accessing-openstreetmap-data-with-r/</link>
      <pubDate>Sat, 03 Nov 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/2018/accessing-openstreetmap-data-with-r/</guid>
      <description>


&lt;div id=&#34;the-database-of-open-street-maps&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The database of Open Street Maps&lt;/h2&gt;
&lt;p&gt;Recently I created a map of the distribution of gas stations and electric charging stations in Europe.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Population density through the number of gas stations in Europe. &lt;a href=&#34;https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dataviz&lt;/a&gt; &lt;a href=&#34;https://twitter.com/AGE_Oficial?ref_src=twsrc%5Etfw&#34;&gt;@AGE_Oficial&lt;/a&gt; @mipazos &lt;a href=&#34;https://twitter.com/simongerman600?ref_src=twsrc%5Etfw&#34;&gt;@simongerman600&lt;/a&gt; &lt;a href=&#34;https://twitter.com/openstreetmap?ref_src=twsrc%5Etfw&#34;&gt;@openstreetmap&lt;/a&gt; &lt;a href=&#34;https://t.co/eIUx2yn7ej&#34;&gt;pic.twitter.com/eIUx2yn7ej&lt;/a&gt;&lt;/p&gt;&amp;mdash; Dominic Royé (@dr_xeo) &lt;a href=&#34;https://twitter.com/dr_xeo/status/967811548646379521?ref_src=twsrc%5Etfw&#34;&gt;February 25, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;How can you obtain this data?&lt;/p&gt;
&lt;p&gt;Well, in this case I used points of interest (POIs) from the database of &lt;em&gt;Open Street Maps&lt;/em&gt; (OSM). Obviously OSM not only contains streets and highways, but also information that can be useful when we use a map such as locations of hospitals or gas stations. To avoid downloading the entire OSM and extracting the required information, you can use an &lt;em&gt;overpass API&lt;/em&gt;, which allows us to query the OSM database with our own criteria.&lt;/p&gt;
&lt;p&gt;An easy way to access an &lt;em&gt;overpass API&lt;/em&gt; is through &lt;a href=&#34;http://overpass-turbo.eu&#34;&gt;overpass-turbo.eu&lt;/a&gt;, which even includes a wizard to build a query and display the results on a interactive map. A detailed explanation of the previous web can be found &lt;a href=&#34;https://wiki.openstreetmap.org/wiki/ES:Overpass_turbo&#34;&gt;here&lt;/a&gt;. However, we have at our disposal a package &lt;em&gt;osmdata&lt;/em&gt; that allows us to create and make queries directly from the R environment. Nevertheless, the use of the &lt;em&gt;overpass-turbo.eu&lt;/em&gt; can be useful when we are not sure what we are looking for or when we have some difficulty in building the query.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;accessing-the-overpass-api-from-r&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Accessing the overpass API from R&lt;/h2&gt;
&lt;p&gt;The first step is to install several packages, in case they are not installed. In almost all my scripts I use &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;&lt;em&gt;tidyverse&lt;/em&gt;&lt;/a&gt; which is a fundamental collection of different packages, including &lt;em&gt;dplyr&lt;/em&gt; (data manipulation), &lt;em&gt;ggplot2&lt;/em&gt; (visualization), etc. The &lt;a href=&#34;https://r-spatial.github.io/sf/articles/sf1.html&#34;&gt;&lt;em&gt;sf&lt;/em&gt;&lt;/a&gt; package is the new standard for working with spatial data and is compatible with &lt;em&gt;ggplot2&lt;/em&gt; and &lt;em&gt;dplyr&lt;/em&gt;. Finally, &lt;a href=&#34;http://stat405.had.co.nz/ggmap.pdf&#34;&gt;&lt;em&gt;ggmap&lt;/em&gt;&lt;/a&gt; makes it easier for us to create maps.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#install the osmdata, sf, tidyverse and ggmap package
if(!require(&amp;quot;osmdata&amp;quot;)) install.packages(&amp;quot;osmdata&amp;quot;)
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;sf&amp;quot;)) install.packages(&amp;quot;sf&amp;quot;)
if(!require(&amp;quot;ggmap&amp;quot;)) install.packages(&amp;quot;ggmap&amp;quot;)

#load packages
library(tidyverse)
library(osmdata)
library(sf)
library(ggmap)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;build-a-query&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Build a query&lt;/h2&gt;
&lt;p&gt;Before creating a query, we need to know what we can filter. The &lt;code&gt;available_features( )&lt;/code&gt; function returns a list of available OSM features that have different tags. More details are available in the OSM &lt;em&gt;wiki&lt;/em&gt; &lt;a href=&#34;https://wiki.openstreetmap.org/wiki/Map_Features&#34;&gt;here&lt;/a&gt;. For example, the feature &lt;em&gt;shop&lt;/em&gt; contains several tags among others &lt;em&gt;supermarket&lt;/em&gt;, &lt;em&gt;fishing&lt;/em&gt;, &lt;em&gt;books&lt;/em&gt;, etc.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#the first five features
head(available_features())&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;4wd only&amp;quot;  &amp;quot;abandoned&amp;quot; &amp;quot;abutters&amp;quot;  &amp;quot;access&amp;quot;    &amp;quot;addr&amp;quot;      &amp;quot;addr:city&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#amenities
head(available_tags(&amp;quot;amenity&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;animal boarding&amp;quot; &amp;quot;animal shelter&amp;quot;  &amp;quot;archive&amp;quot;         &amp;quot;arts centre&amp;quot;    
## [5] &amp;quot;atm&amp;quot;             &amp;quot;baby hatch&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#shops
head(available_tags(&amp;quot;shop&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;agrarian&amp;quot;  &amp;quot;alcohol&amp;quot;   &amp;quot;anime&amp;quot;     &amp;quot;antiques&amp;quot;  &amp;quot;appliance&amp;quot; &amp;quot;art&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;the-first-query-where-are-cinemas-in-madrid&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;The first query: Where are cinemas in Madrid?&lt;/h3&gt;
&lt;p&gt;To build the query, we use the &lt;em&gt;pipe operator&lt;/em&gt; &lt;code&gt;%&amp;gt;%&lt;/code&gt;, which helps to chain several functions without assigning the result to a new object. Its use is very extended especially within the &lt;em&gt;tidyverse&lt;/em&gt; package collection. If you want to know more about its use, you can find &lt;a href=&#34;https://www.datacamp.com/community/tutorials/pipe-r-tutorial&#34;&gt;here&lt;/a&gt; a tutorial.&lt;/p&gt;
&lt;p&gt;In the first part of the query we need to indicate the place where we want to extract the information. The &lt;code&gt;getbb( )&lt;/code&gt; function creates a boundering box for a given place, looking for the name. The main function is &lt;code&gt;opq( )&lt;/code&gt; which build the final query. We add our filter criteria with the &lt;code&gt;add_osm_feature( )&lt;/code&gt; function. In this first query we will look for cinemas in Madrid. That’s why we use as key &lt;em&gt;amenity&lt;/em&gt; and &lt;em&gt;cinema&lt;/em&gt; as tag. There are several formats to obtain the resulting spatial data of the query. The &lt;code&gt;osmdata_*( )&lt;/code&gt; function sends the query to the server and, depending on the suffix * sf/sp/xml, returns a &lt;em&gt;simple feature&lt;/em&gt;, &lt;em&gt;spatial&lt;/em&gt; or &lt;em&gt;XML&lt;/em&gt; format.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#building the query
q &amp;lt;- getbb(&amp;quot;Madrid&amp;quot;)%&amp;gt;%
      opq()%&amp;gt;%
       add_osm_feature(&amp;quot;amenity&amp;quot;, &amp;quot;cinema&amp;quot;)

str(q) #query structure&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 4
##  $ bbox    : chr &amp;quot;40.3119774,-3.8889539,40.6437293,-3.5179163&amp;quot;
##  $ prefix  : chr &amp;quot;[out:xml][timeout:25];\n(\n&amp;quot;
##  $ suffix  : chr &amp;quot;);\n(._;&amp;gt;;);\nout body;&amp;quot;
##  $ features: chr &amp;quot; [\&amp;quot;amenity\&amp;quot;=\&amp;quot;cinema\&amp;quot;]&amp;quot;
##  - attr(*, &amp;quot;class&amp;quot;)= chr [1:2] &amp;quot;list&amp;quot; &amp;quot;overpass_query&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cinema &amp;lt;- osmdata_sf(q)
cinema&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Object of class &amp;#39;osmdata&amp;#39; with:
##                  $bbox : 40.3119774,-3.8889539,40.6437293,-3.5179163
##         $overpass_call : The call submitted to the overpass API
##                  $meta : metadata including timestamp and version numbers
##            $osm_points : &amp;#39;sf&amp;#39; Simple Features Collection with 195 points
##             $osm_lines : NULL
##          $osm_polygons : &amp;#39;sf&amp;#39; Simple Features Collection with 12 polygons
##        $osm_multilines : NULL
##     $osm_multipolygons : NULL&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We see that the result is a list of different spatial objects. In our case, we are only interested in &lt;em&gt;osm_points&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;How can we visulise these points?&lt;/p&gt;
&lt;p&gt;The advantage of &lt;em&gt;sf&lt;/em&gt; objects is that for &lt;em&gt;ggplot2&lt;/em&gt; already exists a geometry function &lt;code&gt;geom_sf( )&lt;/code&gt;. Furthermore, we can include a background map using &lt;em&gt;ggmap&lt;/em&gt;. The &lt;code&gt;get_map( )&lt;/code&gt; function downloads the map for a given place. Alternatively, it can be an address, latitude/longitude or a bounding box. The &lt;em&gt;maptype&lt;/em&gt; argument allows us to indicate the style or type of map. You can find more details in the help of the &lt;code&gt;?get_map&lt;/code&gt; function.&lt;/p&gt;
&lt;p&gt;When we build a graph with &lt;em&gt;ggplot&lt;/em&gt; we usually start with &lt;code&gt;ggplot( )&lt;/code&gt;. In this case, we start with &lt;code&gt;ggmap( )&lt;/code&gt; that includes the object with our background map. Then we add with &lt;code&gt;geom_sf( )&lt;/code&gt; the points of the cinemas in Madrid. It is important to indicate with the argument &lt;em&gt;inherit.aes = FALSE&lt;/em&gt; that it has to use the &lt;em&gt;aesthetic mappings&lt;/em&gt; of the spatial object &lt;em&gt;osm_points&lt;/em&gt;. In addition, we change the color, fill, transparency (&lt;em&gt;alpha&lt;/em&gt;), type and size of the circles.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#our background map
mad_map &amp;lt;- get_map(getbb(&amp;quot;Madrid&amp;quot;),maptype = &amp;quot;toner-background&amp;quot;)

#final map
ggmap(mad_map)+
  geom_sf(data=cinema$osm_points,
          inherit.aes =FALSE,
          colour=&amp;quot;#238443&amp;quot;,
          fill=&amp;quot;#004529&amp;quot;,
          alpha=.5,
          size=4,
          shape=21)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2018-11-03-accessing-osm-data-with-r/index.en_files/figure-html/fig.width==5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;where-can-we-find-mercadona-supermarkets&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Where can we find Mercadona supermarkets?&lt;/h3&gt;
&lt;p&gt;Instead of obtaining a bounding box with the function &lt;em&gt;getbb( )&lt;/em&gt; we can build our own box. To do this, we create a matrix of two columns, the order has to be East/West/South/North. In the query we use two features: &lt;em&gt;name&lt;/em&gt; and &lt;em&gt;shop&lt;/em&gt; to filter supermarkets that are of this particular brand. Depending on the area or volume of the query, it is necessary to extend the waiting time. By default, the limit is set at 25 seconds (&lt;em&gt;timeout&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;The map, we create in this case, consists only of the supermarket points. Therefore, we use the usual grammar by adding the geometry &lt;code&gt;geom_sf( )&lt;/code&gt;. The &lt;code&gt;theme_void( )&lt;/code&gt; function removes everything except for the points. By default, the object &lt;em&gt;sf&lt;/em&gt; in &lt;em&gt;ggplot&lt;/em&gt; creates reticles, that can be removed using the &lt;code&gt;coord_sf( )&lt;/code&gt; function with the argument &lt;em&gt;datum = NA&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#bounding box for the Iberian Peninsula
m &amp;lt;- matrix(c(-10,5,30,46),ncol=2,byrow=TRUE)
row.names(m) &amp;lt;- c(&amp;quot;x&amp;quot;,&amp;quot;y&amp;quot;)
names(m) &amp;lt;- c(&amp;quot;min&amp;quot;,&amp;quot;max&amp;quot;)

#building the query
q &amp;lt;- m %&amp;gt;% 
      opq (timeout=25*100) %&amp;gt;%
         add_osm_feature(&amp;quot;name&amp;quot;,&amp;quot;Mercadona&amp;quot;)%&amp;gt;%
         add_osm_feature(&amp;quot;shop&amp;quot;,&amp;quot;supermarket&amp;quot;)

#query
mercadona &amp;lt;- osmdata_sf(q)

#final map
ggplot(mercadona$osm_points)+
  geom_sf(colour=&amp;quot;#08519c&amp;quot;,
          fill=&amp;quot;#08306b&amp;quot;,
          alpha=.5,
          size=1,
          shape=21)+
  coord_sf(datum=NA)+
  theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/en/2018-11-03-accessing-osm-data-with-r/index.en_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Spatio-temporal variations of cloud fraction based on circulation types in the Iberian Peninsula</title>
      <link>/en/publication/cloudiness_ip_2018/</link>
      <pubDate>Thu, 01 Nov 2018 00:00:00 +0000</pubDate>
      
      <guid>/en/publication/cloudiness_ip_2018/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
