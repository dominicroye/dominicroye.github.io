<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dominic Royé on Dominic Royé</title>
    <link>/es/</link>
    <description>Recent content in Dominic Royé on Dominic Royé</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>&amp;copy; 2018-2019 Dominic Royé. All rights reserved.</copyright>
    <lastBuildDate>Sun, 15 Oct 2017 00:00:00 +0100</lastBuildDate>
    <atom:link href="/es/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Os tempos e o clima de Galicia</title>
      <link>/es/publication/os_tempos_2019/</link>
      <pubDate>Thu, 13 Jun 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/publication/os_tempos_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Resumir tests de correlaciones en R</title>
      <link>/es/2019/resumir-tests-de-correlaciones-en-r/</link>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/2019/resumir-tests-de-correlaciones-en-r/</guid>
      <description>


&lt;p&gt;Cuando pretendemos estimar la correlación entre múltiples variables, la tarea se complica para obtener un resultado simple y limpio. Una forma sencilla es usar la función &lt;code&gt;tidy()&lt;/code&gt; del paquete &lt;em&gt;{broom}&lt;/em&gt;. Como ejemplo, en este post vamos a estimar la correlación entre la precipitación anual de varias ciudades españolas y varios índices de teleconexiones climáticas: &lt;a href=&#34;/files/teleconnections_indices.zip&#34;&gt;descarga&lt;/a&gt;. Los datos de las teleconexiones están preprocesados, pero pueden ser descargados directamente desde &lt;a href=&#34;https://crudata.uea.ac.uk/cru/data/pci.htm&#34;&gt;crudata.uea.ac.uk&lt;/a&gt;. La preciptiación diaria proviene de &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&#34;paquetes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Paquetes&lt;/h2&gt;
&lt;p&gt;En este post usaremos los siguientes paquetes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Paquete&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Descripción&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;tidyverse&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Conjunto de paquetes (visualización y manipulación de datos): ggplot2, dplyr, purrr,etc.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;broom&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Convierte resultados de funciones estadísticas (lm, t.test, cor.test, etc.) en bonitas tablas&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;fs&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Proporciona una interfaz uniforme y multiplataforma para las operaciones del sistema de archivos&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;lubridate&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Fácil manipulación de fechas y tiempos&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#instalamos los paquetes si hace falta
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;broom&amp;quot;)) install.packages(&amp;quot;broom&amp;quot;)
if(!require(&amp;quot;fs&amp;quot;)) install.packages(&amp;quot;fs&amp;quot;)
if(!require(&amp;quot;lubridate&amp;quot;)) install.packages(&amp;quot;lubridate&amp;quot;)

#paquetes
library(tidyverse)
library(broom)
library(fs)
library(lubridate)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;importar-datos&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Importar datos&lt;/h2&gt;
&lt;p&gt;Primero debemos importar la precipitación diaria de las estaciones meteorológicas seleccionadas.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Creamos un vector con todos los archivos de precipitación con la función &lt;code&gt;dir_ls()&lt;/code&gt; del paquete &lt;em&gt;{fs}&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;Importamos los datos con ayuda de la función &lt;code&gt;map_df()&lt;/code&gt; del paquete &lt;em&gt;{purrr}&lt;/em&gt; que aplica otra función a un vector o lista, y los une en una única tabla.&lt;/li&gt;
&lt;li&gt;&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;Seleccionamos únicamente las columnas que nos interesan, b) Convertimos la fecha en objeto &lt;em&gt;date&lt;/em&gt; con la función &lt;code&gt;ymd()&lt;/code&gt; del paquete &lt;em&gt;{lubridate}&lt;/em&gt;, c) Creamos una nueva columna &lt;em&gt;yr&lt;/em&gt; con el año, d) Dividimos la precipitación entre 10 y reclasificamos valores ausentes -9999 por NA, e) Por último, reclasificamos la ID de cada estación meteorológica, creando un factor con nuevas etiquetas.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Más detalles sobre el uso de las funciones &lt;code&gt;dir_ls()&lt;/code&gt; y &lt;code&gt;map_df()&lt;/code&gt; en este último &lt;a href=&#34;https://dominicroye.github.io/es/2019/importar-varias-hojas-excel-en-r/&#34;&gt;post&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#archivos de la precipitación
files &amp;lt;- dir_ls(regexp = &amp;quot;txt&amp;quot;)
files&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## RR_STAID001393.txt RR_STAID001394.txt RR_STAID002969.txt 
## RR_STAID003946.txt RR_STAID003969.txt&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#importamos todos, uniéndolos en una única tabla
pr &amp;lt;- files %&amp;gt;% map_df(read_csv, skip = 20)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )
## Parsed with column specification:
## cols(
##   STAID = col_double(),
##   SOUID = col_double(),
##   DATE = col_double(),
##   RR = col_double(),
##   Q_RR = col_double()
## )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 133,343 x 5
##    STAID SOUID     DATE    RR  Q_RR
##    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1  1393 20611 19470301     0     0
##  2  1393 20611 19470302     5     0
##  3  1393 20611 19470303     0     0
##  4  1393 20611 19470304    33     0
##  5  1393 20611 19470305    15     0
##  6  1393 20611 19470306     0     0
##  7  1393 20611 19470307    85     0
##  8  1393 20611 19470308     3     0
##  9  1393 20611 19470309     0     0
## 10  1393 20611 19470310     0     0
## # ... with 133,333 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#creamos los niveles del factor 
id &amp;lt;- unique(pr$STAID)

#las etiquetas correspondientes
lab &amp;lt;- c(&amp;quot;Bilbao&amp;quot;, &amp;quot;Santiago&amp;quot;, &amp;quot;Barcelona&amp;quot;, &amp;quot;Madrid&amp;quot;, &amp;quot;Valencia&amp;quot;)

#primeros cambios
pr &amp;lt;- select(pr, STAID, DATE, RR)%&amp;gt;% 
        mutate(DATE = ymd(DATE), 
               RR = ifelse(RR == -9999, NA, RR/10), 
               STAID = factor(STAID, id, lab), 
               yr = year(DATE)) 
pr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 133,343 x 4
##    STAID  DATE          RR    yr
##    &amp;lt;fct&amp;gt;  &amp;lt;date&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Bilbao 1947-03-01   0    1947
##  2 Bilbao 1947-03-02   0.5  1947
##  3 Bilbao 1947-03-03   0    1947
##  4 Bilbao 1947-03-04   3.3  1947
##  5 Bilbao 1947-03-05   1.5  1947
##  6 Bilbao 1947-03-06   0    1947
##  7 Bilbao 1947-03-07   8.5  1947
##  8 Bilbao 1947-03-08   0.3  1947
##  9 Bilbao 1947-03-09   0    1947
## 10 Bilbao 1947-03-10   0    1947
## # ... with 133,333 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Lo que todavía nos hace falta es filtrar y calcular la suma anual de precipitación. En principio, no es lo más correcto sumar la precipitación sin tener en cuenta que haya valores ausentes, pero nos sirve igualmente para este ensayo. Después, cambiamos el formato de la tabla con la función &lt;code&gt;spread()&lt;/code&gt;, pasando de una tabla larga a una ancha, es decir, queremos obtener una columna por estación meteorológica.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pr_yr &amp;lt;- filter(pr, DATE &amp;gt;= &amp;quot;1950-01-01&amp;quot;, DATE &amp;lt; &amp;quot;2018-01-01&amp;quot;) %&amp;gt;%
           group_by(STAID, yr) %&amp;gt;%
             summarise(pr = sum(RR, na.rm = TRUE))
pr_yr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 324 x 3
## # Groups:   STAID [5]
##    STAID     yr    pr
##    &amp;lt;fct&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 Bilbao  1950 1342 
##  2 Bilbao  1951 1306.
##  3 Bilbao  1952 1355.
##  4 Bilbao  1953 1372.
##  5 Bilbao  1954 1428.
##  6 Bilbao  1955 1062.
##  7 Bilbao  1956 1254.
##  8 Bilbao  1957  968.
##  9 Bilbao  1958 1272.
## 10 Bilbao  1959 1450.
## # ... with 314 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pr_yr &amp;lt;- spread(pr_yr, STAID, pr)
pr_yr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 68 x 6
##       yr Bilbao Santiago Barcelona Madrid Valencia
##    &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
##  1  1950  1342     1800.      345     NA        NA
##  2  1951  1306.    2344.     1072.   798.       NA
##  3  1952  1355.    1973.      415.   524.       NA
##  4  1953  1372.     973.      683.   365.       NA
##  5  1954  1428.    1348.      581.   246.       NA
##  6  1955  1062.    1769.      530.   473.       NA
##  7  1956  1254.    1533.      695.   480.       NA
##  8  1957   968.    1599.      635.   424.       NA
##  9  1958  1272.    2658.      479.   482.       NA
## 10  1959  1450.    2847.     1006    665.       NA
## # ... with 58 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;El siguiente paso es importar los índices de las teleconexiones.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#teleconexiones
telecon &amp;lt;- read_csv(&amp;quot;teleconnections_indices.csv&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Parsed with column specification:
## cols(
##   yr = col_double(),
##   NAO = col_double(),
##   WeMO = col_double(),
##   EA = col_double(),
##   `POL-EUAS` = col_double(),
##   `EATL/WRUS` = col_double(),
##   MO = col_double(),
##   SCAND = col_double(),
##   AO = col_double()
## )&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;telecon&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 68 x 9
##       yr   NAO   WeMO     EA `POL-EUAS` `EATL/WRUS`    MO    SCAND       AO
##    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;      &amp;lt;dbl&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;
##  1  1950  0.49  0.555 -0.332     0.0217     -0.0567 0.335  0.301   -1.99e-1
##  2  1951 -0.07  0.379 -0.372     0.402      -0.419  0.149 -0.00667 -3.65e-1
##  3  1952 -0.37  0.693 -0.688    -0.0117     -0.711  0.282  0.0642  -6.75e-1
##  4  1953  0.4  -0.213 -0.727    -0.0567     -0.0508 0.216  0.0233  -1.64e-2
##  5  1954  0.51  1.20  -0.912     0.142      -0.318  0.386  0.458   -5.83e-4
##  6  1955 -0.64  0.138 -0.824    -0.0267      0.154  0.134  0.0392  -3.62e-1
##  7  1956  0.17  0.617 -1.29     -0.197       0.0617 0.256  0.302   -1.63e-1
##  8  1957 -0.02  0.321 -0.952    -0.638      -0.167  0.322 -0.134   -3.42e-1
##  9  1958  0.12  0.941 -0.243     0.138       0.661  0.296  0.279   -8.68e-1
## 10  1959  0.49 -0.055 -0.23     -0.0142      0.631  0.316  0.725   -7.62e-2
## # ... with 58 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por último nos falta unir ambas tablas por año.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_all &amp;lt;- left_join(pr_yr, telecon, by = &amp;quot;yr&amp;quot;)
data_all&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 68 x 14
##       yr Bilbao Santiago Barcelona Madrid Valencia   NAO   WeMO     EA
##    &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;
##  1  1950  1342     1800.      345     NA        NA  0.49  0.555 -0.332
##  2  1951  1306.    2344.     1072.   798.       NA -0.07  0.379 -0.372
##  3  1952  1355.    1973.      415.   524.       NA -0.37  0.693 -0.688
##  4  1953  1372.     973.      683.   365.       NA  0.4  -0.213 -0.727
##  5  1954  1428.    1348.      581.   246.       NA  0.51  1.20  -0.912
##  6  1955  1062.    1769.      530.   473.       NA -0.64  0.138 -0.824
##  7  1956  1254.    1533.      695.   480.       NA  0.17  0.617 -1.29 
##  8  1957   968.    1599.      635.   424.       NA -0.02  0.321 -0.952
##  9  1958  1272.    2658.      479.   482.       NA  0.12  0.941 -0.243
## 10  1959  1450.    2847.     1006    665.       NA  0.49 -0.055 -0.23 
## # ... with 58 more rows, and 5 more variables: `POL-EUAS` &amp;lt;dbl&amp;gt;,
## #   `EATL/WRUS` &amp;lt;dbl&amp;gt;, MO &amp;lt;dbl&amp;gt;, SCAND &amp;lt;dbl&amp;gt;, AO &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;test-de-correlacion&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Test de correlación&lt;/h2&gt;
&lt;p&gt;Un test de correlación lo podemos hacer con la función &lt;code&gt;cor.test()&lt;/code&gt; de &lt;em&gt;R Base&lt;/em&gt;. En este caso entre la precipitación anual de Bilbao y el índice de NAO.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cor_nao_bil &amp;lt;- cor.test(data_all$Bilbao, data_all$NAO,
                        method=&amp;quot;spearman&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in cor.test.default(data_all$Bilbao, data_all$NAO, method =
## &amp;quot;spearman&amp;quot;): Cannot compute exact p-value with ties&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cor_nao_bil&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##  Spearman&amp;#39;s rank correlation rho
## 
## data:  data_all$Bilbao and data_all$NAO
## S = 44372, p-value = 0.2126
## alternative hypothesis: true rho is not equal to 0
## sample estimates:
##       rho 
## 0.1531149&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(cor_nao_bil)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 8
##  $ statistic  : Named num 44372
##   ..- attr(*, &amp;quot;names&amp;quot;)= chr &amp;quot;S&amp;quot;
##  $ parameter  : NULL
##  $ p.value    : num 0.213
##  $ estimate   : Named num 0.153
##   ..- attr(*, &amp;quot;names&amp;quot;)= chr &amp;quot;rho&amp;quot;
##  $ null.value : Named num 0
##   ..- attr(*, &amp;quot;names&amp;quot;)= chr &amp;quot;rho&amp;quot;
##  $ alternative: chr &amp;quot;two.sided&amp;quot;
##  $ method     : chr &amp;quot;Spearman&amp;#39;s rank correlation rho&amp;quot;
##  $ data.name  : chr &amp;quot;data_all$Bilbao and data_all$NAO&amp;quot;
##  - attr(*, &amp;quot;class&amp;quot;)= chr &amp;quot;htest&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vemos que el resultado está en un formato poco manejable. Nos resume la correlación con todos los parametros estadísticos necesarios para sacar una conclusión sobre la relación. La estructura orginal es una lista de vectores. No obstante, la función &lt;code&gt;tidy()&lt;/code&gt; del paquete &lt;em&gt;{broom}&lt;/em&gt; nos permite convertir el resultado en formato de tabla.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tidy(cor_nao_bil)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 5
##   estimate statistic p.value method                          alternative
##      &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;                           &amp;lt;chr&amp;gt;      
## 1    0.153    44372.   0.213 Spearman&amp;#39;s rank correlation rho two.sided&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;aplicar-el-test-de-correlacion-a-multiples-variables&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Aplicar el test de correlación a múltiples variables&lt;/h2&gt;
&lt;p&gt;El objetivo es aplicar el test de correlación a todas las estaciones meteorológicas e índices de teleconexión.&lt;/p&gt;
&lt;p&gt;Primero, debemos pasar la tabla al formato largo, o sea, crear una columna de la ciudad y el valor de la precipitación correspondiente. Después lo repetimos para las teleconexiones.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data &amp;lt;- gather(data_all, city, pr, Bilbao:Valencia) %&amp;gt;%
                     gather(telecon, index, NAO:AO)
data&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2,720 x 5
##       yr city      pr telecon index
##    &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;dbl&amp;gt;
##  1  1950 Bilbao 1342  NAO      0.49
##  2  1951 Bilbao 1306. NAO     -0.07
##  3  1952 Bilbao 1355. NAO     -0.37
##  4  1953 Bilbao 1372. NAO      0.4 
##  5  1954 Bilbao 1428. NAO      0.51
##  6  1955 Bilbao 1062. NAO     -0.64
##  7  1956 Bilbao 1254. NAO      0.17
##  8  1957 Bilbao  968. NAO     -0.02
##  9  1958 Bilbao 1272. NAO      0.12
## 10  1959 Bilbao 1450. NAO      0.49
## # ... with 2,710 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para poder aplicar el test a todas las ciudades, debemos tener las correspondientes agrupaciones. Por ello, usamos la función &lt;code&gt;group_by()&lt;/code&gt; indicando los dos grupos (&lt;em&gt;city&lt;/em&gt; y &lt;em&gt;telecon&lt;/em&gt;), y además, aplicamos la función &lt;code&gt;nest()&lt;/code&gt; del paquete &lt;em&gt;{tidyr}&lt;/em&gt;, colección &lt;em&gt;{tidyverse}&lt;/em&gt;, con el objetivo de crear listas de tablas encajadas por fila. En otras palabras, en cada fila de cada ciudad y teleconexión tendremos una nueva tabla que contiene correspondientemente el año, la precipitación y el valor del índice.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_nest &amp;lt;- group_by(data, city, telecon) %&amp;gt;% nest()
data_nest&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 3
##    city      telecon data             
##    &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;   &amp;lt;list&amp;gt;           
##  1 Bilbao    NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  2 Santiago  NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  3 Barcelona NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  4 Madrid    NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  5 Valencia  NAO     &amp;lt;tibble [68 x 3]&amp;gt;
##  6 Bilbao    WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
##  7 Santiago  WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
##  8 Barcelona WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
##  9 Madrid    WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
## 10 Valencia  WeMO    &amp;lt;tibble [68 x 3]&amp;gt;
## # ... with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(slice(data_nest, 1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    1 obs. of  3 variables:
##  $ city   : chr &amp;quot;Bilbao&amp;quot;
##  $ telecon: chr &amp;quot;NAO&amp;quot;
##  $ data   :List of 1
##   ..$ :Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 68 obs. of  3 variables:
##   .. ..$ yr   : num  1950 1951 1952 1953 1954 ...
##   .. ..$ pr   : num  1342 1306 1355 1372 1428 ...
##   .. ..$ index: num  0.49 -0.07 -0.37 0.4 0.51 -0.64 0.17 -0.02 0.12 0.49 ...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;El siguiente paso es crear una función, en la que definimos el test de correlación y lo pasamos al formato limpio, que aplicamos a cada agrupación.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cor_fun &amp;lt;- function(df) cor.test(df$pr, df$index, method=&amp;quot;spearman&amp;quot;) %&amp;gt;% tidy()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora sólo nos queda por aplicar nuestra función a la columna que contiene las tablas por cada combinación entre ciudad y teleconexión. Para ello, usamos la función &lt;code&gt;map()&lt;/code&gt; que aplica otra función sobre un vector o lista. Lo que hacemos es crear una nueva columna que contiene el resultado, una tabla del resumen estadístico, por cada fila de cada combinación.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_nest &amp;lt;- mutate(data_nest, model = map(data, cor_fun))
data_nest&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 4
##    city      telecon data              model           
##    &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;   &amp;lt;list&amp;gt;            &amp;lt;list&amp;gt;          
##  1 Bilbao    NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  2 Santiago  NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  3 Barcelona NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  4 Madrid    NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  5 Valencia  NAO     &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  6 Bilbao    WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  7 Santiago  WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  8 Barcelona WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
##  9 Madrid    WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
## 10 Valencia  WeMO    &amp;lt;tibble [68 x 3]&amp;gt; &amp;lt;tibble [1 x 5]&amp;gt;
## # ... with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str(slice(data_nest, 1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    1 obs. of  4 variables:
##  $ city   : chr &amp;quot;Bilbao&amp;quot;
##  $ telecon: chr &amp;quot;NAO&amp;quot;
##  $ data   :List of 1
##   ..$ :Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 68 obs. of  3 variables:
##   .. ..$ yr   : num  1950 1951 1952 1953 1954 ...
##   .. ..$ pr   : num  1342 1306 1355 1372 1428 ...
##   .. ..$ index: num  0.49 -0.07 -0.37 0.4 0.51 -0.64 0.17 -0.02 0.12 0.49 ...
##  $ model  :List of 1
##   ..$ :Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 1 obs. of  5 variables:
##   .. ..$ estimate   : num 0.153
##   .. ..$ statistic  : num 44372
##   .. ..$ p.value    : num 0.213
##   .. ..$ method     : chr &amp;quot;Spearman&amp;#39;s rank correlation rho&amp;quot;
##   .. ..$ alternative: chr &amp;quot;two.sided&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;¿Cómo podemos deshacer la lista de tablas en cada fila de nuestra tabla?&lt;/p&gt;
&lt;p&gt;Pues bien, primero eliminamos la columna con los datos y después aplicamos simplemente la función &lt;code&gt;unnest()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;corr_pr &amp;lt;- select(data_nest, -data) %&amp;gt;% unnest()
corr_pr&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 40 x 7
##    city    telecon estimate statistic  p.value method           alternative
##    &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;            &amp;lt;chr&amp;gt;      
##  1 Bilbao  NAO       0.153     44372. 0.213    Spearman&amp;#39;s rank~ two.sided  
##  2 Santia~ NAO      -0.181     61902. 0.139    Spearman&amp;#39;s rank~ two.sided  
##  3 Barcel~ NAO      -0.0203    53460. 0.869    Spearman&amp;#39;s rank~ two.sided  
##  4 Madrid  NAO      -0.291     64692. 0.0169   Spearman&amp;#39;s rank~ two.sided  
##  5 Valenc~ NAO      -0.113     27600. 0.422    Spearman&amp;#39;s rank~ two.sided  
##  6 Bilbao  WeMO      0.404     31242. 0.000706 Spearman&amp;#39;s rank~ two.sided  
##  7 Santia~ WeMO      0.332     35014. 0.00594  Spearman&amp;#39;s rank~ two.sided  
##  8 Barcel~ WeMO      0.0292    50862  0.813    Spearman&amp;#39;s rank~ two.sided  
##  9 Madrid  WeMO      0.109     44660  0.380    Spearman&amp;#39;s rank~ two.sided  
## 10 Valenc~ WeMO     -0.252     31056. 0.0688   Spearman&amp;#39;s rank~ two.sided  
## # ... with 30 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;El resultado es una tabla en la que podemos ver las correlaciones y su significación estadística para cada ciudad y teleconexiones.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;heatmap-de-los-resultados&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Heatmap de los resultados&lt;/h2&gt;
&lt;p&gt;Finalmente, hacemos un &lt;em&gt;heatmap&lt;/em&gt; del resultado obtenido. Antes creamos una columna que indica si la correlación es significativa con p-valor menor de 0,05.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;corr_pr &amp;lt;- mutate(corr_pr, sig = ifelse(p.value &amp;lt; 0.05, &amp;quot;Sig.&amp;quot;, &amp;quot;Non Sig.&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot()+
  geom_tile(data = corr_pr,
            aes(city, telecon, fill = estimate),
            size = 1,
            colour = &amp;quot;white&amp;quot;)+
  geom_tile(data = filter(corr_pr, sig == &amp;quot;Sig.&amp;quot;),
            aes(city, telecon),
            size = 1,
            colour = &amp;quot;black&amp;quot;,
            fill = &amp;quot;transparent&amp;quot;)+
  geom_text(data = corr_pr,
            aes(city, telecon, label = round(estimate, 2),
            fontface = ifelse(sig == &amp;quot;Sig.&amp;quot;, &amp;quot;bold&amp;quot;, &amp;quot;plain&amp;quot;)))+
  scale_fill_gradient2(breaks = seq(-1, 1, 0.2))+
  labs(x = &amp;quot;&amp;quot;, y = &amp;quot;&amp;quot;, fill = &amp;quot;&amp;quot;, p.value = &amp;quot;&amp;quot;)+
  theme_minimal()+
  theme(panel.grid.major = element_blank(),
        panel.border = element_blank(),
        panel.background = element_blank(),
        axis.ticks = element_blank())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-04-17-resumir-tests-correlaciones-en-r/index.es_files/figure-html/unnamed-chunk-15-1.png&#34; width=&#34;2100&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>synoptReg: An R package for computing a synoptic climate classification and a spatial regionalization of environmental data</title>
      <link>/es/publication/synoptreg_2019/</link>
      <pubDate>Mon, 15 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/publication/synoptreg_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>A time series analysis of the relationship between Apparent Temperature, Air Pollutants and Ischemic Stroke in Madrid, Spain</title>
      <link>/es/publication/ictus_madrid_2019/</link>
      <pubDate>Mon, 01 Apr 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/publication/ictus_madrid_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Importar varias hojas Excel en R</title>
      <link>/es/2019/importar-varias-hojas-excel-en-r/</link>
      <pubDate>Sun, 10 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/2019/importar-varias-hojas-excel-en-r/</guid>
      <description>


&lt;p&gt;Cuando trabajamos con diferentes fuentes de datos, nos podemos encontrar con tablas distrubidas sobre varias hojas de Excel. En este post vamos a importar la temperatura media diaria de Madrid y Berlín que se encuentra en dos archvios de Excel con hojas para cada año entre 2000 y 2005: &lt;a href=&#34;/files/Data_Excel.zip&#34;&gt;descarga&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&#34;paquetes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Paquetes&lt;/h2&gt;
&lt;p&gt;En este post usaremos los siguientes paquetes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Paquete&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Descripción&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;tidyverse&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Conjunto de paquetes (visualización y manipulación de datos): ggplot2, dplyr, purrr,etc.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;fs&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Proporciona una interfaz uniforme y multiplataforma para las operaciones del sistema de archivos&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;readxl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Importar archivos Excel&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#instalamos los paquetes si hace falta
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;fs&amp;quot;)) install.packages(&amp;quot;fs&amp;quot;)
if(!require(&amp;quot;readxl&amp;quot;)) install.packages(&amp;quot;readxl&amp;quot;)


#paquetes
library(tidyverse)
library(fs)
library(readxl)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por defecto, la función &lt;code&gt;read_excel()&lt;/code&gt; importa la primera hoja. Para importar una hoja diferente es necesario indicarlo con el argumento &lt;em&gt;sheet&lt;/em&gt; o bien el número o el nombre (segundo argumento).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#importar primera hoja
read_excel(&amp;quot;madrid_temp.xlsx&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 366 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   5.4  2000
##  2 2000-01-02 00:00:00   5    2000
##  3 2000-01-03 00:00:00   3.5  2000
##  4 2000-01-04 00:00:00   4.3  2000
##  5 2000-01-05 00:00:00   0.6  2000
##  6 2000-01-06 00:00:00   3.8  2000
##  7 2000-01-07 00:00:00   6.2  2000
##  8 2000-01-08 00:00:00   5.4  2000
##  9 2000-01-09 00:00:00   5.5  2000
## 10 2000-01-10 00:00:00   4.8  2000
## # ... with 356 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#importar hoja 3
read_excel(&amp;quot;madrid_temp.xlsx&amp;quot;, 3)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 365 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2002-01-01 00:00:00   8.7  2002
##  2 2002-01-02 00:00:00   7.4  2002
##  3 2002-01-03 00:00:00   8.5  2002
##  4 2002-01-04 00:00:00   9.2  2002
##  5 2002-01-05 00:00:00   9.3  2002
##  6 2002-01-06 00:00:00   7.3  2002
##  7 2002-01-07 00:00:00   5.4  2002
##  8 2002-01-08 00:00:00   5.6  2002
##  9 2002-01-09 00:00:00   6.8  2002
## 10 2002-01-10 00:00:00   6.1  2002
## # ... with 355 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;La función &lt;code&gt;excel_sheets()&lt;/code&gt; permite extraer los nombres de las hojas.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

path %&amp;gt;%
  excel_sheets()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2000&amp;quot; &amp;quot;2001&amp;quot; &amp;quot;2002&amp;quot; &amp;quot;2003&amp;quot; &amp;quot;2004&amp;quot; &amp;quot;2005&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;El resultado nos indica que en cada hoja encontramos un año de los datos desde 2000 a 2005. La función más importante para leer múltiples hojas es &lt;code&gt;map()&lt;/code&gt; del paquete &lt;em&gt;{purrr}&lt;/em&gt; que forma parte de la colección de paquetes &lt;em&gt;{tidyverse}&lt;/em&gt;. &lt;code&gt;map()&lt;/code&gt; permite aplicar una función a cada elemento de un vector o lista.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

mad &amp;lt;- path %&amp;gt;%
        excel_sheets() %&amp;gt;%
        set_names() %&amp;gt;%
       map(read_excel,
           path = path)
        
str(mad)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 6
##  $ 2000:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    366 obs. of  3 variables:
##   ..$ date: POSIXct[1:366], format: &amp;quot;2000-01-01&amp;quot; ...
##   ..$ ta  : num [1:366] 5.4 5 3.5 4.3 0.6 3.8 6.2 5.4 5.5 4.8 ...
##   ..$ yr  : num [1:366] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...
##  $ 2001:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2001-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 8.2 8.8 7.5 9.2 10 9 5.5 4.6 3 7.9 ...
##   ..$ yr  : num [1:365] 2001 2001 2001 2001 2001 ...
##  $ 2002:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2002-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 8.7 7.4 8.5 9.2 9.3 7.3 5.4 5.6 6.8 6.1 ...
##   ..$ yr  : num [1:365] 2002 2002 2002 2002 2002 ...
##  $ 2003:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2003-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 9.4 10.8 9.7 9.2 6.3 6.6 3.8 6.4 4.3 3.4 ...
##   ..$ yr  : num [1:365] 2003 2003 2003 2003 2003 ...
##  $ 2004:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    366 obs. of  3 variables:
##   ..$ date: POSIXct[1:366], format: &amp;quot;2004-01-01&amp;quot; ...
##   ..$ ta  : num [1:366] 6.6 5.9 7.8 8.1 6.4 5.7 5.2 6.9 11.8 12.2 ...
##   ..$ yr  : num [1:366] 2004 2004 2004 2004 2004 ...
##  $ 2005:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    365 obs. of  3 variables:
##   ..$ date: POSIXct[1:365], format: &amp;quot;2005-01-01&amp;quot; ...
##   ..$ ta  : num [1:365] 7.1 7.8 6.4 5.6 4.4 6.8 7.4 6 5.2 4.2 ...
##   ..$ yr  : num [1:365] 2005 2005 2005 2005 2005 ...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;El resultado es una lista nombrada con el nombre de cada hoja que contiene el data.frame. Dado que se trata de la misma tabla en todas las hojas, podríamos usar la función &lt;code&gt;bind_rows()&lt;/code&gt;, no obstante, existe una variante de &lt;code&gt;map()&lt;/code&gt;que directamente nos une todas las tablas por fila: &lt;code&gt;map_df()&lt;/code&gt;. Si fuese necesario unir por columna se debería usar &lt;code&gt;map_dfc()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

mad &amp;lt;- path %&amp;gt;%
        excel_sheets() %&amp;gt;%
        set_names() %&amp;gt;%
       map_df(read_excel,
           path = path)

mad&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2,192 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   5.4  2000
##  2 2000-01-02 00:00:00   5    2000
##  3 2000-01-03 00:00:00   3.5  2000
##  4 2000-01-04 00:00:00   4.3  2000
##  5 2000-01-05 00:00:00   0.6  2000
##  6 2000-01-06 00:00:00   3.8  2000
##  7 2000-01-07 00:00:00   6.2  2000
##  8 2000-01-08 00:00:00   5.4  2000
##  9 2000-01-09 00:00:00   5.5  2000
## 10 2000-01-10 00:00:00   4.8  2000
## # ... with 2,182 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;En nuestro caso tenemos una columna en cada hoja (año, pero también la fecha) que diferencia cada tabla. Si no fuera el caso, deberíamos usar el nombre de las hojas como nueva columna al unir todas. En &lt;code&gt;bind_rows()&lt;/code&gt; puede hacerse con el argumento &lt;em&gt;.id&lt;/em&gt; asignando un nombre para la columna. Lo mismo valdría para &lt;code&gt;map_df()&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;path &amp;lt;- &amp;quot;madrid_temp.xlsx&amp;quot;

mad &amp;lt;- path %&amp;gt;%
        excel_sheets() %&amp;gt;%
        set_names() %&amp;gt;%
       map_df(read_excel,
           path = path,
           .id = &amp;quot;yr2&amp;quot;)

str(mad)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    2192 obs. of  4 variables:
##  $ yr2 : chr  &amp;quot;2000&amp;quot; &amp;quot;2000&amp;quot; &amp;quot;2000&amp;quot; &amp;quot;2000&amp;quot; ...
##  $ date: POSIXct, format: &amp;quot;2000-01-01&amp;quot; &amp;quot;2000-01-02&amp;quot; ...
##  $ ta  : num  5.4 5 3.5 4.3 0.6 3.8 6.2 5.4 5.5 4.8 ...
##  $ yr  : num  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;¿Pero cómo importamos múltiples archivos de Excel?&lt;/p&gt;
&lt;p&gt;Para ello, primero debemos conocer la función &lt;code&gt;dir_ls()&lt;/code&gt; del paquete &lt;a href=&#34;https://github.com/r-lib/fs&#34;&gt;&lt;em&gt;{fs}&lt;/em&gt;&lt;/a&gt;. Es cierto que existe la función &lt;code&gt;dir()&lt;/code&gt; de &lt;em&gt;R Base&lt;/em&gt;, pero las ventajas del reciente paquete son varias, pero especialmente es la compatibilidad con la colección de &lt;em&gt;{tidyverse}&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dir_ls()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## berlin_temp.xlsx featured.png     index.es.html    index.es.Rmd     
## madrid_temp.xlsx&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#podemos filtrar los archivos que queremos
dir_ls(regexp = &amp;quot;xlsx&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## berlin_temp.xlsx madrid_temp.xlsx&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Importamos los dos archivos de Excel que tenemos.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#sin unir
dir_ls(regexp = &amp;quot;xlsx&amp;quot;)%&amp;gt;%
  map(read_excel)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## $berlin_temp.xlsx
## # A tibble: 366 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   1.2  2000
##  2 2000-01-02 00:00:00   3.6  2000
##  3 2000-01-03 00:00:00   5.7  2000
##  4 2000-01-04 00:00:00   5.1  2000
##  5 2000-01-05 00:00:00   2.2  2000
##  6 2000-01-06 00:00:00   1.8  2000
##  7 2000-01-07 00:00:00   4.2  2000
##  8 2000-01-08 00:00:00   4.2  2000
##  9 2000-01-09 00:00:00   4.2  2000
## 10 2000-01-10 00:00:00   1.7  2000
## # ... with 356 more rows
## 
## $madrid_temp.xlsx
## # A tibble: 366 x 3
##    date                   ta    yr
##    &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 2000-01-01 00:00:00   5.4  2000
##  2 2000-01-02 00:00:00   5    2000
##  3 2000-01-03 00:00:00   3.5  2000
##  4 2000-01-04 00:00:00   4.3  2000
##  5 2000-01-05 00:00:00   0.6  2000
##  6 2000-01-06 00:00:00   3.8  2000
##  7 2000-01-07 00:00:00   6.2  2000
##  8 2000-01-08 00:00:00   5.4  2000
##  9 2000-01-09 00:00:00   5.5  2000
## 10 2000-01-10 00:00:00   4.8  2000
## # ... with 356 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#uniendo con una nueva columna
dir_ls(regexp = &amp;quot;xlsx&amp;quot;)%&amp;gt;%
  map_df(read_excel, .id = &amp;quot;city&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 732 x 4
##    city             date                   ta    yr
##    &amp;lt;chr&amp;gt;            &amp;lt;dttm&amp;gt;              &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
##  1 berlin_temp.xlsx 2000-01-01 00:00:00   1.2  2000
##  2 berlin_temp.xlsx 2000-01-02 00:00:00   3.6  2000
##  3 berlin_temp.xlsx 2000-01-03 00:00:00   5.7  2000
##  4 berlin_temp.xlsx 2000-01-04 00:00:00   5.1  2000
##  5 berlin_temp.xlsx 2000-01-05 00:00:00   2.2  2000
##  6 berlin_temp.xlsx 2000-01-06 00:00:00   1.8  2000
##  7 berlin_temp.xlsx 2000-01-07 00:00:00   4.2  2000
##  8 berlin_temp.xlsx 2000-01-08 00:00:00   4.2  2000
##  9 berlin_temp.xlsx 2000-01-09 00:00:00   4.2  2000
## 10 berlin_temp.xlsx 2000-01-10 00:00:00   1.7  2000
## # ... with 722 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ahora bien, en este caso sólo importamos la primera hoja de cada archivo Excel. Para resolver este problema, debemos crear nuestra propia función. En esta función hacemos lo que hicimos previamente de forma individual.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;read_multiple_excel &amp;lt;- function(path) {
  path %&amp;gt;%
    excel_sheets() %&amp;gt;% 
    set_names() %&amp;gt;% 
  map_df(read_excel, path = path)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Aplicamos nuestra función creada para importar múltiples hojas de varios archivos Excel.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#por separado
data &amp;lt;- dir_ls(regexp = &amp;quot;xlsx&amp;quot;) %&amp;gt;% 
           map(read_multiple_excel)

str(data)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 2
##  $ berlin_temp.xlsx:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    2192 obs. of  3 variables:
##   ..$ date: POSIXct[1:2192], format: &amp;quot;2000-01-01&amp;quot; ...
##   ..$ ta  : num [1:2192] 1.2 3.6 5.7 5.1 2.2 1.8 4.2 4.2 4.2 1.7 ...
##   ..$ yr  : num [1:2192] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...
##  $ madrid_temp.xlsx:Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    2192 obs. of  3 variables:
##   ..$ date: POSIXct[1:2192], format: &amp;quot;2000-01-01&amp;quot; ...
##   ..$ ta  : num [1:2192] 5.4 5 3.5 4.3 0.6 3.8 6.2 5.4 5.5 4.8 ...
##   ..$ yr  : num [1:2192] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#unir todas
data_df &amp;lt;- dir_ls(regexp = &amp;quot;xlsx&amp;quot;) %&amp;gt;% 
           map_df(read_multiple_excel,
                  .id = &amp;quot;city&amp;quot;)

str(data_df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    4384 obs. of  4 variables:
##  $ city: chr  &amp;quot;berlin_temp.xlsx&amp;quot; &amp;quot;berlin_temp.xlsx&amp;quot; &amp;quot;berlin_temp.xlsx&amp;quot; &amp;quot;berlin_temp.xlsx&amp;quot; ...
##  $ date: POSIXct, format: &amp;quot;2000-01-01&amp;quot; &amp;quot;2000-01-02&amp;quot; ...
##  $ ta  : num  1.2 3.6 5.7 5.1 2.2 1.8 4.2 4.2 4.2 1.7 ...
##  $ yr  : num  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Calcular la distancia al mar en R</title>
      <link>/es/2019/calcular-la-distancia-al-mar-en-r/</link>
      <pubDate>Tue, 08 Jan 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/2019/calcular-la-distancia-al-mar-en-r/</guid>
      <description>


&lt;p&gt;En geografía, la distancia al mar es una variable fundamental, especialmente relevante a la hora de modelizar. Por ejemplo, en interpolaciones de la temperatura del aire habitualmente se hace uso de la distancia al mar como variable predictora, ya que existe una relación casual entre ambas que explica la variación espacial. ¿Cómo podemos estimar la distancia (más corta) a la costa en R?&lt;/p&gt;
&lt;div id=&#34;paquetes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Paquetes&lt;/h2&gt;
&lt;p&gt;En este post usaremos los siguientes paquetes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;Paquete&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Descripción&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;tidyverse&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Conjunto de librerías (visualización y manipulación de datos): ggplot2, dplyr, etc.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;sf&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Simple Feature: importar, exportar y manipular datos vectoriales&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;raster&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Importar, exportar y manipular raster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;rnaturalearth&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Conjunto de mapas vectoriales ‘natural earth’&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;RColorBrewer&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Paletas de colores&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#instalamos los paquetes si hace falta
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;sf&amp;quot;)) install.packages(&amp;quot;sf&amp;quot;)
if(!require(&amp;quot;raster&amp;quot;)) install.packages(&amp;quot;raster&amp;quot;)
if(!require(&amp;quot;rnaturalearth&amp;quot;)) install.packages(&amp;quot;rnaturalearth&amp;quot;)

#paquetes
library(rnaturalearth)
library(sf)
library(raster)
library(tidyverse)
library(RColorBrewer)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;la-costa-de-islandia-como-ejemplo&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;La costa de Islandia como ejemplo&lt;/h2&gt;
&lt;p&gt;Nuestro ejemplo en este post será Islandia, como es un territorio insular facilitará el ensayo y de este modo es posible mostrar el proceso de forma sencilla. La librería &lt;em&gt;rnaturalearth&lt;/em&gt; permite importar los límites de países (con diferentes niveles administrativos) de todo el mundo. Los datos vienen de la plataforma &lt;a href=&#34;http://www.naturalearthdata.com/&#34;&gt;naturalearthdata.com&lt;/a&gt;. Recomiendo explorar la librería, más info &lt;a href=&#34;https://github.com/ropensci/rnaturalearth&#34;&gt;aquí&lt;/a&gt;. La función &lt;code&gt;ne_countries( )&lt;/code&gt; importa los límites de países. En este caso indicamos con el argumento &lt;em&gt;scale&lt;/em&gt; la resolución (10,50 o 110m), con &lt;em&gt;country&lt;/em&gt; indicamos el país concreto de interés y con &lt;em&gt;returnclass&lt;/em&gt; determinamos que clase queremos (&lt;em&gt;sf&lt;/em&gt; o &lt;em&gt;sp&lt;/em&gt;), en nuestro caso &lt;em&gt;sf&lt;/em&gt; (simple feature).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;world &amp;lt;- ne_countries(scale = 50) #mapamundi con 50m de resolución

plot(world) #tiene clase sp por defecto&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#importamos los límites de Islandia 
iceland &amp;lt;- ne_countries(scale = 10,country = &amp;quot;Iceland&amp;quot;, returnclass = &amp;quot;sf&amp;quot;)

#info del objeto vectorial
iceland&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Simple feature collection with 1 feature and 94 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -24.53991 ymin: 63.39671 xmax: -13.50292 ymax: 66.56415
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##          featurecla scalerank labelrank sovereignt sov_a3 adm0_dif level
## 188 Admin-0 country         0         3    Iceland    ISL        0     2
##                  type   admin adm0_a3 geou_dif geounit gu_a3 su_dif
## 188 Sovereign country Iceland     ISL        0 Iceland   ISL      0
##     subunit su_a3 brk_diff    name name_long brk_a3 brk_name brk_group
## 188 Iceland   ISL        0 Iceland   Iceland    ISL  Iceland      &amp;lt;NA&amp;gt;
##      abbrev postal           formal_en formal_fr name_ciawf note_adm0
## 188 Iceland     IS Republic of Iceland      &amp;lt;NA&amp;gt;    Iceland      &amp;lt;NA&amp;gt;
##     note_brk name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13
## 188     &amp;lt;NA&amp;gt;   Iceland     &amp;lt;NA&amp;gt;         1         4         4          9
##     pop_est pop_rank gdp_md_est pop_year lastcensus gdp_year
## 188  339747       10      16150     2017         NA     2016
##                        economy           income_grp wikipedia fips_10_
## 188 2. Developed region: nonG7 1. High income: OECD        NA       IC
##     iso_a2 iso_a3 iso_a3_eh iso_n3 un_a3 wb_a2 wb_a3   woe_id woe_id_eh
## 188     IS    ISL       ISL    352   352    IS   ISL 23424845  23424845
##                       woe_note adm0_a3_is adm0_a3_us adm0_a3_un adm0_a3_wb
## 188 Exact WOE match as country        ISL        ISL         NA         NA
##     continent region_un       subregion             region_wb name_len
## 188    Europe    Europe Northern Europe Europe &amp;amp; Central Asia        7
##     long_len abbrev_len tiny homepart min_zoom min_label max_label
## 188        7          7   NA        1        0         2         7
##          ne_id wikidataid name_ar name_bn name_de name_en  name_es name_fr
## 188 1159320917       Q189    &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt;  Island Iceland Islandia Islande
##     name_el name_hi name_hu  name_id name_it name_ja name_ko name_nl
## 188    &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt;  Izland Islandia Islanda    &amp;lt;NA&amp;gt;    &amp;lt;NA&amp;gt; IJsland
##      name_pl  name_pt name_ru name_sv name_tr name_vi name_zh
## 188 Islandia Islândia    &amp;lt;NA&amp;gt;  Island Izlanda Iceland    &amp;lt;NA&amp;gt;
##                           geometry
## 188 MULTIPOLYGON (((-14.56363 6...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#aquí Islandia
plot(iceland)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-3-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Por defecto, la función &lt;code&gt;plot( )&lt;/code&gt; con la clase &lt;em&gt;sf&lt;/em&gt; nos crea tantas facetas del mapa como variables tiene. Para limitarlo podemos usar o bien con el nombre de una variable &lt;code&gt;plot(iceland[&amp;quot;admin&amp;quot;])&lt;/code&gt; o el argumento &lt;em&gt;max.plot&lt;/em&gt; &lt;code&gt;plot(iceland,max.plot=1)&lt;/code&gt;. Con el argumento &lt;em&gt;max.plot=1&lt;/em&gt; la función usa la primera variable disponible del mapa.&lt;/p&gt;
&lt;p&gt;Además, vemos en la información del objeto &lt;em&gt;sf&lt;/em&gt; que la proyección es WGS84 con grados decimales (código EPSG:4326). Para el cálculo de distancias es más conveniente usar metros en lugar de grados. Debido a ello, lo primero que hacemos es transformar el mapa de Islandia a UTM Zona 27 (código EPSG:3055). Más información sobre EPSG y proyecciones &lt;a href=&#34;http://spatialreference.org/ref/epsg/wgs-84/&#34;&gt;aquí&lt;/a&gt;. Con ese objetivo, usamos la función &lt;code&gt;st_transform( )&lt;/code&gt;. Simplemente indicamos el mapa y el código EPSG.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#transformamos a UTM
iceland &amp;lt;- st_transform(iceland, 3055)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;crear-una-red-de-puntos&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Crear una red de puntos&lt;/h2&gt;
&lt;p&gt;Todavía necesitamos los puntos donde queremos conocer la distancia. En nuestro caso será una red regular de puntos en Islandia con una resolución de 5km. Esa tarea la hacemos con la función &lt;code&gt;st_make_grid( )&lt;/code&gt;, indicando con el argumento &lt;em&gt;cellsize&lt;/em&gt; la resolución en la unidad del sistema de coordenadas (metros en nuestro caso) y qué geometría nos gustaría crear &lt;em&gt;what&lt;/em&gt; (poligonos, centros o esquinas).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#crear red de puntos
grid &amp;lt;- st_make_grid(iceland,cellsize = 5000, what = &amp;quot;centers&amp;quot;)

#nuestra red sobre la extensión de Islandia
plot(grid)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#exraemos sólamente los puntos en los límites de Islandia
grid &amp;lt;- st_intersection(grid, iceland)   

#nuestra red ahora
plot(grid)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;calcular-la-distancia&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Calcular la distancia&lt;/h2&gt;
&lt;p&gt;Para estimar la distancia usamos la función &lt;code&gt;st_distance( )&lt;/code&gt; que nos devuelve un vector de distancias para todos nuestros puntos de la red. Pero antes es necesario transformar el mapa de Islandia de una forma de polígono (MULTIPOLYGON) a línea (MULTILINESTRING). Más detalles con &lt;code&gt;?st_cast&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#convertimos Islandia de geometría poligono a línea
iceland &amp;lt;- st_cast(iceland, &amp;quot;MULTILINESTRING&amp;quot;)

#cálculo de la distancia entre la costa y nuestros puntos
dist &amp;lt;- st_distance(iceland, grid)

#distancia con unidad en metros
head(dist)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Units: [m]
## [1]  790.7906 1151.4360 1270.7603 3128.9057 2428.5677 4197.7472&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;visualizar-la-distancia-calculada&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Visualizar la distancia calculada&lt;/h2&gt;
&lt;p&gt;Una vez obtenida la distancia para nuestros puntos, podemos combinarlos con las coordenadas y plotearlos en &lt;em&gt;ggplot2&lt;/em&gt;. Para ello, creamos un &lt;em&gt;data.frame&lt;/em&gt;. El objeto &lt;em&gt;dist&lt;/em&gt; es una matriz de una columna, por eso, tenemos que convertirla a vector con la función &lt;code&gt;as.vector( )&lt;/code&gt;. Además, dividimos por 1000 para convertir la distancia en metros a km. La función &lt;code&gt;st_coordinates( )&lt;/code&gt; extrae las coordenadas de nuestros puntos. Para la visualización usamos un vector de colores con la gama RdGy (más &lt;a href=&#34;http://colorbrewer2.org&#34;&gt;aquí&lt;/a&gt;).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#creamos un data.frame con la distancia y las coorendas de los puntos
df &amp;lt;- data.frame(dist = as.vector(dist)/1000,
                    st_coordinates(grid))

#estructura
str(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;#39;data.frame&amp;#39;:    4104 obs. of  3 variables:
##  $ dist: num  0.791 1.151 1.271 3.129 2.429 ...
##  $ X   : num  608796 613796 583796 588796 593796 ...
##  $ Y   : num  7033371 7033371 7038371 7038371 7038371 ...&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#colores 
col_dist &amp;lt;- brewer.pal(11, &amp;quot;RdGy&amp;quot;)


ggplot(df, aes(X, Y,fill = dist))+ #variables
         geom_tile()+ #geometría
           scale_fill_gradientn(colours = rev(col_dist))+ #colores para la distancia
             labs(fill = &amp;quot;Distance (km)&amp;quot;)+ #nombre de la leyenda
             theme_void()+ #estilo del mapa
              theme(legend.position = &amp;quot;bottom&amp;quot;) #posición de la leyenda&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;exportar-la-distancia-como-raster&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Exportar la distancia como raster&lt;/h2&gt;
&lt;p&gt;Para poder exportar la distancia con respecto al mar de Islandia, debemos usar la función &lt;code&gt;rasterize( )&lt;/code&gt; de la librería &lt;em&gt;raster&lt;/em&gt;.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;Primero, es necesario crear un raster vacío. En este raster debemos indicar la resolución, en nuestro caso es de 5000m, la proyección y la extensión del raster.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: lower-alpha&#34;&gt;
&lt;li&gt;&lt;p&gt;La proyección la podemos extraer de la información del mapa de Islandia.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;La extensión la conseguimos extraer de nuestros puntos &lt;em&gt;grid&lt;/em&gt; con la función &lt;code&gt;extent( )&lt;/code&gt;. No obstante, esta última función necesita la clase &lt;em&gt;sp&lt;/em&gt;, por eso pasamos el objeto &lt;em&gt;grid&lt;/em&gt; en formato &lt;em&gt;sf&lt;/em&gt;, únicamente para ello, a la clase &lt;em&gt;sp&lt;/em&gt; usando la función &lt;code&gt;as( )&lt;/code&gt; y el argumento “Spatial”.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Además de lo anterior, el &lt;em&gt;data.frame&lt;/em&gt; &lt;strong&gt;df&lt;/strong&gt; que creamos antes debemos convertir en clase &lt;em&gt;sf&lt;/em&gt;. Por eso, aplicamos la función &lt;code&gt;st_as_sf( )&lt;/code&gt; con el argumento &lt;em&gt;coords&lt;/em&gt; indicando los nombres de las coordenadas. Adicionalmente, también definimos el sistema de coordenadas que conocemos.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#obtenemos la extensión
ext &amp;lt;- extent(as(grid, &amp;quot;Spatial&amp;quot;))

#objeto extent
ext&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class      : Extent 
## xmin       : 338795.6 
## xmax       : 848795.6 
## ymin       : 7033371 
## ymax       : 7383371&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#raster destino
r &amp;lt;- raster(resolution = 5000, ext = ext, crs = &amp;quot;+proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs&amp;quot;)

#convertimos los puntos a un spatial object clase sf
dist_sf &amp;lt;- st_as_sf(df, coords = c(&amp;quot;X&amp;quot;,&amp;quot;Y&amp;quot;)) %&amp;gt;%
                      st_set_crs(3055)

#creamos el raster de la distancia
dist_raster &amp;lt;- rasterize(dist_sf, r, &amp;quot;dist&amp;quot;, fun = mean)

#raster
dist_raster&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class      : RasterLayer 
## dimensions : 70, 102, 7140  (nrow, ncol, ncell)
## resolution : 5000, 5000  (x, y)
## extent     : 338795.6, 848795.6, 7033371, 7383371  (xmin, xmax, ymin, ymax)
## crs        : +proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs 
## source     : memory
## names      : layer 
## values     : 0.006124901, 115.1712  (min, max)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#plotear el raster
plot(dist_raster)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#exportamos el raster
writeRaster(dist_raster, file = &amp;quot;dist_islandia.tif&amp;quot;, format = &amp;quot;GTiff&amp;quot;, overwrite = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;La función &lt;code&gt;rasterize( )&lt;/code&gt; está pensada para crear rasters a partir de un grid irregular. En caso que tengamos un grid regular, como este mismo, podemos usar una alternativa más fácil. La función &lt;code&gt;rasterFromXYZ( )&lt;/code&gt; convierte un &lt;em&gt;data.frame&lt;/em&gt; con longitud, latitud y la variable &lt;em&gt;Z&lt;/em&gt; en un raster. Es importante que el orden debe ser longitud, latitud, variables.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;r &amp;lt;- rasterFromXYZ(df[, c(2:3, 1)], crs = &amp;quot;+proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs&amp;quot;)

plot(r)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2019-01-10-calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Con el cálculo de la distancia podemos llegar crear &lt;em&gt;arte&lt;/em&gt;, como se ve en la cabezera de este post, que incluye un mapamundi únicamente con la distancia al mar de todos los continentes. Una perspectiva diferente a nuestro mundo (&lt;a href=&#34;https://www.geografiainfinita.com/2017/06/una-radiografia-del-mundo-a-traves-de-la-distancia-al-mar/&#34;&gt;aquí más&lt;/a&gt;).&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Densidad de los puntos de venta de alcohol y su consumo en jóvenes de Galicia</title>
      <link>/es/publication/alcohol_galicia2018/</link>
      <pubDate>Fri, 21 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/publication/alcohol_galicia2018/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Clima y tiempo</title>
      <link>/es/graphs/climate/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/graphs/climate/</guid>
      <description>&lt;p&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//player.vimeo.com/video/310077447&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
 &lt;/div&gt;

Probability of a frost day (minimum temperature less than 0ºC) through the year in Europe. Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;E-OBS 18e&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//player.vimeo.com/video/310070253&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
 &lt;/div&gt;

Probability of a frost day (minimum temperature less than 0ºC/32ºF) through the year in the Contiguous United States. Data: &lt;a href=&#34;https://developers.google.com/earth-engine/datasets/catalog/OREGONSTATE_PRISM_AN81m&#34; target=&#34;_blank&#34;&gt;PRISM&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/p&gt;



&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Bilbao.&#34; href=&#34;/img/album/anomalias_Bilbao.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Bilbao.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Bilbao. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Zaragoza.&#34; href=&#34;/img/album/anomalias_Zaragoza.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Zaragoza.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Zaragoza. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Santander.&#34; href=&#34;/img/album/anomalias_Santander.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Santander.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Santander. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Málaga.&#34; href=&#34;/img/album/anomalias_Malaga.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Malaga.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Málaga. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Sevilla.&#34; href=&#34;/img/album/anomalias_Sevilla.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Sevilla.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Sevilla. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Santiago.&#34; href=&#34;/img/album/anomalias_Santiago.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Santiago.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Santiago. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Valencia.&#34; href=&#34;/img/album/anomalias_Valencia.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Valencia.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Valencia. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en Vigo.&#34; href=&#34;/img/album/anomalias_Vigo.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Vigo.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en Vigo. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Las anomalías invernales de temperatura y precipitación en A Coruña.&#34; href=&#34;/img/album/anomalias_A%20Coru%c3%b1a.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_A%20Coru%c3%b1a.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Las anomalías invernales de temperatura y precipitación en A Coruña. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Madrid.&#34; href=&#34;/img/album/Madrid_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Madrid_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Madrid. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Santander.&#34; href=&#34;/img/album/Santander_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Santander_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Santander. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Barcelona.&#34; href=&#34;/img/album/Barcelona_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Barcelona_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Barcelona. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Santiago.&#34; href=&#34;/img/album/Santiago_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Santiago_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Santiago. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Bilbao.&#34; href=&#34;/img/album/Bilbao_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Bilbao_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Bilbao. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Sevilla.&#34; href=&#34;/img/album/Sevilla_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Sevilla_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Sevilla. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de A Coruña.&#34; href=&#34;/img/album/A%20Coru%c3%b1a_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/A%20Coru%c3%b1a_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de A Coruña. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Anomalías de la temperatura media diaria en invierno de Málaga.&#34; href=&#34;/img/album/Malaga_invierno.png&#34;&gt;
    &lt;img src=&#34;/img/album/Malaga_invierno.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Anomalías de la temperatura media diaria en invierno de Málaga. Datos: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Las series temporales se homogeneizaron con &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Promedio del primer día de verano en Europa.&#34; href=&#34;/img/album/first_summer.png&#34;&gt;
    &lt;img src=&#34;/img/album/first_summer.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Promedio del primer día de verano en Europa (temperatura máxima &amp;gt;25ºC). Datos: &lt;a href=&#34;http://surfobs.climate.copernicus.eu/dataaccess/access_eobs.php#datafiles&#34; target=&#34;_blank&#34;&gt;E-OSB 18e&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribución del promedio del primer día de verano en Europa.&#34; href=&#34;/img/album/density_firstsummer.png&#34;&gt;
    &lt;img src=&#34;/img/album/density_firstsummer.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribución del promedio del primer día de verano en Europa (temperatura máxima &amp;gt;25ºC). Datos: &lt;a href=&#34;http://surfobs.climate.copernicus.eu/dataaccess/access_eobs.php#datafiles&#34; target=&#34;_blank&#34;&gt;E-OSB 18e&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Warming stripes for several Spanish cities.&#34; href=&#34;/img/album/tiras_spain.png&#34;&gt;
    &lt;img src=&#34;/img/album/tiras_spain.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Warming stripes for several Spanish cities. These graphs represent and communicate climate change in a very illustrative and effective way. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. Time series were homogenized with &lt;a href=&#34;http://www.climatol.eu/&#34; target=&#34;_blank&#34;&gt;climatol&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/how-to-create-warming-stripes-in-r/&#34; target=&#34;_blank&#34;&gt;post&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual anomalies of precipitation (%) in peninsular Spain 1950-2012.&#34; href=&#34;/img/album/anomalia_spread.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalia_spread.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;62 years of annual anomalies of precipitation (%) in peninsular Spain in a single graphic. Data: &lt;a href=&#34;https://digital.csic.es/handle/10261/141218&#34; target=&#34;_blank&#34;&gt;SPREAD&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer anomaly of temperature and precipitation in Barcelona 1914-2018.&#34; href=&#34;/img/album/anomalias_barcelona.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_barcelona.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer anomaly of temperature and precipitation in Barcelona 1914-2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer anomaly of temperature and precipitation in Madrid 1920-2018.&#34; href=&#34;/img/album/anomalias_Madrid.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_Madrid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer anomaly of temperature and precipitation in Madrid 1920-2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer anomaly of temperature and precipitation in Santiago de Compostela 1950-2018.&#34; href=&#34;/img/album/anomalias_scq.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomalias_scq.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer anomaly of temperature and precipitation in Santiago de Compostela 1950-2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Monthly precipitation anomaly registered in Santiago de Compostela in 2017.&#34; href=&#34;/img/album/pr_anomalia2017_scq.png&#34;&gt;
    &lt;img src=&#34;/img/album/pr_anomalia2017_scq.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Monthly precipitation anomaly registered in Santiago de Compostela in 2017. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Monthly precipitation anomaly registered in Barcelona in 2018.&#34; href=&#34;/img/album/pr_anomalia2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/pr_anomalia2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Monthly precipitation anomaly registered in Barcelona in 2018. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;https://opendata.aemet.es&#34; target=&#34;_blank&#34;&gt;opendata.aemet.es&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Cloud fraction anomaly for Europe (Summer 2018).&#34; href=&#34;/img/album/anomaly_summer_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/anomaly_summer_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Cloud fraction anomaly for Europe (Summer 2018). Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of first frost days in Barcelona 1950-2016.&#34; href=&#34;/img/album/primeras_heladasBCN.png&#34;&gt;
    &lt;img src=&#34;/img/album/primeras_heladasBCN.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of first frost days in Barcelona 1950-2016. 12.1 days later each decade. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last frost days in Madrid 1920-2016.&#34; href=&#34;/img/album/%c3%baltimas_heladasMadrid.png&#34;&gt;
    &lt;img src=&#34;/img/album/%c3%baltimas_heladasMadrid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last frost days in Madrid 1920-2016. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of first tropical nights in Barcelona 1950-2016.&#34; href=&#34;/img/album/primeras_nochestropicBCN.png&#34;&gt;
    &lt;img src=&#34;/img/album/primeras_nochestropicBCN.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of first tropical nights in Barcelona 1950-2016. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last tropical night in Barcelona 1950-2016.&#34; href=&#34;/img/album/ultimas_nochestropicBCN.png&#34;&gt;
    &lt;img src=&#34;/img/album/ultimas_nochestropicBCN.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last tropical nights in Barcelona 1950-2016. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of first tropical night in Madrid 1920-2016.&#34; href=&#34;/img/album/primeras_nochestropicMad.png&#34;&gt;
    &lt;img src=&#34;/img/album/primeras_nochestropicMad.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of first tropical night (minimum temperature &amp;gt; 20ºC) in Madrid 1920-2016. -2.3 days earlier each decade.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last tropical night in Madrid 1920-2016.&#34; href=&#34;/img/album/ultimas_nochestropicMadrid.png&#34;&gt;
    &lt;img src=&#34;/img/album/ultimas_nochestropicMadrid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last tropical night (minimum temperature &amp;gt; 20ºC) in Madrid 1920-2016. 1.9 days later each decade.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of frist days with more than 30ºC in several Spanish cities.&#34; href=&#34;/img/album/primerosdias_30TX.png&#34;&gt;
    &lt;img src=&#34;/img/album/primerosdias_30TX.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of frist days with more than 30ºC in several Spanish cities.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Trends of last days with more than 30ºC in several Spanish cities.&#34; href=&#34;/img/album/ultimosdias_30TX.png&#34;&gt;
    &lt;img src=&#34;/img/album/ultimosdias_30TX.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Trends of last days with more than 30ºC in several Spanish cities.  Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average of consecutive days without rainfall 1950-2012.&#34; href=&#34;/img/album/rachas_secas.png&#34;&gt;
    &lt;img src=&#34;/img/album/rachas_secas.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average of consecutive days without rainfall 1950-2012. Data: &lt;a href=&#34;https://digital.csic.es/handle/10261/141218&#34; target=&#34;_blank&#34;&gt;SPREAD&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average of consecutive days without rainfall by seasons 1950-2012 in the Iberian Peninsula.&#34; href=&#34;/img/album/rachas_estaciones.png&#34;&gt;
    &lt;img src=&#34;/img/album/rachas_estaciones.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average of consecutive days without rainfall by seasons 1950-2012 in the Iberian Peninsula. Data: &lt;a href=&#34;https://digital.csic.es/handle/10261/141218&#34; target=&#34;_blank&#34;&gt;SPREAD&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual precipitation per inhabitant in Europe.&#34; href=&#34;/img/album/ratiopr2015.png&#34;&gt;
    &lt;img src=&#34;/img/album/ratiopr2015.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual precipitation per inhabitant in Europe based on gridded population (1km resolution) and precipitation (0.25º) data. Data:  &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;http://sedac.ciesin.columbia.edu/data/collection/gpw-v4&#34; target=&#34;_blank&#34;&gt;SEDAC&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2018 and normal 2001-2018 in Europe.&#34; href=&#34;/img/album/Europe_summer_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/Europe_summer_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2018 and normal 2001-2018 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Land Surface Temperature anomaly for summer 2018 in Europe.&#34; href=&#34;/img/album/Europe_summer_anomaly_LST_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/Europe_summer_anomaly_LST_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Land Surface Temperature anomaly for summer 2018 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average Land Surface Temperature for summer 2018 and normal 2001-2018 in Europe.&#34; href=&#34;/img/album/Europe_summer_LST_2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/Europe_summer_LST_2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average Land Surface Temperature for summer 2018 and normal 2001-2018 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of temperature anomalies in autumn according to different decades in Barcelona.&#34; href=&#34;/img/album/distribution_graph_bcn.png&#34;&gt;
    &lt;img src=&#34;/img/album/distribution_graph_bcn.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of temperature anomalies in autumn according to different decades in Barcelona. You can clearly see how the autumn is getting warmer due to global warming. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of temperature anomalies in autumn according to different decades in Santiago de Compostela.&#34; href=&#34;/img/album/distribution_temp.png&#34;&gt;
    &lt;img src=&#34;/img/album/distribution_temp.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of temperature anomalies in autumn according to different decades in Santiago de Compostela. You can clearly see how the autumn is getting warmer due to global warming. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several Spanish cities.&#34; href=&#34;/img/album/clima_circulos.png&#34;&gt;
    &lt;img src=&#34;/img/album/clima_circulos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several Spanish cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several European cities.&#34; href=&#34;/img/album/clima_circulos_eu.png&#34;&gt;
    &lt;img src=&#34;/img/album/clima_circulos_eu.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several European cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Graphic definition of climate and weather.&#34; href=&#34;/img/album/clima_def.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/clima_def.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Graphic definition of climate and weather. The difference between weather and climate is particularly a scale of time. Single atmospheric conditions over a short period of time is weather, and climate is the statistical description of all these single condicions over a relatively long period of time.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several Chilean cities.&#34; href=&#34;/img/album/climate_chile.png&#34;&gt;
    &lt;img src=&#34;/img/album/climate_chile.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several Chilean cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;http://explorador.cr2.cl/&#34; target=&#34;_blank&#34;&gt;explorador.cr2.cl&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer month, mild winters, lot of sun and little wind, the climatic preferences for the Galician population.&#34; href=&#34;/img/album/galicia_percepcion.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/galicia_percepcion.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer months, mild winters, lot of sun and little wind, the climatic preferences for the Galician population. Map is based on survey results. More: &lt;a href=&#34;https://t.co/tfwrANxqHz&#34; target=&#34;_blank&#34;&gt;article (galician)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Where is the lightning activity concentrated in a few days in Galicia?&#34; href=&#34;/img/album/concentration_index_rayos.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/concentration_index_rayos.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Where is the lightning activity concentrated in a few days in Galicia? Values toward 1 indicate that a few days contribute much of all the lightning; instead, values toward 0 are places where more regularity is observed. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/lightning_galicia_2018/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;How is the lightning activity distributed in Galicia?&#34; href=&#34;/img/album/rayos_estaciones.png&#34;&gt;
    &lt;img src=&#34;/img/album/rayos_estaciones.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;How is the lightning activity distributed annual and by seasons in Galicia? Data: &lt;a href=&#34;http://www.meteogalicia.gal/observacion/raios/raios.action?request_locale=gl&#34; target=&#34;_blank&#34;&gt;meteogalicia&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/lightning_galicia_2018/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;How is the lightning activity distributed by month and hour in Galicia?&#34; href=&#34;/img/album/rayos_meshora.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/rayos_meshora.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;How is the lightning activity distributed by month and hour in Galicia? Data: &lt;a href=&#34;http://www.meteogalicia.gal/observacion/raios/raios.action?request_locale=gl&#34; target=&#34;_blank&#34;&gt;meteogalicia&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/lightning_galicia_2018/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation in descending order in Europe.&#34; href=&#34;/img/album/regimenes_pluvi.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/regimenes_pluvi.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation (1950-2017) in descending order in Europe. (P, spring; S, summer; A, autumn; W, winter). Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation in descending order in the contiguous United States.&#34; href=&#34;/img/album/pluvi_regimes_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/pluvi_regimes_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Seasonal rainfall regime, i.e. ranking seasons according to average precipitation (1956-2006) in descending order in the contiguous United States. (P, spring; S, summer; A, autumn; W, winter). More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/usa_ci_2017/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;, &lt;a href=&#34;https://github.com/dominicroye/Concentration_Index_USA&#34; target=&#34;_blank&#34;&gt;dataset&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Concentration of Daily Precipitation in the contiguous United States.&#34; href=&#34;/img/album/concentration_index_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/concentration_index_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Concentration of Daily Precipitation (1956-2006) in the contiguous United States. (P, spring; S, summer; A, autumn; W, winter). The frequency distribution of daily precipitation amounts almost anywhere conforms to a negative exponential distribution, reflecting the fact that there are many small daily totals and few large ones. More: &lt;a href=&#34;https://dominicroye.github.io/en/publication/usa_ci_2017/&#34; target=&#34;_blank&#34;&gt;article&lt;/a&gt;, &lt;a href=&#34;https://github.com/dominicroye/Concentration_Index_USA&#34; target=&#34;_blank&#34;&gt;dataset&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2001-2018 in the contiguous United States.&#34; href=&#34;/img/album/summer_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/summer_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2001-2018 in the contiguous United States. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for winter 2001-2018 in the contiguous United States.&#34; href=&#34;/img/album/winter_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/winter_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for winter 2001-2018 in the contiguous United States. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in Europe.&#34; href=&#34;/img/album/summerday_estaciones.png&#34;&gt;
    &lt;img src=&#34;/img/album/summerday_estaciones.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in Europe. Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in Europe.&#34; href=&#34;/img/album/summerdays_eu.gif&#34;&gt;
    &lt;img src=&#34;/img/album/summerdays_eu.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in Europe. Data: &lt;a href=&#34;http://c3surf.knmi.nl/dataaccess/access_eobs.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in the pensinular Spain.&#34; href=&#34;/img/album/summerdays.gif&#34;&gt;
    &lt;img src=&#34;/img/album/summerdays.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) through the year in the pensinular Spain. Data: STEAD from &lt;a href=&#34;https://twitter.com/climayagua&#34; target=&#34;_blank&#34;&gt;Research Group climayagua&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in the pensinular Spain.&#34; href=&#34;/img/album/summerprob_spain.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/summerprob_spain.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC) for different dates in the pensinular Spain. Data: STEAD from &lt;a href=&#34;https://twitter.com/climayagua&#34; target=&#34;_blank&#34;&gt;Research Group climayagua&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Summer day probability (maximum temperature &amp;gt; 25ºC/77ºF) through the year in the Contiguous United States.&#34; href=&#34;/img/album/summerdays_usa.gif&#34;&gt;
    &lt;img src=&#34;/img/album/summerdays_usa.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Summer day probability (maximum temperature &amp;gt; 25ºC/77ºF) through the year in the Contiguous United States. Data: &lt;a href=&#34;http://www.engr.scu.edu/~emaurer/data.shtml&#34; target=&#34;_blank&#34;&gt;Maurer et al (2002)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual sunhours for Germany in 2017.&#34; href=&#34;/img/album/sunhours_germany2017.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/sunhours_germany2017.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual sunhours for Germany in 2017. Map is a result of a interpolation process based on sunhour registers and cloudiness from MODIS. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform for MODIS: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Warming stripes for Lisboa.&#34; href=&#34;/img/album/tiras_lisboa.png&#34;&gt;
    &lt;img src=&#34;/img/album/tiras_lisboa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Warming stripes for Lisboa. These graphs represent and communicate climate change in a very illustrative and effective way. Data: &lt;a href=&#34;https://data.giss.nasa.gov/gistemp/stdata/&#34; target=&#34;_blank&#34;&gt;GISTEMP&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/how-to-create-warming-stripes-in-r/&#34; target=&#34;_blank&#34;&gt;post&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Where do we observe the trajectories of extratropical cyclones in Europe?&#34; href=&#34;/img/album/trayectios_ciclones.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/trayectios_ciclones.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Where do we observe the trajectories of extratropical cyclones in Europe? Here the frequency for the months October to March between 1979-2010. Data: &lt;a href=&#34;http://catalogue.ceda.ac.uk/uuid/421688bf376b41b884246b34bd274356&#34; target=&#34;_blank&#34;&gt;extra-tropical cyclone tracks&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Warming stripes for Madrid.&#34; href=&#34;/img/album/warming_stripes_madrid.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/warming_stripes_madrid.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Warming stripes for Madrid. These graphs represent and communicate climate change in a very illustrative and effective way. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/how-to-create-warming-stripes-in-r/&#34; target=&#34;_blank&#34;&gt;post&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2001-2018 in Germany.&#34; href=&#34;/img/album/germany1.png&#34;&gt;
    &lt;img src=&#34;/img/album/germany1.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2001-2018 in Germany. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for winter 2001-2018 in Germany.&#34; href=&#34;/img/album/germany2.png&#34;&gt;
    &lt;img src=&#34;/img/album/germany2.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for winter 2001-2018 in Germany. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual sunhours for Galicia (Spain) in 2017.&#34; href=&#34;/img/album/horasdesol2017.png&#34;&gt;
    &lt;img src=&#34;/img/album/horasdesol2017.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual sunhours for Galicia (Spain) in 2017. Map is a result of a interpolation process based on sunhour registers and cloudiness from MODIS. Data: &lt;a href=&#34;http://www.meteogalicia.gal&#34; target=&#34;_blank&#34;&gt;Meteogalicia&lt;/a&gt;, &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform for MODIS: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Annual sunhours for Spain in 2017.&#34; href=&#34;/img/album/horassol_espa%c3%b1a2017.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/horassol_espa%c3%b1a2017.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Annual sunhours for Spain in 2017. Map is a result of a interpolation process based on sunhour registers and cloudiness from MODIS. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;, &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform for MODIS: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Potential insolation (sun hours) in Barcelona&amp;#39;s city center.&#34; href=&#34;/img/album/insolation_bcn.png&#34;&gt;
    &lt;img src=&#34;/img/album/insolation_bcn.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Potential insolation (sun hours) in Barcelona&amp;rsquo;s city center for July 21 and December 22. The calculation is based on the Sky View Factor. Estimation made using &lt;a href=&#34;http://www.saga-gis.org/&#34; target=&#34;_blank&#34;&gt;SAGA-GIS&lt;/a&gt;. Data: &lt;a href=&#34;http://pnoa.ign.es/presentacion&#34; target=&#34;_blank&#34;&gt;LiDAR-IGN&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average Diurnal Land Surface Temperature for July 2017 in Europe.&#34; href=&#34;/img/album/LSTday.png&#34;&gt;
    &lt;img src=&#34;/img/album/LSTday.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average Diurnal Land Surface Temperature for July 2017 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt; Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average Night Land Surface Temperature for July 2017 in Europe.&#34; href=&#34;/img/album/LSTnight.png&#34;&gt;
    &lt;img src=&#34;/img/album/LSTnight.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average Night Land Surface Temperature for July 2017 in Europe. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD11A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average number of snow days on the ground in the Iberian Peninsula (2002-2017)&#34; href=&#34;/img/album/nieve_peninsula.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/nieve_peninsula.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of snow days on the ground in the Iberian Peninsula (2002-2017). The daily images with a binary code (condition: Snow_Cover_Daily_Tile == 200, and Fractional_Snow_Cover &amp;gt; 90) have been reclassified and than summed up and divided by the number of years. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD10A1&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Climate circles for several American cities.&#34; href=&#34;/img/album/nortamerica_climate.png&#34;&gt;
    &lt;img src=&#34;/img/album/nortamerica_climate.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Climate circles for several American cities. For each day of the year the average of the maximum and minimum (bar length) and the average temperature (color) is indicated. Data: &lt;a href=&#34;https://www.ncdc.noaa.gov/cdo-web/&#34; target=&#34;_blank&#34;&gt;NCDC-CDO/NOAA&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for summer 2018 and normal 2001-2017 in the Iberian Peninsular.&#34; href=&#34;/img/album/nubosidad_verano2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/nubosidad_verano2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for summer 2018 and normal 2001-2017 in the Iberian Peninsular. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Average cloud fraction for march 2018 and march 2001-2018 in the Iberian Peninsular.&#34; href=&#34;/img/album/PI_marzo2018.png&#34;&gt;
    &lt;img src=&#34;/img/album/PI_marzo2018.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Average cloud fraction for march 2018 and march 2001-2018 in the Iberian Peninsular. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/MODIS%2F006%2FMOD09GA&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Accumulated precipitation of 2017 compared to other years in Valladolid.&#34; href=&#34;/img/album/valladolid.png&#34;&gt;
    &lt;img src=&#34;/img/album/valladolid.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Accumulated precipitation of 2017 compared to other years in Valladolid. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Accumulated precipitation of 2017 compared to other years in Vigo.&#34; href=&#34;/img/album/vigo.png&#34;&gt;
    &lt;img src=&#34;/img/album/vigo.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Accumulated precipitation of 2017 compared to other years in Vigo. Data: &lt;a href=&#34;https://www.ecad.eu//dailydata/index.php&#34; target=&#34;_blank&#34;&gt;ECA&amp;amp;D&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Geografía</title>
      <link>/es/graphs/geography/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/graphs/geography/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Tiempo de viaje a centros urbanos de alta densidad a través del transporte de superficie en España.&#34; href=&#34;/img/album/acces_mapa_esp.png&#34;&gt;
    &lt;img src=&#34;/img/album/acces_mapa_esp.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Tiempo de viaje a centros urbanos de alta densidad a través del transporte de superficie en España. Datos: &lt;a href=&#34;https://resourcewatch.org/data/explore/cit01701-Travel-Time-to-Major-Cities&#34; target=&#34;_blank&#34;&gt;resourcewatch.org&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Ranking del tiempo de viaje a centros urbanos de alta densidad a través del transporte de superficie según provincias españolas.&#34; href=&#34;/img/album/acces_rank.png&#34;&gt;
    &lt;img src=&#34;/img/album/acces_rank.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Ranking del tiempo de viaje a centros urbanos de alta densidad a través del transporte de superficie según provincias españolas. Datos: &lt;a href=&#34;https://resourcewatch.org/data/explore/cit01701-Travel-Time-to-Major-Cities&#34; target=&#34;_blank&#34;&gt;resourcewatch.org&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Mapa de elevación de rio serpenteante Ebro.&#34; href=&#34;/img/album/Ebro_rio.png&#34;&gt;
    &lt;img src=&#34;/img/album/Ebro_rio.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Inspirado por el gran trabajo de &lt;a href=&#34;https://twitter.com/geo_coe?lang=es&#34; target=&#34;_blank&#34;&gt;@geo_coe&lt;/a&gt;, he creado un mapa de elevación para el río serpenteante Ebro, tramo medio entre Logroño y Zaragoza en España. Datos: &lt;a href=&#34;http://centrodedescargas.cnig.es/CentroDescargas/index.jsp&#34; target=&#34;_blank&#34;&gt;Modelo Digital del Terreno - MDT05&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Mapa de elevación del rio serpenteante Alagón (Tajo).&#34; href=&#34;/img/album/alagon_rio.png&#34;&gt;
    &lt;img src=&#34;/img/album/alagon_rio.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Inspirado por el gran trabajo de &lt;a href=&#34;https://twitter.com/geo_coe?lang=es&#34; target=&#34;_blank&#34;&gt;@geo_coe&lt;/a&gt;, he creado un mapa de elevación para el río serpenteante Alagón, afluente más largo del río Tajo en España. Datos: &lt;a href=&#34;http://centrodedescargas.cnig.es/CentroDescargas/index.jsp&#34; target=&#34;_blank&#34;&gt;Modelo Digital del Terreno - MDT05&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Urban growth of Santiag de Compostela from before 1800 until today.&#34; href=&#34;/img/album/scq_buildings.gif&#34;&gt;
    &lt;img src=&#34;/img/album/scq_buildings.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Urban growth of Santiag de Compostela from before 1800 until today. Data: &lt;a href=&#34;https://plugins.qgis.org/plugins/Spanish_Inspire_Catastral_Downloader/&#34; target=&#34;_blank&#34;&gt;Catastro INSPIRE QGIS-Plugin&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the ten busiest airports by passenger traffic in Europe.&#34; href=&#34;/img/album/10airports_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/10airports_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of the ten busiest airports by passenger traffic in Europe based on 24 hour data for each airport. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Sky View Factor of Barcelona.&#34; href=&#34;/img/album/SVF.png&#34;&gt;
    &lt;img src=&#34;/img/album/SVF.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;The Sky View Factor is very useful urban spatial indicator for radiation and thermal environmental assessment. SVF describes how visible is the sky (0: the entire sky is blocked from view; 1: free view on the whole sky). Estimation made using &lt;a href=&#34;http://www.saga-gis.org/&#34; target=&#34;_blank&#34;&gt;SAGA-GIS&lt;/a&gt;. Data: &lt;a href=&#34;http://pnoa.ign.es/presentacion&#34; target=&#34;_blank&#34;&gt;LiDAR-IGN&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight density of the ten busiest airports by passenger traffic in Europe.&#34; href=&#34;/img/album/10airports_vuelos_density.png&#34;&gt;
    &lt;img src=&#34;/img/album/10airports_vuelos_density.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;European flight density based on 24 hour data for each of the ten busiest airports by passenger. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More:  &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the Frankfurt airport.&#34; href=&#34;/img/album/fra_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/fra_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of Frankfurt airport based on 24 hour data. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the busiest airports in the Iberian Peninsula.&#34; href=&#34;/img/album/pi_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/pi_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of the busiest airports in the Iberian Peninsula based on 24 hour data. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#34;https://t.co/k6sO2SYjW1&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Flight routes of the Paris Charles de Gaulle airport.&#34; href=&#34;/img/album/paris_vuelos.png&#34;&gt;
    &lt;img src=&#34;/img/album/paris_vuelos.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Flight routes of Paris Charles de Gaulle airport based on 24 hour data. Data: &lt;a href=&#34;https://www.flightradar24.com/&#34; target=&#34;_blank&#34;&gt;https://www.flightradar24.com/&lt;/a&gt;. More: &lt;a href=&#39;https://t.co/k6sO2SYjW1&#39;&gt;link&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Urban growth of Madrid from before 1800 until today.&#34; href=&#34;/img/album/mad_buildings.gif&#34;&gt;
    &lt;img src=&#34;/img/album/mad_buildings.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Urban growth of Madrid from before 1800 until today. Data: &lt;a href=&#34;https://plugins.qgis.org/plugins/Spanish_Inspire_Catastral_Downloader/&#34; target=&#34;_blank&#34;&gt;Catastro INSPIRE QGIS-Plugin&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Hours of fishing activity in 2016 in the Iberian Peninsula.&#34; href=&#34;/img/album/pesca2016.png&#34;&gt;
    &lt;img src=&#34;/img/album/pesca2016.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Total hours of fishing activity per km2 for the year 2016 in the Iberian Peninsula. Data: &lt;a href=&#34;https://globalfishingwatch.org/&#34; target=&#34;_blank&#34;&gt;https://globalfishingwatch.org/&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Hours of fishing activity in 2016 in the Mediterranean.&#34; href=&#34;/img/album/pesca2016_med.png&#34;&gt;
    &lt;img src=&#34;/img/album/pesca2016_med.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Total hours of fishing activity per km2 for the year 2016 in the Mediterranean. Data: &lt;a href=&#34;https://globalfishingwatch.org/&#34; target=&#34;_blank&#34;&gt;https://globalfishingwatch.org/&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of gas stations in Europe.&#34; href=&#34;/img/album/europe_fuel.png&#34;&gt;
    &lt;img src=&#34;/img/album/europe_fuel.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of gas stations (Point Of Interest) in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of drinking water in Europe.&#34; href=&#34;/img/album/europe.png&#34;&gt;
    &lt;img src=&#34;/img/album/europe.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of drinking water (Point Of Interest) in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://www.geografiainfinita.com/2017/07/fuentes-de-agua-potable-en-el-mundo/&#34; target=&#34;_blank&#34;&gt;article (spanish)&lt;/a&gt;,&lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of gas and charging stations in Europe.&#34; href=&#34;/img/album/eu_fuel.png&#34;&gt;
    &lt;img src=&#34;/img/album/eu_fuel.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of gas and charging stations (Point Of Interest) in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of drinking water in the World.&#34; href=&#34;/img/album/world_drinking.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/world_drinking.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of drinking water (Point Of Interest) in the World, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://www.geografiainfinita.com/2017/07/fuentes-de-agua-potable-en-el-mundo/&#34; target=&#34;_blank&#34;&gt;article (Spanish)&lt;/a&gt;,&lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distance to the sea in the World.&#34; href=&#34;/img/album/global.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/global.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Another perspective on the world. Distance to the sea (the more black, the further away is the sea). Euclidean distance estimation made with R. More: &lt;a href=&#34;https://www.geografiainfinita.com/2017/06/una-radiografia-del-mundo-a-traves-de-la-distancia-al-mar/&#34; target=&#34;_blank&#34;&gt;article (Spanish)&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of bars per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/bars.png&#34;&gt;
    &lt;img src=&#34;/img/album/bars.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of bars per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://www.geografiainfinita.com/2018/03/la-distribucion-de-los-restaurantes-en-europa/&#34; target=&#34;_blank&#34;&gt;article (Spanish)&lt;/a&gt;,&lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of Cafes per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/cafes_maps.png&#34;&gt;
    &lt;img src=&#34;/img/album/cafes_maps.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of Cafes per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of building heights at 10 meter resolution in European capitals.&#34; href=&#34;/img/album/CP_buildingheight.png&#34;&gt;
    &lt;img src=&#34;/img/album/CP_buildingheight.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of building heights at 10 meter resolution in European capitals. Data: &lt;a href=&#34;https://land.copernicus.eu/local/urban-atlas/building-height-2012&#34; target=&#34;_blank&#34;&gt;COPERNICUS&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Differences of building heights at 10 meter resolution in European capitals.&#34; href=&#34;/img/album/city_buildingheights.png&#34;&gt;
    &lt;img src=&#34;/img/album/city_buildingheights.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Differences of building heights at 10 meter resolution in European capitals. Data: &lt;a href=&#34;https://land.copernicus.eu/local/urban-atlas/building-height-2012&#34; target=&#34;_blank&#34;&gt;COPERNICUS&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Urban growth of Barcelona from before 1800 until today.&#34; href=&#34;/img/album/bcn_buildings.gif&#34;&gt;
    &lt;img src=&#34;/img/album/bcn_buildings.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Urban growth of Barcelona from before 1800 until today. Data: &lt;a href=&#34;https://plugins.qgis.org/plugins/Spanish_Inspire_Catastral_Downloader/&#34; target=&#34;_blank&#34;&gt;Catastro INSPIRE QGIS-Plugin&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of published articles in ElPaís by year for the term &amp;#39;wildfire&amp;#39;.&#34; href=&#34;/img/album/ElPais_incendios.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/ElPais_incendios.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of published articles in ElPaís by year for the term &amp;lsquo;wildfire&amp;rsquo;. Data: &lt;a href=&#34;https://elpais.com/tag/incendios/a&#34; target=&#34;_blank&#34;&gt;elpais&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of fastfood restaurants in the contiguous United States.&#34; href=&#34;/img/album/fastfood_usatiff.png&#34;&gt;
    &lt;img src=&#34;/img/album/fastfood_usatiff.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of fastfood restaurants in the contiguous United States, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of fastfood restaurants per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/fastfood_map.png&#34;&gt;
    &lt;img src=&#34;/img/album/fastfood_map.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of fastfood restaurants per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of pharmacies per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/pharma_regions.png&#34;&gt;
    &lt;img src=&#34;/img/album/pharma_regions.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of pharmacies per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Open Data Indactor Scores. Spain leads access to Open Data in the EU&#34; href=&#34;/img/album/opendata.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/opendata.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Spain leads access to Open Data in the EU. Data: &lt;a href=&#34;https://www.europeandataportal.eu/en/dashboard#2017&#34; target=&#34;_blank&#34;&gt;europendataportal&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of pubs per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/pubs.png&#34;&gt;
    &lt;img src=&#34;/img/album/pubs.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of pubs per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Distribution of fastfood restaurants in Europe.&#34; href=&#34;/img/album/fastfood_eutiff.png&#34;&gt;
    &lt;img src=&#34;/img/album/fastfood_eutiff.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Distribution of fastfood restaurants in Europe., extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of restaurants per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/restaurants.png&#34;&gt;
    &lt;img src=&#34;/img/album/restaurants.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of restaurants per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Number of Kebab restaurants per 10,000 inhabitants in Europe.&#34; href=&#34;/img/album/kebab.png&#34;&gt;
    &lt;img src=&#34;/img/album/kebab.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Number of Kebab restaurants per 10,000 inhabitants in Europe, extracted from the overpass API of OpenStreetMaps (June 2017). Data: OpenStreetMaps. More: &lt;a href=&#34;https://dominicroye.github.io/en/2018/accessing-openstreetmap-data-with-r/&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Medio ambiente</title>
      <link>/es/graphs/environment/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/graphs/environment/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light?&#34; href=&#34;/img/album/coef_var_nightlights.png&#34;&gt;
    &lt;img src=&#34;/img/album/coef_var_nightlights.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light? The map shows the Coefficient of Variation (standard deviation/mean) of each municipalities. Data: &lt;a href=&#34;https://ngdc.noaa.gov/eog/download.html&#34; target=&#34;_blank&#34;&gt;VIIRS Nighttime Lights NOAA (2015)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Which coast has more light pollution in Peninsular Spain?&#34; href=&#34;/img/album/lights_costas.png&#34;&gt;
    &lt;img src=&#34;/img/album/lights_costas.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Which coast has more light pollution in Peninsular Spain? The coast margins include a buffer of 5km. Data: &lt;a href=&#34;https://ngdc.noaa.gov/eog/download.html&#34; target=&#34;_blank&#34;&gt;VIIRS Nighttime Lights NOAA (2016)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light?&#34; href=&#34;/img/album/ranking.png&#34;&gt;
    &lt;img src=&#34;/img/album/ranking.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Light pollution by municipality in 2015. What is the municipality that emits the most artificial light? The map shows the Coefficient of Variation (standard deviation/mean) of each municipalities. Data: &lt;a href=&#34;https://ngdc.noaa.gov/eog/download.html&#34; target=&#34;_blank&#34;&gt;VIIRS Nighttime Lights NOAA (2015)&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the Iberian Peninsula.&#34; href=&#34;/img/album/no2_pi_autum.png&#34;&gt;
    &lt;img src=&#34;/img/album/no2_pi_autum.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the Iberian Peninsula. Clearly stand out Barcelona and Madrid. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/COPERNICUS%2FS5P%2FOFFL%2FL3_NO2&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in Germany.&#34; href=&#34;/img/album/no2_pi_autum_germany.png&#34;&gt;
    &lt;img src=&#34;/img/album/no2_pi_autum_germany.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in Germany. Clearly stands out the Rhine-Ruhr metropolitan region. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/COPERNICUS%2FS5P%2FOFFL%2FL3_NO2&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the contiguous United States.&#34; href=&#34;/img/album/no2_pi_autum_usa.png&#34;&gt;
    &lt;img src=&#34;/img/album/no2_pi_autum_usa.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Pollution spots from nitrogen dioxide (NO2) in autumn 2018 in the contiguous United States. Data: &lt;a href=&#34;https://explorer.earthengine.google.com/#detail/COPERNICUS%2FS5P%2FOFFL%2FL3_NO2&#34; target=&#34;_blank&#34;&gt;NASA/MODIS&lt;/a&gt;. Platform: &lt;a href=&#34;https://earthengine.google.com/&#34; target=&#34;_blank&#34;&gt;Google Earth Engine&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Air pollution in the Iberian Peninsula. Annual average of PM2.5 for 2016 seen by MODIS/MISR/SeaWiFS. Clearly visible are Madrid and Barcelona.&#34; href=&#34;/img/album/PM25_peninsula.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/PM25_peninsula.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Air pollution in the Iberian Peninsula. Annual average of PM2.5 for 2016 seen by MODIS/MISR/SeaWiFS. Clearly visible are Madrid and Barcelona. Data: &lt;a href=&#34;http://sedac.ciesin.columbia.edu/data/sets/browse&#34; target=&#34;_blank&#34;&gt;SEDAC&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Our human footprint in the Iberian Peninsula, or rather, the pressure we exert on the terrestrial ecosystem.&#34; href=&#34;/img/album/huella_humana.png&#34;&gt;
    &lt;img src=&#34;/img/album/huella_humana.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Our human footprint in the Iberian Peninsula, or rather, the pressure we exert on the terrestrial ecosystem. Data: &lt;a href=&#34;https://www.nature.com/articles/sdata201667&#34; target=&#34;_blank&#34;&gt;Global terrestrial Human Footprint &lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Populación</title>
      <link>/es/graphs/population/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/graphs/population/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population pyramid of Galicia since 1975.&#34; href=&#34;/img/album/pop_pyr.gif&#34;&gt;
    &lt;img src=&#34;/img/album/pop_pyr.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population pyramid of Galicia since 1975. Data: &lt;a href=&#34;http://ige.eu&#34; target=&#34;_blank&#34;&gt;IGE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population pyramid of Galician provinces since 1975.&#34; href=&#34;/img/album/pop_pyr_galprov.gif&#34;&gt;
    &lt;img src=&#34;/img/album/pop_pyr_galprov.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population pyramid of Galician provinces since 1975. Data: &lt;a href=&#34;http://ige.eu&#34; target=&#34;_blank&#34;&gt;IGE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Population pyramid of Spanish autonomous community since 1998.&#34; href=&#34;/img/album/pop_pyr_ccaa.gif&#34;&gt;
    &lt;img src=&#34;/img/album/pop_pyr_ccaa.gif&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Population pyramid of Spanish autonomous community since 1998. Data: &lt;a href=&#34;https://www.ine.es/&#34; target=&#34;_blank&#34;&gt;INE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Migration flows between Spanish autonomous communities in 2008.&#34; href=&#34;/img/album/flux_spain2008.jpg&#34;&gt;
    &lt;img src=&#34;/img/album/flux_spain2008.jpg&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Migration flows between Spanish autonomous communities in 2008. Data: &lt;a href=&#34;https://www.ine.es/&#34; target=&#34;_blank&#34;&gt;INE&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Salud</title>
      <link>/es/graphs/health/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/graphs/health/</guid>
      <description>

&lt;div class=&#34;gallery&#34;&gt;

  
  
  
  


  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;Evolution of adult obesity in Europe between 1975 and 2016.&#34; href=&#34;/img/album/obesity_europe.png&#34;&gt;
    &lt;img src=&#34;/img/album/obesity_europe.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;Evolution of adult obesity in Europe between 1975 and 2016. Data: &lt;a href=&#34;https://ourworldindata.org/obesity&#34; target=&#34;_blank&#34;&gt;ourwoldindata&lt;/a&gt;, &lt;a href=&#34;https://github.com/dominicroye/obesity&#34; target=&#34;_blank&#34;&gt;script&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
  
  
    
      
    
  
  &lt;div class=&#34;box&#34;&gt;&lt;a data-fancybox=&#34;gallery-gallery&#34; data-caption=&#34;National Overdose Death in the US by different drugs since 1999, showing a horrifying trend.&#34; href=&#34;/img/album/USA_overdose.png&#34;&gt;
    &lt;img src=&#34;/img/album/USA_overdose.png&#34; alt=&#34;&#34;&gt;
  &lt;/a&gt;
&lt;div class=&#34;imgcap&#34;&gt;National Overdose Death in the US by different drugs since 1999, showing a horrifying trend. Data: &lt;a href=&#34;https://ourworldindata.org/&#34; target=&#34;_blank&#34;&gt;ourwoldindata&lt;/a&gt;.&lt;/div&gt;
&lt;/div&gt;
  
  
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Cómo crear &#39;Warming Stripes&#39; in R</title>
      <link>/es/2018/c%C3%B3mo-crear-warming-stripes-in-r/</link>
      <pubDate>Wed, 05 Dec 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/2018/c%C3%B3mo-crear-warming-stripes-in-r/</guid>
      <description>


&lt;p&gt;Este año se hicieron muy famosos en todo el mundo los llamados &lt;em&gt;warming stripes&lt;/em&gt;, las tiras del calentamiento global, que fueron creadas por el científico &lt;a href=&#34;https://twitter.com/ed_hawkins?lang=es&#34;&gt;Ed Hawkins&lt;/a&gt; de la Universidad de Reading. Estos gráficos representan y comunican el cambio climático de una forma muy ilustrativa y eficaz.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Visualising global temperature change since records began in 1850. Versions for USA, central England &amp;amp; Toronto available too: &lt;a href=&#34;https://t.co/H5Hv9YgZ7v&#34;&gt;https://t.co/H5Hv9YgZ7v&lt;/a&gt; &lt;a href=&#34;https://t.co/YMzdySrr3A&#34;&gt;pic.twitter.com/YMzdySrr3A&lt;/a&gt;&lt;/p&gt;&amp;mdash; Ed Hawkins #ShowYourStripes (@ed_hawkins) &lt;a href=&#34;https://twitter.com/ed_hawkins/status/999242147135188993?ref_src=twsrc%5Etfw&#34;&gt;May 23, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;A partir de su idea, creé tiras para ejemplos de España, como el siguiente de Madrid.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;es&#34; dir=&#34;ltr&#34;&gt;&lt;a href=&#34;https://twitter.com/hashtag/Temperatura?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#Temperatura&lt;/a&gt; anual en &lt;a href=&#34;https://twitter.com/hashtag/MadridRetiro?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#MadridRetiro&lt;/a&gt; desde 1920 a 2017.  &lt;a href=&#34;https://twitter.com/hashtag/CambioClimatico?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#CambioClimatico&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dataviz&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/ggplot2?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#ggplot2&lt;/a&gt; (idea de &lt;a href=&#34;https://twitter.com/ed_hawkins?ref_src=twsrc%5Etfw&#34;&gt;@ed_hawkins&lt;/a&gt; 🙏) &lt;a href=&#34;https://twitter.com/Divulgameteo?ref_src=twsrc%5Etfw&#34;&gt;@Divulgameteo&lt;/a&gt; &lt;a href=&#34;https://twitter.com/edupenabad?ref_src=twsrc%5Etfw&#34;&gt;@edupenabad&lt;/a&gt; &lt;a href=&#34;https://twitter.com/climayagua?ref_src=twsrc%5Etfw&#34;&gt;@climayagua&lt;/a&gt; &lt;a href=&#34;https://twitter.com/ClimaGroupUB?ref_src=twsrc%5Etfw&#34;&gt;@ClimaGroupUB&lt;/a&gt; &lt;a href=&#34;https://twitter.com/4gotas_com?ref_src=twsrc%5Etfw&#34;&gt;@4gotas_com&lt;/a&gt; &lt;a href=&#34;https://t.co/wmLb5uczpT&#34;&gt;pic.twitter.com/wmLb5uczpT&lt;/a&gt;&lt;/p&gt;&amp;mdash; Dominic Royé (@dr_xeo) &lt;a href=&#34;https://twitter.com/dr_xeo/status/1002954473927561217?ref_src=twsrc%5Etfw&#34;&gt;June 2, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;En este post voy a enseñar cómo se pueden crear estas tiras en R con el paquete &lt;em&gt;ggplot2&lt;/em&gt;. Aunque debo decir que existen muchos caminos en R que nos pueden llevar al mismo resultado o a uno similar, incluso dentro de &lt;em&gt;ggplot2&lt;/em&gt;.&lt;/p&gt;
&lt;div id=&#34;datos&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Datos&lt;/h2&gt;
&lt;p&gt;En este caso usaremos las temperaturas anuales de Lisboa del &lt;a href=&#34;https://data.giss.nasa.gov/gistemp/stdata/&#34;&gt;GISS Surface Temperature Analysis&lt;/a&gt; que comprenden el periodo 1880-2018. Se trata de series temporales homogeneizadas. También se podrían usar temperaturas mensuales u otras series temporales. El archivo se puede descargar &lt;a href=&#34;/files/temp_lisboa.csv&#34;&gt;aquí&lt;/a&gt;. Lo primero que debemos hacer, siempre y cuando no lo hayamos hecho, es instalar la colección de paquetes &lt;em&gt;tidyverse&lt;/em&gt; que incluyen también &lt;em&gt;ggplot2&lt;/em&gt;. Además, nos hará falta el paquete &lt;em&gt;lubridate&lt;/em&gt; para el tratamiento de fechas. Después, importamos los datos de Lisboa que están en formato csv.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#instalamos los paquetes lubridate y tidyverse
if(!require(&amp;quot;lubridate&amp;quot;)) install.packages(&amp;quot;lubridate&amp;quot;)
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)

#paquetes
library(tidyverse)
library(lubridate)
library(RColorBrewer)

#importar las temperaturas anuales
temp_lisboa &amp;lt;- read_csv(&amp;quot;temp_lisboa.csv&amp;quot;)

str(temp_lisboa)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;spec_tbl_df&amp;#39;, &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;: 139 obs. of  18 variables:
##  $ YEAR  : num  1880 1881 1882 1883 1884 ...
##  $ JAN   : num  9.17 11.37 10.07 10.86 11.16 ...
##  $ FEB   : num  12 11.8 11.9 11.5 10.6 ...
##  $ MAR   : num  13.6 14.1 13.5 10.5 12.4 ...
##  $ APR   : num  13.1 14.4 14 13.8 12.2 ...
##  $ MAY   : num  15.7 17.3 15.6 14.6 16.4 ...
##  $ JUN   : num  17 19.2 17.9 17.2 19.1 ...
##  $ JUL   : num  19.1 21.8 20.3 19.5 21.4 ...
##  $ AUG   : num  20.6 23.5 21 21.6 22.4 ...
##  $ SEP   : num  20.7 20 18 18.8 19.5 ...
##  $ OCT   : num  17.9 16.3 16.4 15.8 16.4 ...
##  $ NOV   : num  12.5 14.7 13.7 13.5 12.5 ...
##  $ DEC   : num  11.07 9.97 10.66 9.46 10.25 ...
##  $ D-J-F : num  10.7 11.4 10.6 11 10.4 ...
##  $ M-A-M : num  14.1 15.2 14.3 12.9 13.6 ...
##  $ J-J-A : num  18.9 21.5 19.7 19.4 20.9 ...
##  $ S-O-N : num  17 17 16 16 16.1 ...
##  $ metANN: num  15.2 16.3 15.2 14.8 15.3 ...
##  - attr(*, &amp;quot;spec&amp;quot;)=
##   .. cols(
##   ..   YEAR = col_double(),
##   ..   JAN = col_double(),
##   ..   FEB = col_double(),
##   ..   MAR = col_double(),
##   ..   APR = col_double(),
##   ..   MAY = col_double(),
##   ..   JUN = col_double(),
##   ..   JUL = col_double(),
##   ..   AUG = col_double(),
##   ..   SEP = col_double(),
##   ..   OCT = col_double(),
##   ..   NOV = col_double(),
##   ..   DEC = col_double(),
##   ..   `D-J-F` = col_double(),
##   ..   `M-A-M` = col_double(),
##   ..   `J-J-A` = col_double(),
##   ..   `S-O-N` = col_double(),
##   ..   metANN = col_double()
##   .. )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vemos en las columnas que tenemos valores mensuales y estacionales, y el valor anual. Pero antes de proceder a visualizar la temperatura anual, debemos sustituir los valores ausentes &lt;em&gt;999.9&lt;/em&gt; por &lt;code&gt;NA&lt;/code&gt;, usando la función &lt;code&gt;ifelse( )&lt;/code&gt; que lleva una condición y los argumentos correspondientes a verdadero y falso de la condición dada.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#selecionamos la columna del año y la temperatura anual
temp_lisboa_yr &amp;lt;- select(temp_lisboa, YEAR, metANN)

#cambiamos el nombre de la columna 
temp_lisboa_yr &amp;lt;- rename(temp_lisboa_yr, ta = metANN)

#valores ausentes 999.9
summary(temp_lisboa_yr) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##       YEAR            ta        
##  Min.   :1880   Min.   : 14.53  
##  1st Qu.:1914   1st Qu.: 15.65  
##  Median :1949   Median : 16.11  
##  Mean   :1949   Mean   : 37.38  
##  3rd Qu.:1984   3rd Qu.: 16.70  
##  Max.   :2018   Max.   :999.90&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;temp_lisboa_yr &amp;lt;- mutate(temp_lisboa_yr, ta = ifelse(ta == 999.9, NA, ta))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Cuando usamos el año como variable, no solemos convertirlo en un objeto de fecha, no obstante es aconsejable. De este modo nos permite usar las funciones de fechas del paquete &lt;em&gt;lubridate&lt;/em&gt; y las funciones de apoyo dentro de &lt;em&gt;ggplot2&lt;/em&gt;. La función &lt;code&gt;str_c( )&lt;/code&gt; del paquete &lt;em&gt;stringr&lt;/em&gt;, forma parte de la colección de &lt;em&gt;tidyverse&lt;/em&gt;, es similar a &lt;code&gt;paste( )&lt;/code&gt; de R Base que nos permite combinar caracteres especificando un separador (sep=“-”). La función &lt;code&gt;ymd( )&lt;/code&gt; (year month day) del paquete &lt;em&gt;lubridate&lt;/em&gt; convierte una fecha en un objeto &lt;em&gt;Date&lt;/em&gt;. Es posible combinar varias funciones haciendo uso del &lt;em&gt;pipe operator&lt;/em&gt; &lt;code&gt;%&amp;gt;%&lt;/code&gt; que ayuda a encadenar sin asignar el resultado a un nuevo objeto. Su uso es muy extendido especialmente con el paquete &lt;em&gt;tidyverse&lt;/em&gt;. Si quieres saber más de su uso, &lt;a href=&#34;https://www.datacamp.com/community/tutorials/pipe-r-tutorial&#34;&gt;aquí&lt;/a&gt; tienes un tutorial.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;temp_lisboa_yr &amp;lt;- mutate(temp_lisboa_yr, date = str_c(YEAR, &amp;quot;01-01&amp;quot;, sep = &amp;quot;-&amp;quot;) %&amp;gt;% ymd())&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;creando-las-tiras&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Creando las tiras&lt;/h2&gt;
&lt;p&gt;Primero, creamos el estilo del gráfico, especificando todo los argumentos del aspecto que queremos ajustar. Partimos del estilo por defecto de &lt;code&gt;theme_minimal( )&lt;/code&gt;. Además, asignamos los colores procedientes de &lt;em&gt;RColorBrewer&lt;/em&gt; a un objeto &lt;em&gt;col_srip&lt;/em&gt;. Más información sobre los colores usados &lt;a href=&#34;http://colorbrewer2.org&#34;&gt;aquí&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_strip &amp;lt;- theme_minimal()+
                 theme(axis.text.y = element_blank(),
                       axis.line.y = element_blank(),
                       axis.title = element_blank(),
                       panel.grid.major = element_blank(),
                       legend.title = element_blank(),
                       axis.text.x = element_text(vjust = 3),
                       panel.grid.minor = element_blank(),
                       plot.title = element_text(size = 14, face = &amp;quot;bold&amp;quot;)
                       )


col_strip &amp;lt;- brewer.pal(11, &amp;quot;RdBu&amp;quot;)

brewer.pal.info&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##          maxcolors category colorblind
## BrBG            11      div       TRUE
## PiYG            11      div       TRUE
## PRGn            11      div       TRUE
## PuOr            11      div       TRUE
## RdBu            11      div       TRUE
## RdGy            11      div      FALSE
## RdYlBu          11      div       TRUE
## RdYlGn          11      div      FALSE
## Spectral        11      div      FALSE
## Accent           8     qual      FALSE
## Dark2            8     qual       TRUE
## Paired          12     qual       TRUE
## Pastel1          9     qual      FALSE
## Pastel2          8     qual      FALSE
## Set1             9     qual      FALSE
## Set2             8     qual       TRUE
## Set3            12     qual      FALSE
## Blues            9      seq       TRUE
## BuGn             9      seq       TRUE
## BuPu             9      seq       TRUE
## GnBu             9      seq       TRUE
## Greens           9      seq       TRUE
## Greys            9      seq       TRUE
## Oranges          9      seq       TRUE
## OrRd             9      seq       TRUE
## PuBu             9      seq       TRUE
## PuBuGn           9      seq       TRUE
## PuRd             9      seq       TRUE
## Purples          9      seq       TRUE
## RdPu             9      seq       TRUE
## Reds             9      seq       TRUE
## YlGn             9      seq       TRUE
## YlGnBu           9      seq       TRUE
## YlOrBr           9      seq       TRUE
## YlOrRd           9      seq       TRUE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para el gráfico final usamos la geometría &lt;code&gt;geom_tile( )&lt;/code&gt;. Como los datos no tienen un valor específico para el eje Y, usamos un valor &lt;em&gt;dummy&lt;/em&gt;, aquí es 1. Además, ajusto el ancho de la barra de colores en la leyenda.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;     ggplot(temp_lisboa_yr,
             aes(x = date, y = 1,fill = ta))+
        geom_tile()+
           scale_x_date(date_breaks = &amp;quot;6 years&amp;quot;,
                     date_labels = &amp;quot;%Y&amp;quot;,
                     expand = c(0, 0))+
           scale_y_continuous(expand = c(0, 0))+
           scale_fill_gradientn(colors = rev(col_strip))+
           guides(fill = guide_colorbar(barwidth = 1))+
           labs(title = &amp;quot;LISBOA 1880-2018&amp;quot;,
                caption = &amp;quot;Datos: GISS Surface Temperature Analysis&amp;quot;)+
             theme_strip&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2018-12-05-como-crear-warming-stripes-en-r/index.es_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;1152&#34; /&gt;&lt;/p&gt;
&lt;p&gt;En el caso de que quisieramos obtener únicamente las tiras, podemos usar &lt;code&gt;theme_void( )&lt;/code&gt; y el argumento &lt;em&gt;show.legend=FALSE&lt;/em&gt; en &lt;code&gt;geom_tile( )&lt;/code&gt; para eliminar todos los elementos de estilo. También podemos cambiar el color para los valores &lt;code&gt;NA&lt;/code&gt;, incluyendo el argumento &lt;em&gt;na.value=“grey70”&lt;/em&gt; en la función &lt;code&gt;scale_fill_gradientn( )&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;     ggplot(temp_lisboa_yr,
             aes(x = date, y = 1, fill = ta))+
        geom_tile(show.legend = FALSE)+
           scale_x_date(date_breaks = &amp;quot;6 years&amp;quot;,
                     date_labels = &amp;quot;%Y&amp;quot;,
                     expand = c(0, 0))+
           scale_y_discrete(expand = c(0, 0))+
           scale_fill_gradientn(colors = rev(col_strip))+
             theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2018-12-05-como-crear-warming-stripes-en-r/index.es_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;1152&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Acceso a la base de datos de OpenStreetMaps desde R</title>
      <link>/es/2018/acceso-a-la-base-de-datos-de-openstreetmaps-desde-r/</link>
      <pubDate>Sat, 03 Nov 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/2018/acceso-a-la-base-de-datos-de-openstreetmaps-desde-r/</guid>
      <description>


&lt;div id=&#34;la-base-de-datos-de-open-street-maps&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;La base de datos de Open Street Maps&lt;/h2&gt;
&lt;p&gt;Recientemente creé un mapa de la distribución de gasolineras y estaciones de carga eléctrica en Europa.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Population density through the number of gas stations in Europe. &lt;a href=&#34;https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dataviz&lt;/a&gt; &lt;a href=&#34;https://twitter.com/AGE_Oficial?ref_src=twsrc%5Etfw&#34;&gt;@AGE_Oficial&lt;/a&gt; @mipazos &lt;a href=&#34;https://twitter.com/simongerman600?ref_src=twsrc%5Etfw&#34;&gt;@simongerman600&lt;/a&gt; &lt;a href=&#34;https://twitter.com/openstreetmap?ref_src=twsrc%5Etfw&#34;&gt;@openstreetmap&lt;/a&gt; &lt;a href=&#34;https://t.co/eIUx2yn7ej&#34;&gt;pic.twitter.com/eIUx2yn7ej&lt;/a&gt;&lt;/p&gt;&amp;mdash; Dominic Royé (@dr_xeo) &lt;a href=&#34;https://twitter.com/dr_xeo/status/967811548646379521?ref_src=twsrc%5Etfw&#34;&gt;February 25, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;¿Cómo se puede obtener estos datos?&lt;/p&gt;
&lt;p&gt;Pues, en este caso usé puntos de interés (PDIs) de la base de datos de &lt;em&gt;Open Street Maps&lt;/em&gt; (OSM). Obviamente OSM no sólo contiene las carreteras, sino también información que nos puede ser útil a la hora de usar un mapa, como por ejemplo las ubicaciones de hospitales o gasolineras. Para evitar la descarga de todo el OSM y extraer la información requerida, se puede hacer uso de una &lt;em&gt;overpass API&lt;/em&gt;, que nos permite hacer consultas a la base de datos de OSM con nuestros propios criterios.&lt;/p&gt;
&lt;p&gt;Una forma fácil de acceder a una &lt;em&gt;overpass API&lt;/em&gt; es a través de &lt;a href=&#34;http://overpass-turbo.eu&#34;&gt;overpass-turbo.eu&lt;/a&gt;, que incluso incluye un asistente para construir una consulta y muestra los resultados sobre un mapa interactivo. Una explicación detallada de la página anterior la podemos encontrar &lt;a href=&#34;https://wiki.openstreetmap.org/wiki/ES:Overpass_turbo&#34;&gt;aquí&lt;/a&gt;. Sin embargo, tenemos a nuestra disposicón el paquete &lt;em&gt;osmdata&lt;/em&gt; que nos permite crear y hacer las consultas directamente desde el entorno de R. Aún así, el uso de la &lt;em&gt;overpass-turbo.eu&lt;/em&gt; puede ser útil cuando no estamos seguros de lo que buscamos o tenemos alguna dificultad en construir la consulta.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;acceso-a-la-overpass-api-desde-r&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Acceso a la overpass API desde R&lt;/h2&gt;
&lt;p&gt;El primer paso, que debemos seguir, es instalar varios paquetes, en el caso de que no estén instaldos. En casi todos mis scripts hago uso de &lt;a href=&#34;https://www.tidyverse.org/&#34;&gt;&lt;em&gt;tidyverse&lt;/em&gt;&lt;/a&gt; que es una colección fundamental de distintos paquetes, incluyendo &lt;em&gt;dplyr&lt;/em&gt; (manipulación de datos), &lt;em&gt;ggplot2&lt;/em&gt; (visualización), etc. El paquete &lt;a href=&#34;https://r-spatial.github.io/sf/articles/sf1.html&#34;&gt;&lt;em&gt;sf&lt;/em&gt;&lt;/a&gt; es el nuevo estándar para trabajar con datos espaciales y es compatible con &lt;em&gt;ggplot2&lt;/em&gt; y &lt;em&gt;dplyr&lt;/em&gt;. Por último, &lt;a href=&#34;http://stat405.had.co.nz/ggmap.pdf&#34;&gt;&lt;em&gt;ggmap&lt;/em&gt;&lt;/a&gt; nos facilita el trabajo para crear mapas.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#instalamos los paquetes osmdata, sf, tidyverse y ggmap
if(!require(&amp;quot;osmdata&amp;quot;)) install.packages(&amp;quot;osmdata&amp;quot;)
if(!require(&amp;quot;tidyverse&amp;quot;)) install.packages(&amp;quot;tidyverse&amp;quot;)
if(!require(&amp;quot;sf&amp;quot;)) install.packages(&amp;quot;sf&amp;quot;)
if(!require(&amp;quot;ggmap&amp;quot;)) install.packages(&amp;quot;ggmap&amp;quot;)

#cargamos las librerías
library(tidyverse)
library(osmdata)
library(sf)
library(ggmap)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;construir-una-consulta&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Construir una consulta&lt;/h2&gt;
&lt;p&gt;Antes de crear una consulta, debemos conocer qué podemos filtrar. La función &lt;code&gt;available_features( )&lt;/code&gt; nos devuelve un listado amplio de las características disponibles en OSM que a su vez tienen diferentes categorías (&lt;em&gt;tags&lt;/em&gt;). Están disponibles más detalles en la &lt;em&gt;wiki&lt;/em&gt; de OSM &lt;a href=&#34;https://wiki.openstreetmap.org/wiki/ES:Caracter%C3%ADsticas_del_mapa&#34;&gt;aquí&lt;/a&gt;. Por ejemplo, la característica &lt;em&gt;shop&lt;/em&gt; contiene como categoría entre otros &lt;em&gt;supermarket&lt;/em&gt;, &lt;em&gt;fishing&lt;/em&gt;, &lt;em&gt;books&lt;/em&gt;, etc.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#las primeras cinco características 
head(available_features())&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;4wd only&amp;quot;  &amp;quot;abandoned&amp;quot; &amp;quot;abutters&amp;quot;  &amp;quot;access&amp;quot;    &amp;quot;addr&amp;quot;      &amp;quot;addr:city&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#instalaciones y establecimientos públicos
head(available_tags(&amp;quot;amenity&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;animal boarding&amp;quot; &amp;quot;animal shelter&amp;quot;  &amp;quot;archive&amp;quot;         &amp;quot;arts centre&amp;quot;    
## [5] &amp;quot;atm&amp;quot;             &amp;quot;baby hatch&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#tiendas
head(available_tags(&amp;quot;shop&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;agrarian&amp;quot;  &amp;quot;alcohol&amp;quot;   &amp;quot;anime&amp;quot;     &amp;quot;antiques&amp;quot;  &amp;quot;appliance&amp;quot; &amp;quot;art&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;la-primera-consulta-donde-podemos-encontrar-cines-en-madrid&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;La primera consulta: ¿Dónde podemos encontrar cines en Madrid?&lt;/h3&gt;
&lt;p&gt;Para construir la consulta se hace uso del &lt;em&gt;pipe operator&lt;/em&gt; &lt;code&gt;%&amp;gt;%&lt;/code&gt; que ayuda a encadenar varias funciones sin asignar el resultado a un nuevo objeto. Su uso es muy extendido especialmente con el paquete &lt;em&gt;tidyverse&lt;/em&gt;. Si quieres saber más de su uso, &lt;a href=&#34;https://www.datacamp.com/community/tutorials/pipe-r-tutorial&#34;&gt;aquí&lt;/a&gt; tienes un tutorial.&lt;/p&gt;
&lt;p&gt;En la primera parte de la consulta debemos indicar el lugar donde queremos extraer la información. La función &lt;code&gt;getbb( )&lt;/code&gt; crea un rectángulo de selección para un lugar dado, buscando el nombre. La función principal es &lt;code&gt;opq( )&lt;/code&gt; que construye la consulta final. Añadimos con la función &lt;code&gt;add_osm_feature( )&lt;/code&gt; nuestros criterios de filtro. En esta primera consulta buscaremos cines en Madrid. Por eso, usamos como clave &lt;em&gt;amenity&lt;/em&gt; y como categoría &lt;em&gt;cinema&lt;/em&gt;. Existen varios formatos para obtener el resultado de la consulta. La función &lt;code&gt;osmdata_*( )&lt;/code&gt; envía la consulta al servidor y en función del sufijo * sf/sp/xml nos devuelve el formato &lt;em&gt;simple feature&lt;/em&gt;, &lt;em&gt;spatial&lt;/em&gt; o &lt;em&gt;XML&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#construcción de la consulta
q &amp;lt;- getbb(&amp;quot;Madrid&amp;quot;)%&amp;gt;%
      opq()%&amp;gt;%
       add_osm_feature(&amp;quot;amenity&amp;quot;, &amp;quot;cinema&amp;quot;)

str(q) #la estructura de la consulta&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 4
##  $ bbox    : chr &amp;quot;40.3119774,-3.8889539,40.6437293,-3.5179163&amp;quot;
##  $ prefix  : chr &amp;quot;[out:xml][timeout:25];\n(\n&amp;quot;
##  $ suffix  : chr &amp;quot;);\n(._;&amp;gt;;);\nout body;&amp;quot;
##  $ features: chr &amp;quot; [\&amp;quot;amenity\&amp;quot;=\&amp;quot;cinema\&amp;quot;]&amp;quot;
##  - attr(*, &amp;quot;class&amp;quot;)= chr [1:2] &amp;quot;list&amp;quot; &amp;quot;overpass_query&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cinema &amp;lt;- osmdata_sf(q)
cinema&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Object of class &amp;#39;osmdata&amp;#39; with:
##                  $bbox : 40.3119774,-3.8889539,40.6437293,-3.5179163
##         $overpass_call : The call submitted to the overpass API
##                  $meta : metadata including timestamp and version numbers
##            $osm_points : &amp;#39;sf&amp;#39; Simple Features Collection with 195 points
##             $osm_lines : NULL
##          $osm_polygons : &amp;#39;sf&amp;#39; Simple Features Collection with 12 polygons
##        $osm_multilines : NULL
##     $osm_multipolygons : NULL&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vemos que el resultado es una lista de distintos objetos espaciales. En nuestro caso únicamente nos interesaría &lt;em&gt;osm_points&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;¿Cómo podemos visulizar estos puntos?&lt;/p&gt;
&lt;p&gt;La ventaja de objetos &lt;em&gt;sf&lt;/em&gt; es que para &lt;em&gt;ggplot2&lt;/em&gt; existe una geometría propia &lt;code&gt;geom_sf( )&lt;/code&gt;. Además, haciendo uso de &lt;em&gt;ggmap&lt;/em&gt; podemos incluir un mapa de fondo. La función &lt;code&gt;get_map( )&lt;/code&gt; descarga el mapa para un lugar dado. En lugar puede ser una dirección, latitud/longitud o un rectángulo de selección. El argumento &lt;em&gt;maptype&lt;/em&gt; nos permite indicar el estilo o tipo de mapa. Podemos consultar más detalles en la ayuda de la función &lt;code&gt;?get_map&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Cuando construimos un gráfico con &lt;em&gt;ggplot&lt;/em&gt; habitualmente empezamos con &lt;code&gt;ggplot( )&lt;/code&gt;. En este caso, se empieza por &lt;code&gt;ggmap( )&lt;/code&gt; que incluye el objeto con nuestro mapa de fondo. Después añadimos con &lt;code&gt;geom_sf( )&lt;/code&gt; los puntos de los cines en Madrid. Es importante indicar con el argumento &lt;em&gt;inherit.aes=FALSE&lt;/em&gt; que debe usar &lt;em&gt;aesthetic mappings&lt;/em&gt; del objeto espacial &lt;em&gt;osm_points&lt;/em&gt;. Además, indicamos el color (&lt;em&gt;colour&lt;/em&gt;, &lt;em&gt;fill&lt;/em&gt;), transparencia (&lt;em&gt;alpha&lt;/em&gt;), tipo y tamaño (&lt;em&gt;size&lt;/em&gt;) del círculo.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#nuestro mapa de fondo
mad_map &amp;lt;- get_map(getbb(&amp;quot;Madrid&amp;quot;),maptype = &amp;quot;toner-background&amp;quot;)

#mapa final
ggmap(mad_map)+
  geom_sf(data=cinema$osm_points,
          inherit.aes =FALSE,
          colour=&amp;quot;#238443&amp;quot;,
          fill=&amp;quot;#004529&amp;quot;,
          alpha=.5,
          size=4,
          shape=21)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2018-11-03-acceso-a-la-base-de-datos-de-openstreetmaps-desde-r/index.es_files/figure-html/fig.width==5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;donde-estan-los-supermercados-de-mercadona&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;¿Dónde están los supermercados de Mercadona?&lt;/h3&gt;
&lt;p&gt;En lugar de obtener un rectángulo de selección con la función &lt;code&gt;getbb( )&lt;/code&gt; podemos construir nuestro propio. Para ello, creamos una matriz de dos columnas, siendo aquí el orden Este/Oeste/Sur/Norte. En la consulta usamos dos características: &lt;em&gt;name&lt;/em&gt; y &lt;em&gt;shop&lt;/em&gt; para poder filtrar supermercados que sean de esta marca en concreto. En función del area o bien del volumen que tenga la consulta, es necesario ampliar el tiempo de espera. Por defecto, son 25 segundo (&lt;em&gt;timeout&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;El mapa que creamos en este caso se basa únicamente en los puntos de supermercados. Por eso, usamos la gramática habitual añadiendo la geometría &lt;code&gt;geom_sf( )&lt;/code&gt;. La función &lt;code&gt;theme_void( )&lt;/code&gt; elimina todo con excepción de los puntos. Por defecto, el objeto &lt;em&gt;sf&lt;/em&gt; en &lt;em&gt;ggplot&lt;/em&gt; crea retículas que se pueden quitar usando la función &lt;code&gt;coord_sf( )&lt;/code&gt; con el argumento &lt;em&gt;datum=NA&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#rectángulo de selección para la Península Ibérica
m &amp;lt;- matrix(c(-10,5,30,46),ncol=2,byrow=TRUE)
row.names(m) &amp;lt;- c(&amp;quot;x&amp;quot;,&amp;quot;y&amp;quot;)
names(m) &amp;lt;- c(&amp;quot;min&amp;quot;,&amp;quot;max&amp;quot;)

#construcción de la consulta
q &amp;lt;- m %&amp;gt;% 
      opq (timeout=25*100) %&amp;gt;%
         add_osm_feature(&amp;quot;name&amp;quot;,&amp;quot;Mercadona&amp;quot;)%&amp;gt;%
         add_osm_feature(&amp;quot;shop&amp;quot;,&amp;quot;supermarket&amp;quot;)

str(q) #estructura de la consulta&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 4
##  $ bbox    : chr &amp;quot;5,-10,46,30&amp;quot;
##  $ prefix  : chr &amp;quot;[out:xml][timeout:2500];\n(\n&amp;quot;
##  $ suffix  : chr &amp;quot;);\n(._;&amp;gt;;);\nout body;&amp;quot;
##  $ features: chr [1:2] &amp;quot; [\&amp;quot;name\&amp;quot;=\&amp;quot;Mercadona\&amp;quot;]&amp;quot; &amp;quot; [\&amp;quot;shop\&amp;quot;=\&amp;quot;supermarket\&amp;quot;]&amp;quot;
##  - attr(*, &amp;quot;class&amp;quot;)= chr [1:2] &amp;quot;list&amp;quot; &amp;quot;overpass_query&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#consulta 
mercadona &amp;lt;- osmdata_sf(q)

#mapa final del resultado
ggplot(mercadona$osm_points)+
  geom_sf(colour=&amp;quot;#08519c&amp;quot;,
          fill=&amp;quot;#08306b&amp;quot;,
          alpha=.5,
          size=1,
          shape=21)+
  coord_sf(datum=NA)+
  theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/es/2018-11-03-acceso-a-la-base-de-datos-de-openstreetmaps-desde-r/index.es_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Spatio-temporal variations of cloud fraction based on circulation types in the Iberian Peninsula</title>
      <link>/es/publication/cloudiness_ip_2018/</link>
      <pubDate>Thu, 01 Nov 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/publication/cloudiness_ip_2018/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
