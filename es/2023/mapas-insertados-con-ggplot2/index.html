<!DOCTYPE html><html lang="es-ES" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.3.0 for Hugo" />
  

  
  









  




  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Dr. Dominic Royé" />

  
  
  
    
  
  <meta name="description" content="Un breve post sobre cómo podemos posicionar un territorio ultraperiférico cerca del mapa principal o insertar un mapa de orientación. En este ejemplo usamos el típico mapa de España en el que se situan las Islas Canarias en el suroeste de la península." />

  
  <link rel="alternate" hreflang="es-ES" href="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/" />

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b48d89910a3f8560bb2d78fedea8d682.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-27463794-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-27463794-2', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/es/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu27cb63416a395b8c8d0d7112b85e26a9_17299_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu27cb63416a395b8c8d0d7112b85e26a9_17299_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@@dr_xeo" />
    <meta property="twitter:creator" content="@@dr_xeo" />
  
  <meta property="og:site_name" content="Dr. Dominic Royé" />
  <meta property="og:url" content="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/" />
  <meta property="og:title" content="Mapas insertados con ggplot2 | Dr. Dominic Royé" />
  <meta property="og:description" content="Un breve post sobre cómo podemos posicionar un territorio ultraperiférico cerca del mapa principal o insertar un mapa de orientación. En este ejemplo usamos el típico mapa de España en el que se situan las Islas Canarias en el suroeste de la península." /><meta property="og:image" content="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/featured.png" />
    <meta property="twitter:image" content="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/featured.png" /><meta property="og:locale" content="es-ES" />
  
    
      <meta
        property="article:published_time"
        content="2023-10-08T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2023-10-08T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/"
  },
  "headline": "Mapas insertados con ggplot2",
  
  "image": [
    "https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/featured.png"
  ],
  
  "datePublished": "2023-10-08T00:00:00Z",
  "dateModified": "2023-10-08T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Dr. Dominic Royé"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "University of Santiago de Compostela",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dominicroye.github.io/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_192x192_fit_lanczos_3.png"
    }
  },
  "description": "Un breve post sobre cómo podemos posicionar un territorio ultraperiférico cerca del mapa principal o insertar un mapa de orientación. En este ejemplo usamos el típico mapa de España en el que se situan las Islas Canarias en el suroeste de la península."
}
</script>

  

  

  

  





  <title>Mapas insertados con ggplot2 | Dr. Dominic Royé</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="be7b831372df60fecf3d2d481aba319d" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.2da3b1fa37e894630bf6de39b1b694b3.js"></script>

  




  <div class="page-header">
    







 



  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/es/"><img src="/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_0x70_resize_lanczos_3.png" alt="Dr. Dominic Royé"
            
            >
             <div style = "padding-top:0.5em;">Dr. Dominic Royé</div></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Barra de navegación">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/es/"><img src="/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_0x70_resize_lanczos_3.png" alt="Dr. Dominic Royé"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          

          

          
          
          
          

          
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#"><span>inicio</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#posts"><span>blog</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#featured"><span>publicaciones</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#projects"><span>gráficos</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#about"><span>mí</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/dr_xeo" data-toggle="tooltip" data-placement="bottom" title="Sígueme en Twitter" target="_blank" rel="noopener" aria-label="Sígueme en Twitter">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        

        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Mapas insertados con ggplot2</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2023-10-08
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    6 min de lectura
  </span>
  

  
  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/es/category/sig/">sig</a>, <a href="/es/category/r/">R</a>, <a href="/es/category/rprincipante/">R:principante</a>, <a href="/es/category/visualizacion/">visualización</a></span>
  

</div>

  





</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 556px;">
  <div style="position: relative">
    <img src="/es/2023/mapas-insertados-con-ggplot2/featured_hu2ba59fb5237e9827d37ca204b2ab70c2_197344_720x0_resize_lanczos_3.png" width="720" height="556" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      


<p>Hoy os presento un breve post sobre cómo podemos posicionar un territorio ultraperiférico cerca del mapa principal o insertar un mapa de orientación. En este ejemplo usamos el típico mapa de España en el que se situan las Islas Canarias en el suroeste de la península.</p>
<div id="paquetes" class="section level1">
<h1>Paquetes</h1>
<table>
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Paquete</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">tidyverse</td>
<td align="left">Conjunto de paquetes (visualización y manipulación de datos): ggplot2, dplyr, purrr,etc.</td>
</tr>
<tr class="even">
<td align="left">mapSpain</td>
<td align="left">Límites administrativos de España a diferentes niveles</td>
</tr>
<tr class="odd">
<td align="left">sf</td>
<td align="left">Simple Feature: importar, exportar y manipular datos vectoriales</td>
</tr>
<tr class="even">
<td align="left">giscoR</td>
<td align="left">Límites administrativos del mundo</td>
</tr>
<tr class="odd">
<td align="left">patchwork</td>
<td align="left">Simple gramática para combinar ggplots separados en el mismo gráfico</td>
</tr>
<tr class="even">
<td align="left">rmapshaper</td>
<td align="left">Cliente de la librería ‘mapshaper’ para operaciones geoespaciales</td>
</tr>
</tbody>
</table>
<pre class="r"><code># instalamos los paquetes si hace falta
if(!require(&quot;tidyverse&quot;)) install.packages(&quot;tidyverse&quot;)
if(!require(&quot;mapSpain&quot;)) install.packages(&quot;mapSpain&quot;)
if(!require(&quot;sf&quot;)) install.packages(&quot;sf&quot;)
if(!require(&quot;giscoR&quot;)) install.packages(&quot;giscoR&quot;)
if(!require(&quot;patchwork&quot;)) install.packages(&quot;patchwork&quot;)
if(!require(&quot;rmapshaper&quot;)) install.packages(&quot;rmapshaper&quot;)

# paquetes
library(sf)
library(giscoR)
library(mapSpain)
library(tidyverse)
library(patchwork)
library(rmapshaper)</code></pre>
</div>
<div id="opción-1" class="section level1">
<h1>Opción 1</h1>
<p>Podemos encontrar fácilmente algunos límites administrativos de estados como España, en los que se ha cambiado la posición geográfica real de un territorio alejado, como ocurre con las Islas Canarias. El paquete <code>mapSpain</code> por defecto desplaza las islas al suroeste de la Península Ibérica, una posición habitual que vemos en muchos mapas. No obstante, estos límites vectoriales con desplazmiento no los podemos usar en todos los supuestos, dado que se trata de una posición geográfica falsa no es apto para cálculos espaciales ni tampoco para otras proyecciones.</p>
<p>Obtenemos los límites vectoriales usando la función <code>esp_get_prov()</code> para el nivel provincial con el código de proyección EPSG:4326 (WGS84). En la construcción del mapa vía <code>ggplot2</code> simplemente añadimos el objeto a la geometría <code>geom_sf()</code> específicamente diseñado para el manejo de objetos vectoriales de clase <code>sf</code>.</p>
<pre class="r"><code># limites provincias con desplazmiento de Canarias
esp &lt;- esp_get_prov(epsg = 4326)

# mapa básico
ggplot(esp) +
  geom_sf(colour = &quot;white&quot;, linewidth = .2) +
    theme_void()</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><code>mapSpain</code> también incluye una función para obtener la caja de separación (<code>esp_get_can_box()</code>) con el objetivo de indicar la falsa localización. Con la función <code>gisco_get_countries()</code> obtenemos los límites globales de países para añadirlo como contexto geográfico, aunque lo recortamos a la extensión de la Península Ibérica. Puede sorprender ver un recorte curvado usando la proyección WGS84, pero se debe a que se usa geometría esférica por defecto en todas las operaciones con <code>sf</code> (<code>sf_use_s2()</code>).</p>
<pre class="r"><code># añadimos la caja de Canarias y los límites del entorno
can_bx &lt;- esp_get_can_box(epsg = 4326)
entorno &lt;- gisco_get_countries(resolution = &quot;10&quot;) %&gt;% 
             st_crop(xmin = -10, xmax = 5, ymin = 34, ymax = 45)

# con Canarias desplazadas
ggplot(esp) +
  geom_sf(data = entorno, fill = &quot;grey70&quot;, colour = NA) +
  geom_sf(colour = &quot;white&quot;, linewidth = .2) +
  geom_sf(data = can_bx, linewidth = .3, colour = &quot;grey80&quot;) +
  theme_void()</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="opción-2" class="section level1">
<h1>Opción 2</h1>
<p>La forma más correcta es crear un objeto para el mapa insertado, aquí las Islas Canarias, y otro para el mapa principal, España peninsular y las Islas Baleares. En la función <code>esp_get_prov()</code> debemos indicar que nos devuelva los límites sin desplazamiento con el agrumento <code>moveCAN = FALSE</code>. Primero, construimos el mapa de Canarias, filtrando la comunidad autónoma. Las geometrías <code>geom_hline()</code> y <code>geom_vline()</code> dibujarán la línea de separación hacia la penínula. El segundo paso consiste en crear el mapa principal excluyendo las Islas Canarias. Después falta por incluir el mapa de Canarias como objeto empleando la función <code>annotation_custom()</code>. El objeto <code>ggplot</code> lo debemos convertir a un <em>grob</em> con <code>ggplotGrob()</code> e indicar el área de posición (los extremos de X y Y) en el sistema de coordenadas del mapa principal. Esta forma se puede usar para todos los tipos de mapas.</p>
<pre class="r"><code># límites de provincias sin desplazmiento de Canarias
esp &lt;- esp_get_prov(epsg = 4326, moveCAN = F)

# mapa de Canarias
can &lt;-  filter(esp, nuts2.name == &quot;Canarias&quot;) %&gt;%
          ggplot() +
            geom_vline(xintercept = -13.3, colour = &quot;grey80&quot;) +
            geom_hline(yintercept = 29.5, colour = &quot;grey80&quot;) +
            geom_sf(fill = &quot;red&quot;, colour = &quot;white&quot;) +
            coord_sf(expand = F) +
            theme_void() 
can</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code># añadir mapa ggplot con annotation_custom() posición absoluta según SRC
filter(esp, nuts2.name != &quot;Canarias&quot;) %&gt;%
  ggplot() +
  geom_sf(data = entorno, fill = &quot;grey70&quot;, colour = NA) +
  geom_sf(colour = &quot;white&quot;, linewidth = .2) +
  annotation_custom(ggplotGrob(can),
                    xmin = -14, xmax = -9,
                    ymin = 33, ymax = 38) +
  theme_void()</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<p>Si queremos proyectar el mapa principal, únicamente debemos proyectar antes el área de posición del mapa insertado.</p>
<pre class="r"><code># caja de posición con algun ajuste 
pos &lt;- c(xmin = -13.5, ymin = 32.5, xmax = -8.5, ymax = 37.5) 
class(pos) &lt;- &quot;bbox&quot; # definimos como bbox

# reproyectamos a  LAEA Europe EPSG:3035
pos_prj &lt;- st_as_sfc(pos) %&gt;% 
  st_set_crs(4326) %&gt;%
  st_transform(3035) %&gt;% 
  st_bbox()

# creamos el mapa final
filter(esp, nuts2.name != &quot;Canarias&quot;) %&gt;%
  ggplot() +
  geom_sf(data = entorno, fill = &quot;grey70&quot;, colour = NA) +
  geom_sf(colour = &quot;white&quot;, linewidth = .2) +
  annotation_custom(ggplotGrob(can),
                    xmin = pos_prj[1], xmax = pos_prj[3],
                    ymin = pos_prj[2], ymax = pos_prj[4]) +
  coord_sf(crs = 3035) +
  theme_void()</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="opción-3" class="section level1">
<h1>Opción 3</h1>
<p>La última opción para insersar un mapa secundario es el uso de la función <code>inset_element()</code> del paquete <code>patchwork</code>. La gran diferencia con el método anterior es la posición relativa, lo que limita el uso. En este caso no se deberían representar símbolos proporcionales dado que la insertación relativa no mantiene las mismas dimensiones del mapa principal.</p>
<pre class="r"><code># limites provincias
esp &lt;- esp_get_prov(epsg = 4326, moveCAN = F)

# mapa Canarias
can &lt;-  filter(esp, nuts2.name == &quot;Canarias&quot;) %&gt;%
          ggplot() +
            geom_vline(xintercept = -13.3, colour = &quot;grey80&quot;) +
            geom_hline(yintercept = 29.5, colour = &quot;grey80&quot;) +
            geom_sf(fill = &quot;red&quot;, colour = &quot;white&quot;) +
            coord_sf(expand = F) +
            theme_void() 

# mapa principal
m &lt;- filter(esp, nuts2.name != &quot;Canarias&quot;) %&gt;%
  ggplot() +
  geom_sf(colour = &quot;white&quot;, linewidth = .2) +
  theme_void()

# insertar con posición relativa 
m + inset_element(can, left = -.1, bottom = 0, 
                  right = .2, top = .2, 
                  align_to = &quot;full&quot;)</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="globo-terráqueo-como-mapa-insertado" class="section level1">
<h1>Globo terráqueo como mapa insertado</h1>
<p>La única dificultad aquí consiste en la proyección ortogonal preservando la geometría visible de la tierra.
El primer paso es la creación del “océano” usando el radio de la tierra desde el punto 0,0. Después únicamente debemos recortar la parte visible y reproyectar los límites. En la definición de la proyección ortogonal es posible centrar en diferentes latitudes y longitudes cambiando los valores de <code>+lat_0</code> y <code>+lon_0</code>. La funciones <code>ms_innerlines()</code> del paquete <code>rmapshaper</code> crean fácilmente los límites internos de polígonos, lo que es recommendable para evitar el desdibuje de pequeñas áreas.</p>
<pre class="r"><code># límites globales de países
wld &lt;- gisco_get_countries(resolution = &quot;20&quot;)

# definición de la proyección ortogonal
ortho_crs &lt;-&#39;+proj=ortho +lat_0=30 +lon_0=0.5 +x_0=0 +y_0=0 +R=6371000 +units=m +no_defs +type=crs&#39;

# creación del oceano 
ocean &lt;- st_point(x = c(0,0)) %&gt;%
            st_buffer(dist = 6371000) %&gt;% # radio Tierra
              st_sfc(crs = ortho_crs)
plot(ocean)</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code># recortamos la tierra visible y reproyectamos
world &lt;-   st_intersection(wld, st_transform(ocean, 4326)) %&gt;%
            st_transform(crs = ortho_crs) %&gt;% 
            mutate(dummy = ifelse(NAME_ENGL == &quot;Spain&quot;, &quot;yes&quot;, &quot;no&quot;))

plot(world)</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code># obtenemos únicamente los límites internos
world_line &lt;- ms_innerlines(world)
plot(world_line)</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
<pre class="r"><code># mapa principal de España 
wld_map &lt;- ggplot(world) +
            geom_sf(data = ocean, fill = &quot;#deebf7&quot;, linewidth = .2) +
            geom_sf(aes(fill = dummy), 
                    colour = NA,
                    show.legend = F) +
            geom_sf(data = world_line, linewidth = .05, colour = &quot;white&quot;) +
            scale_fill_manual(values = c(&quot;grey50&quot;, &quot;red&quot;)) + 
            theme_void()

# insertamos el globo marcando la localización de España 
m + inset_element(wld_map, left = 0.65, bottom = 0.82, right = 1.1, top = 1, align_to = &quot;full&quot;)</code></pre>
<p><img src="https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/index.es_files/figure-html/unnamed-chunk-8-4.png" width="672" /></p>
<p><a href="https://www.buymeacoffee.com/drxeo" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" height="41" width="174"></a></p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/es/tag/mapa-insertado/">mapa insertado</a>
  
  <a class="badge badge-light" href="/es/tag/espana/">españa</a>
  
  <a class="badge badge-light" href="/es/tag/canarias/">canarias</a>
  
  <a class="badge badge-light" href="/es/tag/globo/">globo</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/&amp;text=Mapas%20insertados%20con%20ggplot2" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/&amp;t=Mapas%20insertados%20con%20ggplot2" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Mapas%20insertados%20con%20ggplot2&amp;body=https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/&amp;title=Mapas%20insertados%20con%20ggplot2" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Mapas%20insertados%20con%20ggplot2%20https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://dominicroye.github.io/es/2023/mapas-insertados-con-ggplot2/&amp;title=Mapas%20insertados%20con%20ggplot2" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://dominicroye.github.io/"><img class="avatar mr-3 avatar-circle" src="/es/author/dr.-dominic-roye/avatar_hu930bec32484cd86675af8880de95caa2_508993_270x270_fill_q75_lanczos_center.jpg" alt="Dr. Dominic Royé"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://dominicroye.github.io/">Dr. Dominic Royé</a></h5>
      <h6 class="card-subtitle">Investigador y responsable de ciencia de datos</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/dr_xeo" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:dominic.roye@ficlima.org" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.es/citations?user=EoYa8jUAAAAJ&amp;hl=es" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/dominicroye" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/dominicroye/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://www.researchgate.net/profile/Dominic_Roye" target="_blank" rel="noopener">
        <i class="ai ai-researchgate"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>
















  
  
  <div class="article-widget content-widget-hr">
    <h3>Relacionado</h3>
    <ul>
      
      <li><a href="/es/2023/el-tiempo-de-manana/">El tiempo de mañana</a></li>
      
      <li><a href="/es/2022/uso-de-datos-multidimensionales-espaciales/">Uso de datos multidimensionales espaciales</a></li>
      
      <li><a href="/es/2024/mapa-de-circulos-agrupados-en-multiples-localizaciones/">Mapa de círculos agrupados en múltiples localizaciones</a></li>
      
      <li><a href="/es/2022/efecto-hillshade-o-sombras-de-laderas/">Efecto hillshade o sombras de laderas</a></li>
      
      <li><a href="/es/2021/visualizar-el-ciclo-de-dia-noche-en-un-mapamundi/">Visualizar el ciclo de día-noche en un mapamundi</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  

  
  <p class="powered-by">
    © 2018-2023 Dominic Royé. All rights reserved
  </p>
  

  
  






  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Citar</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copiar
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Descargar
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    <script src="/js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js"></script>

    
    
    
      
      
        <script src="https://cdn.jsdelivr.net/gh/desandro/imagesloaded@v4.1.4/imagesloaded.pkgd.min.js" integrity="sha512-S5PZ9GxJZO16tT9r3WJp/Safn31eu8uWrzglMahDT4dsmgqWonRY9grk3j+3tfuPr9WJNsfooOR7Gi7HL5W2jw==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/metafizzy/isotope@v3.0.6/dist/isotope.pkgd.min.js" integrity="sha512-Zq2BOxyhvnRFXu0+WE6ojpZLOU2jdnqbrM1hmVdGzyeCa1DgM3X5Q4A/Is9xA1IkbUeDd7755dNNI/PzSf2Pew==" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/r.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    
      <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    <script src="/es/js/wowchemy.min.50d3bf3df0c53b31631bb48a62b35f92.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
