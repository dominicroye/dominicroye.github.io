<!DOCTYPE html><html lang="es-ES" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.3.0 for Hugo" />
  

  
  









  




  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Dr. Dominic Royé" />

  
  
  
    
  
  <meta name="description" content="En geografía, la distancia al mar es una variable fundamental, especialmente relevante a la hora de modelizar. Por ejemplo, en interpolaciones de la temperatura del aire habitualmente se hace uso de la distancia al mar como variable predictora, ya que existe una relación casual entre ambas que explica la variación espacial. ¿Cómo podemos estimar la distancia (más corta) a la costa en R?" />

  
  <link rel="alternate" hreflang="es-ES" href="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/" />

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b48d89910a3f8560bb2d78fedea8d682.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-27463794-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-27463794-2', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/es/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu27cb63416a395b8c8d0d7112b85e26a9_17299_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu27cb63416a395b8c8d0d7112b85e26a9_17299_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@@dr_xeo" />
    <meta property="twitter:creator" content="@@dr_xeo" />
  
  <meta property="og:site_name" content="Dr. Dominic Royé" />
  <meta property="og:url" content="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/" />
  <meta property="og:title" content="Calcular la distancia al mar en R | Dr. Dominic Royé" />
  <meta property="og:description" content="En geografía, la distancia al mar es una variable fundamental, especialmente relevante a la hora de modelizar. Por ejemplo, en interpolaciones de la temperatura del aire habitualmente se hace uso de la distancia al mar como variable predictora, ya que existe una relación casual entre ambas que explica la variación espacial. ¿Cómo podemos estimar la distancia (más corta) a la costa en R?" /><meta property="og:image" content="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/featured.jpg" />
    <meta property="twitter:image" content="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/featured.jpg" /><meta property="og:locale" content="es-ES" />
  
    
      <meta
        property="article:published_time"
        content="2019-01-08T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2019-01-08T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/"
  },
  "headline": "Calcular la distancia al mar en R",
  
  "image": [
    "https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/featured.jpg"
  ],
  
  "datePublished": "2019-01-08T00:00:00Z",
  "dateModified": "2019-01-08T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Dr. Dominic Royé"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "University of Santiago de Compostela",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dominicroye.github.io/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_192x192_fit_lanczos_3.png"
    }
  },
  "description": "En geografía, la distancia al mar es una variable fundamental, especialmente relevante a la hora de modelizar. Por ejemplo, en interpolaciones de la temperatura del aire habitualmente se hace uso de la distancia al mar como variable predictora, ya que existe una relación casual entre ambas que explica la variación espacial. ¿Cómo podemos estimar la distancia (más corta) a la costa en R?"
}
</script>

  

  

  

  





  <title>Calcular la distancia al mar en R | Dr. Dominic Royé</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="a9c7a1973a23786c34b109fed2a3286e" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.2da3b1fa37e894630bf6de39b1b694b3.js"></script>

  




  <div class="page-header">
    







 



  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/es/"><img src="/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_0x70_resize_lanczos_3.png" alt="Dr. Dominic Royé"
            
            >
             <div style = "padding-top:0.5em;">Dr. Dominic Royé</div></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Barra de navegación">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/es/"><img src="/media/logo_hu6637600e1c36fe7812a10a6623aaebda_116520_0x70_resize_lanczos_3.png" alt="Dr. Dominic Royé"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          

          

          
          
          
          

          
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#"><span>inicio</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#posts"><span>blog</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#featured"><span>publicaciones</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#projects"><span>gráficos</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/es/#about"><span>mí</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/dr_xeo" data-toggle="tooltip" data-placement="bottom" title="Sígueme en Twitter" target="_blank" rel="noopener" aria-label="Sígueme en Twitter">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        

        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Calcular la distancia al mar en R</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2019-01-08
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min de lectura
  </span>
  

  
  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/es/category/sig/">sig</a>, <a href="/es/category/r/">R</a>, <a href="/es/category/relemental/">R:elemental</a></span>
  

</div>

  





</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 302px;">
  <div style="position: relative">
    <img src="/es/2019/calcular-la-distancia-al-mar-en-r/featured_hu987eb252c5a3adbf8f2c2e98fd68b622_3121564_720x0_resize_q75_lanczos.jpg" width="720" height="302" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/header-attrs/header-attrs.js"></script>


<p>En geografía, la distancia al mar es una variable fundamental, especialmente relevante a la hora de modelizar. Por ejemplo, en interpolaciones de la temperatura del aire habitualmente se hace uso de la distancia al mar como variable predictora, ya que existe una relación casual entre ambas que explica la variación espacial. ¿Cómo podemos estimar la distancia (más corta) a la costa en R?</p>
<div id="paquetes" class="section level2">
<h2>Paquetes</h2>
<p>En este post usaremos los siguientes paquetes:</p>
<table>
<colgroup>
<col width="14%" />
<col width="85%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Paquete</th>
<th align="left">Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">tidyverse</td>
<td align="left">Conjunto de librerías (visualización y manipulación de datos): ggplot2, dplyr, etc.</td>
</tr>
<tr class="even">
<td align="left">sf</td>
<td align="left">Simple Feature: importar, exportar y manipular datos vectoriales</td>
</tr>
<tr class="odd">
<td align="left">raster</td>
<td align="left">Importar, exportar y manipular raster</td>
</tr>
<tr class="even">
<td align="left">rnaturalearth</td>
<td align="left">Conjunto de mapas vectoriales ‘natural earth’</td>
</tr>
<tr class="odd">
<td align="left">RColorBrewer</td>
<td align="left">Paletas de colores</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#instalamos los paquetes si hace falta
if(!require(&quot;tidyverse&quot;)) install.packages(&quot;tidyverse&quot;)
if(!require(&quot;sf&quot;)) install.packages(&quot;sf&quot;)
if(!require(&quot;raster&quot;)) install.packages(&quot;raster&quot;)
if(!require(&quot;rnaturalearth&quot;)) install.packages(&quot;rnaturalearth&quot;)

#paquetes
library(rnaturalearth)
library(sf)
library(raster)
library(tidyverse)
library(RColorBrewer)</code></pre>
</div>
<div id="la-costa-de-islandia-como-ejemplo" class="section level2">
<h2>La costa de Islandia como ejemplo</h2>
<p>Nuestro ejemplo en este post será Islandia, como es un territorio insular facilitará el ensayo y de este modo es posible mostrar el proceso de forma sencilla. La librería <em>rnaturalearth</em> permite importar los límites de países (con diferentes niveles administrativos) de todo el mundo. Los datos vienen de la plataforma <a href="http://www.naturalearthdata.com/">naturalearthdata.com</a>. Recomiendo explorar la librería, más info <a href="https://github.com/ropensci/rnaturalearth">aquí</a>. La función <code>ne_countries( )</code> importa los límites de países. En este caso indicamos con el argumento <em>scale</em> la resolución (10,50 o 110m), con <em>country</em> indicamos el país concreto de interés y con <em>returnclass</em> determinamos que clase queremos (<em>sf</em> o <em>sp</em>), en nuestro caso <em>sf</em> (simple feature).</p>
<pre class="r"><code>world &lt;- ne_countries(scale = 50) #mapamundi con 50m de resolución

plot(world) #tiene clase sp por defecto</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>#importamos los límites de Islandia 
iceland &lt;- ne_countries(scale = 10,country = &quot;Iceland&quot;, returnclass = &quot;sf&quot;)

#info del objeto vectorial
iceland</code></pre>
<pre><code>## Simple feature collection with 1 feature and 94 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -24.53991 ymin: 63.39671 xmax: -13.50292 ymax: 66.56415
## CRS:           +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
##          featurecla scalerank labelrank sovereignt sov_a3 adm0_dif level
## 188 Admin-0 country         0         3    Iceland    ISL        0     2
##                  type   admin adm0_a3 geou_dif geounit gu_a3 su_dif subunit
## 188 Sovereign country Iceland     ISL        0 Iceland   ISL      0 Iceland
##     su_a3 brk_diff    name name_long brk_a3 brk_name brk_group  abbrev postal
## 188   ISL        0 Iceland   Iceland    ISL  Iceland      &lt;NA&gt; Iceland     IS
##               formal_en formal_fr name_ciawf note_adm0 note_brk name_sort
## 188 Republic of Iceland      &lt;NA&gt;    Iceland      &lt;NA&gt;     &lt;NA&gt;   Iceland
##     name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13 pop_est pop_rank
## 188     &lt;NA&gt;         1         4         4          9  339747       10
##     gdp_md_est pop_year lastcensus gdp_year                    economy
## 188      16150     2017         NA     2016 2. Developed region: nonG7
##               income_grp wikipedia fips_10_ iso_a2 iso_a3 iso_a3_eh iso_n3
## 188 1. High income: OECD        NA       IC     IS    ISL       ISL    352
##     un_a3 wb_a2 wb_a3   woe_id woe_id_eh                   woe_note adm0_a3_is
## 188   352    IS   ISL 23424845  23424845 Exact WOE match as country        ISL
##     adm0_a3_us adm0_a3_un adm0_a3_wb continent region_un       subregion
## 188        ISL         NA         NA    Europe    Europe Northern Europe
##                 region_wb name_len long_len abbrev_len tiny homepart min_zoom
## 188 Europe &amp; Central Asia        7        7          7   NA        1        0
##     min_label max_label      ne_id wikidataid name_ar name_bn name_de name_en
## 188         2         7 1159320917       Q189    &lt;NA&gt;    &lt;NA&gt;  Island Iceland
##      name_es name_fr name_el name_hi name_hu  name_id name_it name_ja name_ko
## 188 Islandia Islande    &lt;NA&gt;    &lt;NA&gt;  Izland Islandia Islanda    &lt;NA&gt;    &lt;NA&gt;
##     name_nl  name_pl  name_pt name_ru name_sv name_tr name_vi name_zh
## 188 IJsland Islandia Islândia    &lt;NA&gt;  Island Izlanda Iceland    &lt;NA&gt;
##                           geometry
## 188 MULTIPOLYGON (((-14.56363 6...</code></pre>
<pre class="r"><code>#aquí Islandia
plot(iceland)</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<p>Por defecto, la función <code>plot( )</code> con la clase <em>sf</em> nos crea tantas facetas del mapa como variables tiene. Para limitarlo podemos usar o bien con el nombre de una variable <code>plot(iceland["admin"])</code> o el argumento <em>max.plot</em> <code>plot(iceland,max.plot=1)</code>. Con el argumento <em>max.plot=1</em> la función usa la primera variable disponible del mapa.</p>
<p>Además, vemos en la información del objeto <em>sf</em> que la proyección es WGS84 con grados decimales (código EPSG:4326). Para el cálculo de distancias es más conveniente usar metros en lugar de grados. Debido a ello, lo primero que hacemos es transformar el mapa de Islandia a UTM Zona 27 (código EPSG:3055). Más información sobre EPSG y proyecciones <a href="http://spatialreference.org/ref/epsg/wgs-84/">aquí</a>. Con ese objetivo, usamos la función <code>st_transform( )</code>. Simplemente indicamos el mapa y el código EPSG.</p>
<pre class="r"><code>#transformamos a UTM
iceland &lt;- st_transform(iceland, 3055)</code></pre>
</div>
<div id="crear-una-red-de-puntos" class="section level2">
<h2>Crear una red de puntos</h2>
<p>Todavía necesitamos los puntos donde queremos conocer la distancia. En nuestro caso será una red regular de puntos en Islandia con una resolución de 5km. Esa tarea la hacemos con la función <code>st_make_grid( )</code>, indicando con el argumento <em>cellsize</em> la resolución en la unidad del sistema de coordenadas (metros en nuestro caso) y qué geometría nos gustaría crear <em>what</em> (poligonos, centros o esquinas).</p>
<pre class="r"><code>#crear red de puntos
grid &lt;- st_make_grid(iceland,cellsize = 5000, what = &quot;centers&quot;)

#nuestra red sobre la extensión de Islandia
plot(grid)</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>#exraemos sólamente los puntos en los límites de Islandia
grid &lt;- st_intersection(grid, iceland)   

#nuestra red ahora
plot(grid)</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="calcular-la-distancia" class="section level2">
<h2>Calcular la distancia</h2>
<p>Para estimar la distancia usamos la función <code>st_distance( )</code> que nos devuelve un vector de distancias para todos nuestros puntos de la red. Pero antes es necesario transformar el mapa de Islandia de una forma de polígono (MULTIPOLYGON) a línea (MULTILINESTRING). Más detalles con <code>?st_cast</code>.</p>
<pre class="r"><code>#convertimos Islandia de geometría poligono a línea
iceland &lt;- st_cast(iceland, &quot;MULTILINESTRING&quot;)

#cálculo de la distancia entre la costa y nuestros puntos
dist &lt;- st_distance(iceland, grid)

#distancia con unidad en metros
head(dist[1,])</code></pre>
<pre><code>## Units: [m]
## [1]  790.7906 1151.4360 1270.7603 3128.9057 2428.5677 4197.7472</code></pre>
</div>
<div id="visualizar-la-distancia-calculada" class="section level2">
<h2>Visualizar la distancia calculada</h2>
<p>Una vez obtenida la distancia para nuestros puntos, podemos combinarlos con las coordenadas y plotearlos en <em>ggplot2</em>. Para ello, creamos un <em>data.frame</em>. El objeto <em>dist</em> es una matriz de una columna, por eso, tenemos que convertirla a vector con la función <code>as.vector( )</code>. Además, dividimos por 1000 para convertir la distancia en metros a km. La función <code>st_coordinates( )</code> extrae las coordenadas de nuestros puntos. Para la visualización usamos un vector de colores con la gama RdGy (más <a href="http://colorbrewer2.org">aquí</a>).</p>
<pre class="r"><code>#creamos un data.frame con la distancia y las coorendas de los puntos
df &lt;- data.frame(dist = as.vector(dist)/1000,
                    st_coordinates(grid))

#estructura
str(df)</code></pre>
<pre><code>## &#39;data.frame&#39;:    4104 obs. of  3 variables:
##  $ dist: num  0.791 1.151 1.271 3.129 2.429 ...
##  $ X   : num  608796 613796 583796 588796 593796 ...
##  $ Y   : num  7033371 7033371 7038371 7038371 7038371 ...</code></pre>
<pre class="r"><code>#colores 
col_dist &lt;- brewer.pal(11, &quot;RdGy&quot;)


ggplot(df, aes(X, Y,fill = dist))+ #variables
         geom_tile()+ #geometría
           scale_fill_gradientn(colours = rev(col_dist))+ #colores para la distancia
             labs(fill = &quot;Distance (km)&quot;)+ #nombre de la leyenda
             theme_void()+ #estilo del mapa
              theme(legend.position = &quot;bottom&quot;) #posición de la leyenda</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="exportar-la-distancia-como-raster" class="section level2">
<h2>Exportar la distancia como raster</h2>
<p>Para poder exportar la distancia con respecto al mar de Islandia, debemos usar la función <code>rasterize( )</code> de la librería <em>raster</em>.</p>
<ol style="list-style-type: decimal">
<li><p>Primero, es necesario crear un raster vacío. En este raster debemos indicar la resolución, en nuestro caso es de 5000m, la proyección y la extensión del raster.</p>
<ol style="list-style-type: lower-alpha">
<li><p>La proyección la podemos extraer de la información del mapa de Islandia.</p></li>
<li><p>La extensión la conseguimos extraer de nuestros puntos <em>grid</em> con la función <code>extent( )</code>. No obstante, esta última función necesita la clase <em>sp</em>, por eso pasamos el objeto <em>grid</em> en formato <em>sf</em>, únicamente para ello, a la clase <em>sp</em> usando la función <code>as( )</code> y el argumento “Spatial”.</p></li>
</ol></li>
<li><p>Además de lo anterior, el <em>data.frame</em> <strong>df</strong> que creamos antes debemos convertir en clase <em>sf</em>. Por eso, aplicamos la función <code>st_as_sf( )</code> con el argumento <em>coords</em> indicando los nombres de las coordenadas. Adicionalmente, también definimos el sistema de coordenadas que conocemos.</p></li>
</ol>
<pre class="r"><code>#obtenemos la extensión
ext &lt;- extent(as(grid, &quot;Spatial&quot;))

#objeto extent
ext</code></pre>
<pre><code>## class      : Extent 
## xmin       : 338795.6 
## xmax       : 848795.6 
## ymin       : 7033371 
## ymax       : 7383371</code></pre>
<pre class="r"><code>#raster destino
r &lt;- raster(resolution = 5000, ext = ext, crs = &quot;+proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs&quot;)

#convertimos los puntos a un spatial object clase sf
dist_sf &lt;- st_as_sf(df, coords = c(&quot;X&quot;,&quot;Y&quot;)) %&gt;%
                      st_set_crs(3055)

#creamos el raster de la distancia
dist_raster &lt;- rasterize(dist_sf, r, &quot;dist&quot;, fun = mean)

#raster
dist_raster</code></pre>
<pre><code>## class      : RasterLayer 
## dimensions : 70, 102, 7140  (nrow, ncol, ncell)
## resolution : 5000, 5000  (x, y)
## extent     : 338795.6, 848795.6, 7033371, 7383371  (xmin, xmax, ymin, ymax)
## crs        : +proj=utm +zone=27 +ellps=intl +units=m +no_defs 
## source     : memory
## names      : layer 
## values     : 0.006124901, 115.1712  (min, max)</code></pre>
<pre class="r"><code>#plotear el raster
plot(dist_raster)</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>#exportamos el raster
writeRaster(dist_raster, file = &quot;dist_islandia.tif&quot;, format = &quot;GTiff&quot;, overwrite = TRUE)</code></pre>
<p>La función <code>rasterize( )</code> está pensada para crear rasters a partir de un grid irregular. En caso que tengamos un grid regular, como este mismo, podemos usar una alternativa más fácil. La función <code>rasterFromXYZ( )</code> convierte un <em>data.frame</em> con longitud, latitud y la variable <em>Z</em> en un raster. Es importante que el orden debe ser longitud, latitud, variables.</p>
<pre class="r"><code>r &lt;- rasterFromXYZ(df[, c(2:3, 1)], crs = &quot;+proj=utm +zone=27 +ellps=intl +towgs84=-73,47,-83,0,0,0,0 +units=m +no_defs&quot;)

plot(r)</code></pre>
<p><img src="https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/index.es_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Con el cálculo de la distancia podemos llegar crear <em>arte</em>, como se ve en la cabezera de este post, que incluye un mapamundi únicamente con la distancia al mar de todos los continentes. Una perspectiva diferente a nuestro mundo (<a href="https://www.geografiainfinita.com/2017/06/una-radiografia-del-mundo-a-traves-de-la-distancia-al-mar/">aquí más</a>).</p>
<p><a href="https://www.buymeacoffee.com/drxeo" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" height="41" width="174"></a></p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/es/tag/distancia/">distancia</a>
  
  <a class="badge badge-light" href="/es/tag/raster/">raster</a>
  
  <a class="badge badge-light" href="/es/tag/calculo/">calculo</a>
  
  <a class="badge badge-light" href="/es/tag/variable/">variable</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/&amp;text=Calcular%20la%20distancia%20al%20mar%20en%20R" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/&amp;t=Calcular%20la%20distancia%20al%20mar%20en%20R" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Calcular%20la%20distancia%20al%20mar%20en%20R&amp;body=https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/&amp;title=Calcular%20la%20distancia%20al%20mar%20en%20R" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Calcular%20la%20distancia%20al%20mar%20en%20R%20https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://dominicroye.github.io/es/2019/calcular-la-distancia-al-mar-en-r/&amp;title=Calcular%20la%20distancia%20al%20mar%20en%20R" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://dominicroye.github.io/"><img class="avatar mr-3 avatar-circle" src="/es/author/dr.-dominic-roye/avatar_hu930bec32484cd86675af8880de95caa2_508993_270x270_fill_q75_lanczos_center.jpg" alt="Dr. Dominic Royé"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://dominicroye.github.io/">Dr. Dominic Royé</a></h5>
      <h6 class="card-subtitle">Investigador y responsable de ciencia de datos</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/dr_xeo" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:dominic.roye@ficlima.org" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.es/citations?user=EoYa8jUAAAAJ&amp;hl=es" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/dominicroye" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/dominicroye/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://www.researchgate.net/profile/Dominic_Roye" target="_blank" rel="noopener">
        <i class="ai ai-researchgate"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>
















  
  
  <div class="article-widget content-widget-hr">
    <h3>Relacionado</h3>
    <ul>
      
      <li><a href="/es/2023/el-tiempo-de-manana/">El tiempo de mañana</a></li>
      
      <li><a href="/es/2022/efecto-hillshade-o-sombras-de-laderas/">Efecto hillshade o sombras de laderas</a></li>
      
      <li><a href="/es/2022/uso-de-datos-multidimensionales-espaciales/">Uso de datos multidimensionales espaciales</a></li>
      
      <li><a href="/es/2020/distancias-geograficas/">Distancias geográficas</a></li>
      
      <li><a href="/es/2023/mapas-insertados-con-ggplot2/">Mapas insertados con ggplot2</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  

  
  <p class="powered-by">
    © 2018-2023 Dominic Royé. All rights reserved
  </p>
  

  
  






  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Citar</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copiar
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Descargar
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    <script src="/js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js"></script>

    
    
    
      
      
        <script src="https://cdn.jsdelivr.net/gh/desandro/imagesloaded@v4.1.4/imagesloaded.pkgd.min.js" integrity="sha512-S5PZ9GxJZO16tT9r3WJp/Safn31eu8uWrzglMahDT4dsmgqWonRY9grk3j+3tfuPr9WJNsfooOR7Gi7HL5W2jw==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/metafizzy/isotope@v3.0.6/dist/isotope.pkgd.min.js" integrity="sha512-Zq2BOxyhvnRFXu0+WE6ojpZLOU2jdnqbrM1hmVdGzyeCa1DgM3X5Q4A/Is9xA1IkbUeDd7755dNNI/PzSf2Pew==" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/r.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    
      <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>
    

    
    

    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    <script src="/es/js/wowchemy.min.50d3bf3df0c53b31631bb48a62b35f92.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
